<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>WenChongAndJiaoKou</title>
  
  
  <link href="/WenChongAndJiaoKou/atom.xml" rel="self"/>
  
  <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/"/>
  <updated>2018-12-16T12:57:39.055Z</updated>
  <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/</id>
  
  <author>
    <name>WenChongAndJiaoKou</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Java下Zip处理的工具类</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/12/16/2018-12-16-Zip%E5%A4%84%E7%90%86%E7%9A%84%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/12/16/2018-12-16-Zip处理的工具类/</id>
    <published>2018-12-16T12:29:34.000Z</published>
    <updated>2018-12-16T12:57:39.055Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简要介绍"><a href="#简要介绍" class="headerlink" title="简要介绍"></a>简要介绍</h2><p>​    通过工具类，读取zip压缩文件，获取被压缩的文件内容，工具类忽略压缩文件中含有文件夹的文件，只考虑压缩文件的内容仅限于文件。</p><h2 id="Pom"><a href="#Pom" class="headerlink" title="Pom"></a>Pom</h2><h2 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.tools.zip.ZipEntry;</span><br><span class="line"><span class="keyword">import</span> org.apache.tools.zip.ZipFile;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 说明:</span></span><br><span class="line"><span class="comment"> *  * zip处理工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZipUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FILE_LIMIT_SIZE = <span class="number">1000</span> * <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 读取zip的文件，并转为map对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  zipFile     zip文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>             返回map对象，键为文件名，值为文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Object&gt; <span class="title">readZip2MapList</span><span class="params">(File zipFile)</span> <span class="keyword">throws</span> IOException, Exception </span>&#123;</span><br><span class="line">        String fileEncode = checkEncoding(zipFile);</span><br><span class="line">        ZipFile zf = <span class="keyword">new</span> ZipFile(zipFile, fileEncode);</span><br><span class="line"></span><br><span class="line">        Map&lt;String, Object&gt; fileMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Enumeration&lt;ZipEntry&gt; entries = zf.getEntries();</span><br><span class="line">            <span class="keyword">while</span> (entries.hasMoreElements()) &#123;</span><br><span class="line">                ZipEntry ze = entries.nextElement();</span><br><span class="line">                String filePath = ze.getName();</span><br><span class="line">                <span class="keyword">if</span> (ze.isDirectory()) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                is = zf.getInputStream(ze);</span><br><span class="line">                <span class="keyword">byte</span>[] fileByteArr = toByteArray(is);</span><br><span class="line">                <span class="keyword">if</span>(fileByteArr.length &gt; FILE_LIMIT_SIZE)&#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"文件"</span> + filePath + <span class="string">"大小超过"</span> + FILE_LIMIT_SIZE / <span class="number">1000</span> + <span class="string">"KB"</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    fileMap.put(filePath, fileByteArr);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(is != <span class="keyword">null</span>)&#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> fileMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 检查文件的编码 */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">checkEncoding</span><span class="params">(File file)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        InputStream is = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">3</span>];</span><br><span class="line">        is.read(b);</span><br><span class="line">        is.close();</span><br><span class="line">        <span class="keyword">if</span> (b[<span class="number">0</span>] == -<span class="number">17</span> &amp;&amp; b[<span class="number">1</span>] == -<span class="number">69</span> &amp;&amp; b[<span class="number">2</span>] == -<span class="number">65</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"UTF-8"</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">"GBK"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将inputStream读取位字节</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> input</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] toByteArray(InputStream input) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ByteArrayOutputStream output = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            <span class="keyword">long</span> count = <span class="number">0L</span>;</span><br><span class="line">            <span class="keyword">int</span> n;</span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">4096</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">boolean</span> var5 = <span class="keyword">false</span>; -<span class="number">1</span> != (n = input.read(buffer)); count += (<span class="keyword">long</span>)n) &#123;</span><br><span class="line">                output.write(buffer, <span class="number">0</span>, n);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//count =(count &gt; 2147483647L ? -1 : (int)count) ;</span></span><br><span class="line">            <span class="keyword">return</span> output.toByteArray();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException ioe) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">"Zip读取数据失败："</span>+ ioe.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;简要介绍&quot;&gt;&lt;a href=&quot;#简要介绍&quot; class=&quot;headerlink&quot; title=&quot;简要介绍&quot;&gt;&lt;/a&gt;简要介绍&lt;/h2&gt;&lt;p&gt;​    通过工具类，读取zip压缩文件，获取被压缩的文件内容，工具类忽略压缩文件中含有文件夹的文件，只考虑压缩文件的内容仅
      
    
    </summary>
    
    
      <category term="Utils" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/Utils/"/>
    
  </entry>
  
  <entry>
    <title>java获取证书对象、摘要、通用名</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/12/16/2018-12-16-java%E8%8E%B7%E5%8F%96%E8%AF%81%E4%B9%A6%E5%AF%B9%E8%B1%A1%E3%80%81%E6%91%98%E8%A6%81%E3%80%81%E9%80%9A%E7%94%A8%E5%90%8D/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/12/16/2018-12-16-java获取证书对象、摘要、通用名/</id>
    <published>2018-12-16T08:16:55.000Z</published>
    <updated>2018-12-16T13:02:37.181Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简要介绍"><a href="#简要介绍" class="headerlink" title="简要介绍"></a>简要介绍</h2><p>​    通过java的方式来使用PKI常用的API，这里主要实现有：获取证书对象、获取摘要、获取证书CN项</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="构造证书对象"><a href="#构造证书对象" class="headerlink" title="构造证书对象"></a>构造证书对象</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 构造证书对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  data      证书的字节数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>           证书对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> X509Certificate <span class="title">ParseToCertObj</span><span class="params">(<span class="keyword">byte</span>[] data)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        CertificateFactory cf = <span class="keyword">null</span>;</span><br><span class="line">        cf = CertificateFactory.getInstance(<span class="string">"X.509"</span>);</span><br><span class="line"></span><br><span class="line">        X509Certificate cert = (X509Certificate) cf.generateCertificate(<span class="keyword">new</span> ByteArrayInputStream(data));</span><br><span class="line">        <span class="keyword">return</span> cert;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="获取证书摘要"><a href="#获取证书摘要" class="headerlink" title="获取证书摘要"></a>获取证书摘要</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">    * 获取摘要</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> data 计算摘要值的原文</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getDigest</span><span class="params">(<span class="keyword">byte</span>[] data)</span> <span class="keyword">throws</span> NoSuchAlgorithmException </span>&#123;</span><br><span class="line">       MessageDigest digest = MessageDigest.getInstance(<span class="string">"SHA-1"</span>);</span><br><span class="line">       digest.update(data);</span><br><span class="line">       <span class="keyword">byte</span>[] dg = digest.digest();</span><br><span class="line">       <span class="keyword">return</span> HexEncoder.encode(dg);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="获取证书CN项"><a href="#获取证书CN项" class="headerlink" title="获取证书CN项"></a>获取证书CN项</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">String dn = x509certificate.getIssuerDN().getName();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 若无CN,依次用OU,O,EMAILADDRESS代替 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">GetCNFromDN</span><span class="params">(String dn)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> begin = dn.indexOf(<span class="string">"CN="</span>);</span><br><span class="line">        <span class="keyword">if</span> (begin &lt; <span class="number">0</span>)</span><br><span class="line">            begin = dn.indexOf(<span class="string">"OU="</span>);</span><br><span class="line">        <span class="keyword">if</span> (begin &lt; <span class="number">0</span>)</span><br><span class="line">            begin = dn.indexOf(<span class="string">"O="</span>);</span><br><span class="line">        <span class="keyword">if</span> (begin &lt; <span class="number">0</span>)</span><br><span class="line">            begin = dn.indexOf(<span class="string">"EMAILADDRESS="</span>);</span><br><span class="line">        <span class="keyword">if</span> (begin &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> dn;</span><br><span class="line">        <span class="keyword">int</span> begin2 = dn.indexOf(<span class="string">"="</span>, begin);</span><br><span class="line">        <span class="keyword">int</span> end = dn.indexOf(<span class="string">","</span>, begin2);</span><br><span class="line">        <span class="keyword">if</span> (end &lt; <span class="number">0</span>)</span><br><span class="line">            end = dn.length();</span><br><span class="line">        String CN = dn.substring(begin2 + <span class="number">1</span>, end);</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">if</span> (CN.startsWith(<span class="string">"\""</span>) &amp;&amp; CN.endsWith(<span class="string">"\""</span>))</span><br><span class="line">            CN = CN.substring(<span class="number">1</span>, CN.length() - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> CN;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="all"><a href="#all" class="headerlink" title="all"></a>all</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.security.cert.CertificateFactory;</span><br><span class="line"><span class="keyword">import</span> java.security.cert.X509Certificate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PKIUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 构造证书对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  data      证书的字节数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>           证书对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> X509Certificate <span class="title">ParseToCertObj</span><span class="params">(<span class="keyword">byte</span>[] data)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        CertificateFactory cf = <span class="keyword">null</span>;</span><br><span class="line">        cf = CertificateFactory.getInstance(<span class="string">"X.509"</span>);</span><br><span class="line"></span><br><span class="line">        X509Certificate cert = (X509Certificate) cf.generateCertificate(<span class="keyword">new</span> ByteArrayInputStream(data));</span><br><span class="line">        <span class="keyword">return</span> cert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * 获取摘要</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 计算摘要值的原文</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getDigest</span><span class="params">(<span class="keyword">byte</span>[] data)</span> <span class="keyword">throws</span> NoSuchAlgorithmException </span>&#123;</span><br><span class="line">        MessageDigest digest = MessageDigest.getInstance(<span class="string">"SHA-1"</span>);</span><br><span class="line">        digest.update(data);</span><br><span class="line">        <span class="keyword">byte</span>[] dg = digest.digest();</span><br><span class="line">        <span class="keyword">return</span> HexEncoder.encode(dg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 若无CN,依次用OU,O,EMAILADDRESS代替</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">GetCNFromDN</span><span class="params">(String dn)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> begin = dn.indexOf(<span class="string">"CN="</span>);</span><br><span class="line">        <span class="keyword">if</span> (begin &lt; <span class="number">0</span>)</span><br><span class="line">            begin = dn.indexOf(<span class="string">"OU="</span>);</span><br><span class="line">        <span class="keyword">if</span> (begin &lt; <span class="number">0</span>)</span><br><span class="line">            begin = dn.indexOf(<span class="string">"O="</span>);</span><br><span class="line">        <span class="keyword">if</span> (begin &lt; <span class="number">0</span>)</span><br><span class="line">            begin = dn.indexOf(<span class="string">"EMAILADDRESS="</span>);</span><br><span class="line">        <span class="keyword">if</span> (begin &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> dn;</span><br><span class="line">        <span class="keyword">int</span> begin2 = dn.indexOf(<span class="string">"="</span>, begin);</span><br><span class="line">        <span class="keyword">int</span> end = dn.indexOf(<span class="string">","</span>, begin2);</span><br><span class="line">        <span class="keyword">if</span> (end &lt; <span class="number">0</span>)</span><br><span class="line">            end = dn.length();</span><br><span class="line">        String CN = dn.substring(begin2 + <span class="number">1</span>, end);</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">if</span> (CN.startsWith(<span class="string">"\""</span>) &amp;&amp; CN.endsWith(<span class="string">"\""</span>))</span><br><span class="line">            CN = CN.substring(<span class="number">1</span>, CN.length() - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> CN;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;简要介绍&quot;&gt;&lt;a href=&quot;#简要介绍&quot; class=&quot;headerlink&quot; title=&quot;简要介绍&quot;&gt;&lt;/a&gt;简要介绍&lt;/h2&gt;&lt;p&gt;​    通过java的方式来使用PKI常用的API，这里主要实现有：获取证书对象、获取摘要、获取证书CN项&lt;/p&gt;
&lt;h2
      
    
    </summary>
    
    
      <category term="PKI" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/PKI/"/>
    
  </entry>
  
  <entry>
    <title>spring-boot2.1+thymeleaf简单的web开发</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/12/11/2018-12-11-spring-boot2.1+thymeleaf%E7%AE%80%E5%8D%95%E7%9A%84web%E5%BC%80%E5%8F%91/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/12/11/2018-12-11-spring-boot2.1+thymeleaf简单的web开发/</id>
    <published>2018-12-11T07:50:04.000Z</published>
    <updated>2018-12-16T13:01:42.744Z</updated>
    
    <content type="html"><![CDATA[<h2 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h2><ul><li>IDEA</li></ul><h2 id="工程结构"><a href="#工程结构" class="headerlink" title="工程结构"></a>工程结构</h2><div class="article-img"><p><img src="..\uploads\1544965198748.png" alt="1544549050334"></p></div><h2 id="开发流程"><a href="#开发流程" class="headerlink" title="开发流程"></a>开发流程</h2><h3 id="POM"><a href="#POM" class="headerlink" title="POM"></a>POM</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>xx.seal<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>importdatabase<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>importdatabase<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--可以不用，用于bo的get/set注释--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--开发工具-热部署--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="bo"><a href="#bo" class="headerlink" title="bo"></a>bo</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"><span class="keyword">import</span> lombok.Setter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String seal;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">int</span> id, String userName, String seal)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">        <span class="keyword">this</span>.seal = seal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xxx.seal.importdatabase.bo.User;</span><br><span class="line"><span class="keyword">import</span> xxx.seal.importdatabase.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(path = &#123;<span class="string">"/user/list"</span>, <span class="string">"list"</span>&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserList</span><span class="params">(Model model)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; userList = <span class="keyword">new</span> ArrayList&lt;User&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">10</span>; i++) &#123;</span><br><span class="line">            userList.add(<span class="keyword">new</span> User(i,<span class="string">"admin"</span>+i,<span class="string">"中国广州"</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        model.addAttribute(<span class="string">"hello"</span>, <span class="string">"Hello, Spring Boot!"</span>);</span><br><span class="line">        model.addAttribute(<span class="string">"userList"</span>,userService.userList());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"list"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="service"><a href="#service" class="headerlink" title="service"></a>service</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xxx.seal.importdatabase.bo.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">userList</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; users = <span class="keyword">new</span> ArrayList&lt;User&gt;();</span><br><span class="line"></span><br><span class="line">        User user1 = <span class="keyword">new</span> User();</span><br><span class="line">        User user2 = <span class="keyword">new</span> User();</span><br><span class="line">        User user3 = <span class="keyword">new</span> User();</span><br><span class="line"></span><br><span class="line">        user1.setId(<span class="number">1</span>);</span><br><span class="line">        user1.setSeal(<span class="string">"MIXNK"</span>);</span><br><span class="line">        user1.setUserName(<span class="string">"admin"</span>);</span><br><span class="line">        users.add(user1);</span><br><span class="line"></span><br><span class="line">        user2.setId(<span class="number">2</span>);</span><br><span class="line">        user2.setSeal(<span class="string">"MIXNKaa"</span>);</span><br><span class="line">        user2.setUserName(<span class="string">"aguicode"</span>);</span><br><span class="line">        users.add(user2);</span><br><span class="line"></span><br><span class="line">        user3.setId(<span class="number">3</span>);</span><br><span class="line">        user3.setSeal(<span class="string">"MIXNKcc"</span>);</span><br><span class="line">        user3.setUserName(<span class="string">"lmg"</span>);</span><br><span class="line">        users.add(user3);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="application"><a href="#application" class="headerlink" title="application"></a>application</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ImportdatabaseApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span>  </span>&#123;</span><br><span class="line">        SpringApplication.run(ImportdatabaseApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;用户列表&lt;/title&gt;</span><br><span class="line">    &lt;link href=&quot;/css/main.css&quot; rel=&quot;stylesheet&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 th:text=&quot;$&#123;hello&#125;&quot;&gt;Hello, Spring Boot!&lt;/h1&gt;</span><br><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;ID&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;用户名&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;签章base64编码&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;tr th:each=&quot;user : $&#123;userList&#125;&quot;&gt;</span><br><span class="line">        &lt;td th:text=&quot;$&#123;user.id&#125;&quot;&gt;0&lt;/td&gt;</span><br><span class="line">        &lt;td th:text=&quot;$&#123;user.userName&#125;&quot;&gt;adminSuper&lt;/td&gt;</span><br><span class="line">        &lt;td th:text=&quot;$&#123;user.seal&#125;&quot;&gt;xxxxxx&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="application-1"><a href="#application-1" class="headerlink" title="application"></a>application</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># url path</span><br><span class="line">server.port=8088</span><br><span class="line">server.servlet.context-path=/importDatabases</span><br><span class="line"></span><br><span class="line"># thymeleaf</span><br><span class="line">spring.thymeleaf.prefix=classpath:/templates/</span><br><span class="line">spring.thymeleaf.suffix=.html</span><br><span class="line">spring.thymeleaf.mode=HTML</span><br><span class="line">spring.thymeleaf.encoding=UTF-8</span><br><span class="line">spring.thymeleaf.servlet.content-type=text/html</span><br><span class="line"></span><br><span class="line"># 开发阶段关闭缓存 (=false)</span><br><span class="line">spring.thymeleaf.cache=false</span><br><span class="line"></span><br><span class="line">#指定某些文件不进行监听，即不会进行热加载</span><br><span class="line">spring.devtools.restart.exclude=application.properties</span><br></pre></td></tr></table></figure><h4 id="log4j"><a href="#log4j" class="headerlink" title="log4j"></a>log4j</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#等级可分为OFF、FATAL、ERROR、WARN、INFO、DEBUG、ALL</span><br><span class="line">#Log4j建议只使用四个级别，优先级从高到低分别是ERROR、WARN、INFO、DEBUG</span><br><span class="line"></span><br><span class="line">######################################</span><br><span class="line"># Set log levelsINFODEBUG</span><br><span class="line">######################################</span><br><span class="line">log4j.rootLogger=INFO,console,rolling_file</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">######################################</span><br><span class="line"># console Appender 设置输出到控制台</span><br><span class="line">######################################</span><br><span class="line">log4j.appender.console=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.console.Encoding=UTF-8</span><br><span class="line">log4j.appender.console.layout=org.apache.log4j.SimpleLayout</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">######################################</span><br><span class="line">#rolling_file Appender 设置输出到日志文件</span><br><span class="line">#说明：文件大小到达指定尺寸的时候产生一个新的文件</span><br><span class="line">######################################</span><br><span class="line">log4j.appender.rolling_file=org.apache.log4j.RollingFileAppender</span><br><span class="line">log4j.appender.rolling_file.Encoding=UTF-8</span><br><span class="line">log4j.appender.rolling_file.ImmediateFlush=true</span><br><span class="line">log4j.appender.rolling_file.MaxFileSize=50MB</span><br><span class="line">log4j.appender.rolling_file.MaxBackupIndex=30</span><br><span class="line">log4j.appender.rolling_file.File=$&#123;catalina.home&#125;/logs/XXX_log.txt</span><br><span class="line">log4j.appender.rolling_file.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.rolling_file.layout.ConversionPattern=[%-5p|%d&#123;yyyy-MM-dd HH:mm:ss.S&#125; |%t |%c]- %m%n</span><br></pre></td></tr></table></figure><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><p>命令行：mvn springboot-run</p><p>页面输入：<a href="http://192.168.20.138:8088/importDatabases/user/list" target="_blank" rel="noopener">http://192.168.20.138:8088/importDatabases/user/list</a></p><div class="article-img"><p><img src="../uploads/1544548954490.png" alt="1544548954490"></p></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;开发工具&quot;&gt;&lt;a href=&quot;#开发工具&quot; class=&quot;headerlink&quot; title=&quot;开发工具&quot;&gt;&lt;/a&gt;开发工具&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;IDEA&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;工程结构&quot;&gt;&lt;a href=&quot;#工程结构&quot; class=&quot;hea
      
    
    </summary>
    
    
      <category term="spring boot" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/spring-boot/"/>
    
  </entry>
  
  <entry>
    <title>mysql5.7免安装与配置</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/12/10/2018-12-10-mysql5.7%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/12/10/2018-12-10-mysql5.7安装与配置/</id>
    <published>2018-12-10T08:20:02.000Z</published>
    <updated>2018-12-16T08:16:33.659Z</updated>
    
    <content type="html"><![CDATA[<h2 id="解压文件"><a href="#解压文件" class="headerlink" title="解压文件"></a>解压文件</h2><p>1.svn目录：\192.168.0.8\software\数据库软件\mysql\mysql-5.7.18-winx64.zip</p><p>2.解压：mysql-5.7.18-winx64安装包，解压结果如下：</p><div class="article-img"><p><img src="..\uploads\1544549095711.png" alt="1544549095711"></p></div><p>3.因为是免安装版本（其实msi安装也一样），所以就只有以上的文件</p><p>4.添加一个data文件夹到mysql的根目录下（与bin、docs等同级目录）</p><h2 id="安装配置"><a href="#安装配置" class="headerlink" title="安装配置"></a>安装配置</h2><ol><li>mysql5.7及以上的版本，如果没有my.default.ini，那么也<strong>不需要什么my.ini</strong></li><li>环境变量，设置MYSQL_HOME，并添加   ;%MYSQL_HOME%/bin到path上</li><li>管理员登录cmd</li><li>mysqld的安装：mysqld -install（删除mysql：mysqld -remove）</li><li>设置密码默认为空（重要）：mysqld  –initialize-insecure –user=mysql</li><li>开启服务：net start mysql（关闭服务：net stop mysql）</li><li>登录mysql：mysql -h localhost -u root -p</li><li>退出mysql：在mysql&gt;输入quit</li></ol><h2 id="遇到的坑"><a href="#遇到的坑" class="headerlink" title="遇到的坑"></a>遇到的坑</h2><p>​    我也是佩服我自己，装一次简简单单的mysql，会遇到那么多问题！无奈，只能一个个解决，不过静下心来解决，会发现自己原本可以快速解决的，而不是踩了一个坑后又一个坑，其实还是没有静下心来思考！</p><ol><li><p><strong>==系统无法找到指定文件==</strong></p><p>原因：重装了mysql，但是安装过程中，一些变量的填写有问题，比如my.ini的地址；也有可能是因为免安装的过程中，没有明确mysqld的目录。</p><p>解决方法：运行-regedit、在HKYE_LOCAL_MACHINE/SYSTEM/CurrentControlSet/Services/Mysql，修改ImagePath为mysqld的实际地址，比如说d:/mysql/bin/mnysqld</p><p>参考：<a href="https://blog.csdn.net/digitalmon/article/details/78152187、http://www.cnblogs.com/mlgjb/p/8761408.html、https://blog.csdn.net/lwl20140904/article/details/80806730" target="_blank" rel="noopener">https://blog.csdn.net/digitalmon/article/details/78152187、http://www.cnblogs.com/mlgjb/p/8761408.html、https://blog.csdn.net/lwl20140904/article/details/80806730</a></p></li></ol><ol start="2"><li><p><strong>==mysql服务正在启动或停止中请稍后片刻再试一下==</strong></p><p>原因：因为有一些程序占用着mysqld，比如说，windows的【服务】，即服务管理窗口也会占用，所以需要关闭窗口，还需要卸载mysql，接着重新mysqld -remove，然后install就OK</p><p>参考：<a href="https://blog.csdn.net/qsysz_/article/details/82845152、https://blog.csdn.net/bluefish_flying/article/details/77930375" target="_blank" rel="noopener">https://blog.csdn.net/qsysz_/article/details/82845152、https://blog.csdn.net/bluefish_flying/article/details/77930375</a></p></li></ol><ol start="3"><li><p><strong>==彻底卸载mysql==</strong></p><p>1）控制面板-管理工具-服务，停止mysql服务，或者是命令：net stop mysql</p><p>2）关闭进程（可以通过taskkill /pid 1688 /F的方式强制删除进程）</p><p>3）通过控制面板卸载mysql（如果有mysql字样的话）</p><p>4）删除C盘带有mysql和my.ini等字样的文件与文件夹</p><p>5）注册表删除mysql，运行-regedit，删除如下：</p><p>HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\Eventlog\Application\MySQL文件夹</p><p>HKEY_LOCAL_MACHINE\SYSTEM\ControlSet002\Services\Eventlog\Application\MySQL文件夹。</p><p>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application\MySQL文件夹</p><p>参考：<a href="https://www.cnblogs.com/Sue_/p/3274063.html" target="_blank" rel="noopener">https://www.cnblogs.com/Sue_/p/3274063.html</a></p></li></ol><ol start="4"><li><p><strong>==1067==</strong></p><p>原因：my.ini配置的问题</p><p>解决方法：</p><p>1）如果是5.7及以上的，直接删除my.ini，重新卸载和安装</p><p>2）my.ini中engine的，改为default-storage-engine=MyISAM</p><p>参考：<a href="https://www.cnblogs.com/hoobey/p/5220090.html" target="_blank" rel="noopener">https://www.cnblogs.com/hoobey/p/5220090.html</a></p></li></ol><ol start="5"><li><p><strong>==1058==</strong></p><p>参考：<a href="https://blog.csdn.net/u012586848/article/details/46860839" target="_blank" rel="noopener">https://blog.csdn.net/u012586848/article/details/46860839</a></p></li></ol><ol start="6"><li><p><strong>==mysql服务无法启动==</strong></p><p>原因：mysql免安装中，my.ini中明确有一个data文件夹，但是实际上没有新建这个data文件夹</p><p>解决，在mysql根目录（docs、bin等目录同级），创建一个data文件夹</p><p>参考：<a href="https://www.cnblogs.com/xixihuang/p/5663559.html" target="_blank" rel="noopener">https://www.cnblogs.com/xixihuang/p/5663559.html</a></p></li></ol><ol start="7"><li><p><strong>==windows服务：被标记为删除==</strong></p><p>原因：后台线程未关闭，mysql被占用</p><p>解决：通过资源管理器结束进程，关闭服务窗口（可参考<strong>==mysql服务正在启动或停止中请稍后片刻再试一下==</strong>）</p><p>参考：<a href="https://blog.csdn.net/iceagezh/article/details/79004443、https://blog.csdn.net/bluefish_flying/article/details/77930375" target="_blank" rel="noopener">https://blog.csdn.net/iceagezh/article/details/79004443、https://blog.csdn.net/bluefish_flying/article/details/77930375</a></p></li></ol><ol start="8"><li><p><strong>==mysql忘记密码==</strong></p><p>1）关闭mysql服务（服务管理中停止mysql，或者是命令：net stop mysql）</p><p>2）在mysql的目录下，进入bin，打开命令行，输入mysqld –skip-grant-tables，会自动挂起</p><p>3）重新打开一个命令行，输入mysql -h localhost -uroot -p</p><p>4）选择能够修改用户的数据库：use mysql</p><p>5）mysql5.7及以上，修改用户密码：UPDATE user SET authentication_string=PASSWORD(“123456”) WHERE User=”root”; flush privileges</p><p>6）删除挂起的命令行，在新开的命令行，输入root/123456</p><p>参考：<a href="https://www.cnblogs.com/SmartNing/p/5178628.html" target="_blank" rel="noopener">https://www.cnblogs.com/SmartNing/p/5178628.html</a></p></li></ol><ol start="9"><li><p><strong>==查看文件或文件夹被那个进程占用==</strong></p><p>1）打开资源管理器（桌面栏，右键）</p><p>2）任务管理器-性能-资源监视器-CPU-关联的句柄</p><p>3）输入文件名、文件夹名，进行搜索</p><p>参考：<a href="https://blog.csdn.net/jlminghui/article/details/78456182" target="_blank" rel="noopener">https://blog.csdn.net/jlminghui/article/details/78456182</a></p></li></ol><ol start="10"><li><p><strong>==mysql初始化timestamp==</strong></p><p>原因：mysql的timestamp初始化不允许为不合法的字符</p><p>解决：修改sql_mode</p><p>1）查看，show variables like ‘sql_mode’;</p><p>2）修改，set session<br>sql_mode=’ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION’;</p><p>参考：<a href="https://blog.csdn.net/cuiaamay/article/details/53896623" target="_blank" rel="noopener">https://blog.csdn.net/cuiaamay/article/details/53896623</a></p></li></ol><ol start="11"><li><strong>==mysql安装缺少C++环境==</strong>：<a href="https://www.microsoft.com/en-us/download/confirmation.aspx?id=40784" target="_blank" rel="noopener">https://www.microsoft.com/en-us/download/confirmation.aspx?id=40784</a></li></ol><h2 id="用到的命令"><a href="#用到的命令" class="headerlink" title="用到的命令"></a>用到的命令</h2><p>关闭防火墙：netsh firewall set opmode disable</p><p>杀死某个进程：taskkill /pid 1688 /F</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;解压文件&quot;&gt;&lt;a href=&quot;#解压文件&quot; class=&quot;headerlink&quot; title=&quot;解压文件&quot;&gt;&lt;/a&gt;解压文件&lt;/h2&gt;&lt;p&gt;1.svn目录：\192.168.0.8\software\数据库软件\mysql\mysql-5.7.18-winx64.
      
    
    </summary>
    
    
      <category term="安装" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>docker的使用</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/12/05/2018-12-5-docker%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/12/05/2018-12-5-docker的使用/</id>
    <published>2018-12-05T14:49:19.000Z</published>
    <updated>2018-12-05T14:56:11.657Z</updated>
    
    <content type="html"><![CDATA[<ol><li>docker ps    查看docker下正在运行的镜像（需要注意的是CONTAINER ID）</li><li>docker exec -it de9fa67527f6 /bash    进入docker对应的CONTAINER ID镜像</li><li>docker stop de9fa67527f6    关闭docker对应的CONTAINER ID镜像（例如de9fa67527f6代表的是mysql，那么就是关闭mysql）</li><li>docker start mysql_5.7.19    在docker启动mysql</li><li>docker exec -it mysql_5.7.19 bash        在docker启动mysql</li><li>docker images    查看挂载在docker的所有镜像</li></ol><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\clipboard-1544021591795.png" alt="img"></p></div><ol start="7"><li>docker info    查看docker的详细信息</li></ol><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\clipboard.png" alt="img"></p></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;docker ps    查看docker下正在运行的镜像（需要注意的是CONTAINER ID）&lt;/li&gt;
&lt;li&gt;docker exec -it de9fa67527f6 /bash    进入docker对应的CONTAINER ID镜像&lt;/li&gt;
&lt;li
      
    
    </summary>
    
    
      <category term="docker" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Linux下最优的tomcat调优</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/12/03/2018-12-3-Linux%E4%B8%8B%E6%9C%80%E4%BC%98%E7%9A%84tomcat%E8%B0%83%E4%BC%98/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/12/03/2018-12-3-Linux下最优的tomcat调优/</id>
    <published>2018-12-03T07:14:23.000Z</published>
    <updated>2018-12-04T16:19:30.877Z</updated>
    
    <content type="html"><![CDATA[<ol><li>Linux系统，参数读取命令</li><li>tomcat优化的大致方向，流程</li><li>实践-反馈-知识-反馈-实践</li><li>笔记</li><li>代码流程</li></ol><p>Linux系统配置优化建议：<a href="https://www.jianshu.com/p/98a14527afdc" target="_blank" rel="noopener">https://www.jianshu.com/p/98a14527afdc</a></p><p>Tomcat系统配置优化建议：<a href="http://blog.sina.com.cn/s/blog_605f5b4f01012ljj.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_605f5b4f01012ljj.html</a></p><p>Tomcat系统参数详解：<a href="https://www.cnblogs.com/kismetv/p/7806063.html" target="_blank" rel="noopener">https://www.cnblogs.com/kismetv/p/7806063.html</a></p><p>JVM查看java内存情况：<a href="https://www.cnblogs.com/anjijiji/p/6239395.html" target="_blank" rel="noopener">https://www.cnblogs.com/anjijiji/p/6239395.html</a></p><p>远程连接Linux的jconsole：<a href="http://elf8848.iteye.com/blog/471676" target="_blank" rel="noopener">http://elf8848.iteye.com/blog/471676</a></p><p>慢查询：<a href="https://www.jianshu.com/p/43091bfa8aa7" target="_blank" rel="noopener">https://www.jianshu.com/p/43091bfa8aa7</a></p><p>计算、IO阻塞两个部分</p><h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><p>​    在性能好的服务器机子，可以接纳的并发数大，但是在一些Linux系统，资源有限，可能就没能提供这么大的并发数，这个时候就需要通过Linux系统的配置，来制定一个最优的服务器配置，达到最大可能的并发量。</p><h2 id="Linux系统配置"><a href="#Linux系统配置" class="headerlink" title="Linux系统配置"></a>Linux系统配置</h2><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="磁盘"><a href="#磁盘" class="headerlink" title="磁盘"></a>磁盘</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df -h# 将磁盘容量通过易读的格式显示</span><br><span class="line">df -m# 将通过以mb为单位，显示磁盘容量</span><br><span class="line">df -k# 将通过以kb为单位，显示磁盘容量</span><br><span class="line">du # 查看当前目录下文件的容量</span><br><span class="line">du -a# 查看当前目录下所有文件的容量</span><br><span class="line">du -sb /*# 查看当前目录下文件占用的容量，bytes为单位</span><br><span class="line">du -sm /*# 查看当前目录下文件占用的容量，mb为单位</span><br></pre></td></tr></table></figure><p>示例如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Desktop]# df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda2        18G  2.5G   15G  15% /</span><br><span class="line">tmpfs           491M  224K  491M   1% /dev/shm</span><br><span class="line">/dev/sda1       283M   36M  232M  14% /boot</span><br><span class="line">[root@localhost Desktop]# df -hk</span><br><span class="line">Filesystem     1K-blocks    Used Available Use% Mounted on</span><br><span class="line">/dev/sda2       18208184 2582168  14694432  15% /</span><br><span class="line">tmpfs             502384     372    502012   1% /dev/shm</span><br><span class="line">/dev/sda1         289293   36855    237078  14% /boot</span><br><span class="line">[root@localhost Desktop]# df -hm</span><br><span class="line">Filesystem     1M-blocks  Used Available Use% Mounted on</span><br><span class="line">/dev/sda2          17782  2522     14351  15% /</span><br><span class="line">tmpfs                491     1       491   1% /dev/shm</span><br><span class="line">/dev/sda1            283    36       232  14% /boot</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# du -a</span><br><span class="line">4./.cshrc</span><br><span class="line">4./.xauthi9aZjs</span><br><span class="line">4./.bashrc</span><br><span class="line">4./.bash_logout</span><br><span class="line">4./.pki/nssdb</span><br><span class="line">8./.pki</span><br><span class="line">4./.bash_history</span><br><span class="line">4./.bash_profile</span><br><span class="line">12./install.log.syslog</span><br><span class="line">4./.tcshrc</span><br><span class="line">4./.xauth7a1Svt</span><br><span class="line">4./.xauthbyRxSH</span><br><span class="line">4./anaconda-ks.cfg</span><br><span class="line">4./.xauthK4fQJz</span><br><span class="line">48./install.log</span><br><span class="line">116.</span><br><span class="line">[root@localhost ~]# du -sm /*</span><br><span class="line">8/bin</span><br><span class="line">35/boot</span><br><span class="line">1/dev</span><br><span class="line">40/etc</span><br><span class="line">21/home</span><br><span class="line">170/lib</span><br><span class="line">27/lib64</span><br><span class="line">1/lost+found</span><br><span class="line">1/media</span><br><span class="line">1/mnt</span><br><span class="line">1/opt</span><br><span class="line">du: cannot access `/proc/3006/task/3006/fd/4': No such file or directory</span><br><span class="line">du: cannot access `/proc/3006/task/3006/fdinfo/4': No such file or directory</span><br><span class="line">du: cannot access `/proc/3006/fd/4': No such file or directory</span><br><span class="line">du: cannot access `/proc/3006/fdinfo/4': No such file or directory</span><br><span class="line">0/proc</span><br><span class="line">1/root</span><br><span class="line">15/sbin</span><br><span class="line">0/selinux</span><br><span class="line">1/srv</span><br><span class="line">0/sys</span><br><span class="line">1/tmp</span><br><span class="line">2083/usr</span><br><span class="line">257/var</span><br></pre></td></tr></table></figure><h4 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ps -lA# 查看系统所有的进程</span><br><span class="line">ps -l# 查看仅自己bash的进程</span><br><span class="line">ps aux# 查看系统所有的进程</span><br><span class="line">ps aux --sort -pcpu# 根据CPU的占用比例来查看系统所有进程</span><br><span class="line">ps aux --sort -pmem # 根据内存的占用比例来查看系统所有进程</span><br><span class="line">ps aux --sort -pid # 根据pid由大到小来查看系统所有进程</span><br><span class="line">top # 动态查看进程状况</span><br><span class="line">top -d 5# 动态的，每5秒刷新一次，显示进程状况</span><br><span class="line">top -d 10 -p 1# 动态的，每5秒刷新一次，显示PID为1的进程状况</span><br><span class="line">kill -9 2333# 删除pid为2333的进程</span><br></pre></td></tr></table></figure><p>示例如下（截取）：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ps -lA</span><br><span class="line">F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD</span><br><span class="line">4 S     0      1      0  0  80   0 -  4841 poll_s ?        00:00:02 init</span><br><span class="line">1 S     0      2      0  0  80   0 -     0 kthrea ?        00:00:00 kthreadd</span><br><span class="line">1 S     0      3      2  0 -40   - -     0 migrat ?        00:00:00 migration/0</span><br><span class="line">1 S     0      4      2  0  80   0 -     0 ksofti ?        00:00:00 ksoftirqd/0</span><br><span class="line">1 S     0      5      2  0 -40   - -     0 cpu_st ?        00:00:00 stopper/0</span><br><span class="line">5 S     0      6      2  0 -40   - -     0 watchd ?        00:00:00 watchdog/0</span><br><span class="line">1 S     0      7      2  0  80   0 -     0 worker ?        00:00:00 events/0</span><br><span class="line">1 S     0      8      2  0  80   0 -     0 worker ?        00:00:00 events/0</span><br><span class="line">[root@localhost ~]# ps aux</span><br><span class="line">USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root          1  0.1  0.1  19364  1540 ?        Ss   14:09   0:02 /sbin/init</span><br><span class="line">root          2  0.0  0.0      0     0 ?        S    14:09   0:00 [kthreadd]</span><br><span class="line">root          3  0.0  0.0      0     0 ?        S    14:09   0:00 [migration/0]</span><br><span class="line">root          4  0.0  0.0      0     0 ?        S    14:09   0:00 [ksoftirqd/0]</span><br><span class="line">root          5  0.0  0.0      0     0 ?        S    14:09   0:00 [stopper/0]</span><br><span class="line">root          6  0.0  0.0      0     0 ?        S    14:09   0:00 [watchdog/0]</span><br><span class="line">root          7  0.0  0.0      0     0 ?        S    14:09   0:00 [events/0]</span><br><span class="line">root          8  0.0  0.0      0     0 ?        S    14:09   0:00 [events/0]</span><br><span class="line">root          9  0.0  0.0      0     0 ?        S    14:09   0:00 [events_long/0]</span><br><span class="line">root         10  0.0  0.0      0     0 ?        S    14:09   0:00 [events_power_ef]</span><br><span class="line">root         11  0.0  0.0      0     0 ?        S    14:09   0:00 [cgroup]</span><br><span class="line">root         12  0.0  0.0      0     0 ?        S    14:09   0:00 [khelper]</span><br><span class="line">[root@localhost ~]# ps -l</span><br><span class="line">F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD</span><br><span class="line">4 S     0   2934   2919  0  80   0 - 41308 wait   pts/0    00:00:00 su</span><br><span class="line">4 S     0   2943   2934  0  80   0 - 27085 wait   pts/0    00:00:00 bash</span><br><span class="line">4 R     0   3146   2943  0  80   0 - 27033 -      pts/0    00:00:00 ps</span><br><span class="line">[root@localhost ~]# ps aux --sort -pcpu</span><br><span class="line">USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root       2511  0.3  3.6 156432 36860 tty1     Ss+  14:10   0:08 /usr/bin/Xorg :0 -br -verbose -audit 4 -auth /var</span><br><span class="line">root       1625  0.1  0.8 251432  8348 ?        Sl   14:10   0:03 /usr/sbin/vmtoolsd</span><br><span class="line">pe         2827  0.1  1.6 269792 16608 ?        S    14:11   0:03 /usr/lib/vmware-tools/sbin64/vmtoolsd -n vmusr --</span><br><span class="line">pe         2917  0.1  1.4 297200 14544 ?        Sl   14:11   0:02 /usr/bin/gnome-terminal -x /bin/sh -c cd '/home/p</span><br><span class="line">root          1  0.0  0.1  19364  1540 ?        Ss   14:09   0:02 /sbin/init</span><br><span class="line">root          2  0.0  0.0      0     0 ?        S    14:09   0:00 [kthreadd]</span><br><span class="line">root          3  0.0  0.0      0     0 ?        S    14:09   0:00 [migration/0]</span><br><span class="line">root          4  0.0  0.0      0     0 ?        S    14:09   0:00 [ksoftirqd/0]</span><br><span class="line">[root@localhost ~]# ps aux --sort -pmem</span><br><span class="line">USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root          1  0.0  0.1  19364  1540 ?        Ss   14:09   0:02 /sbin/init</span><br><span class="line">root          2  0.0  0.0      0     0 ?        S    14:09   0:00 [kthreadd]</span><br><span class="line">root          3  0.0  0.0      0     0 ?        S    14:09   0:00 [migration/0]</span><br><span class="line">[root@localhost ~]# top</span><br><span class="line">top - 15:00:30 up 50 min,  4 users,  load average: 0.00, 0.02, 0.00</span><br><span class="line">Tasks: 143 total,   1 running, 142 sleeping,   0 stopped,   0 zombie</span><br><span class="line">Cpu(s):  7.1%us,  1.0%sy,  0.0%ni, 91.8%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st</span><br><span class="line">Mem:   1004768k total,   925652k used,    79116k free,    86540k buffers</span><br><span class="line">Swap:  2031612k total,        8k used,  2031604k free,   382244k cached</span><br><span class="line">   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                     2511 root      20   0  198m  44m 8464 S  5.3  4.5   0:15.03 Xorg                       2917 pe        20   0  290m  14m 9756 S  2.0  1.5   0:05.45 gnome-terminal             2771 pe        20   0  404m  12m 9732 S  1.0  1.2   0:01.18 metacity                   1625 root      20   0  245m 8348 4812 S  0.7  0.8   0:04.55 vmtoolsd                   2791 pe        20   0  921m  21m  14m S  0.7  2.2   0:02.50 nautilus                   1694 root      20   0  505m 7884 4780 S  0.3  0.8   0:01.23 ManagementAgent             2755 pe        20   0  494m  11m 7916 S  0.3  1.2   0:00.66 gnome-settings-             2805 pe        20   0  298m  10m 8476 S  0.3  1.1   0:00.48 wnck-applet                 2827 pe        20   0  263m  16m  13m S  0.3  1.7   0:03.73 vmtoolsd                      1 root      20   0 19364 1540 1228 S  0.0  0.2   0:02.32 init                          2 root      20   0     0    0    0 S  0.0  0.0   0:00.00 kthreadd                      3 root      RT   0     0    0    0 S  0.0  0.0   0:00.00 migration/0               [root@localhost Desktop]# top -d 10 -p 1</span><br><span class="line">top - 15:08:31 up 58 min,  4 users,  load average: 0.10, 0.03, 0.01</span><br><span class="line">Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie</span><br><span class="line">Cpu(s):  1.1%us,  1.2%sy,  0.0%ni, 96.2%id,  1.5%wa,  0.0%hi,  0.0%si,  0.0%st</span><br><span class="line">Mem:   1004768k total,   929992k used,    74776k free,    86556k buffers</span><br><span class="line">Swap:  2031612k total,        8k used,  2031604k free,   383544k cached</span><br><span class="line">   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                        1 root      20   0 19364 1540 1228 S  0.0  0.2   0:02.32 init</span><br></pre></td></tr></table></figure><h4 id="系统资源查看"><a href="#系统资源查看" class="headerlink" title="系统资源查看"></a>系统资源查看</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">free -m# 查看内存使用情况(mb)</span><br><span class="line">free -b# 查看内存使用情况(byte)</span><br><span class="line">free -t# 查看内存使用情况(kb),显示total</span><br><span class="line">uptime# 查看系统启动时间、工作负载</span><br></pre></td></tr></table></figure><p>示例结果：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Desktop]# free -m</span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:           981        918         62          3         85        423</span><br><span class="line">-/+ buffers/cache:        410        571 </span><br><span class="line">Swap:         1983          0       1983 </span><br><span class="line">[root@localhost Desktop]# free -b</span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:    1028882432  962957312   65925120    4022272   89210880  443887616</span><br><span class="line">-/+ buffers/cache:  429858816  599023616 </span><br><span class="line">Swap:   2080370688       8192 2080362496 </span><br><span class="line">[root@localhost Desktop]# free -t</span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:       1004768     940388      64380       3928      87120     433484</span><br><span class="line">-/+ buffers/cache:     419784     584984 </span><br><span class="line">Swap:      2031612          8    2031604 </span><br><span class="line">Total:     3036380     940396    2095984</span><br><span class="line">[root@localhost Desktop]# uptime</span><br><span class="line"> 15:44:24 up  1:34,  4 users,  load average: 0.00, 0.00, 0.00</span><br></pre></td></tr></table></figure><h4 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">netstat # 监控网络</span><br><span class="line">netstat -a# 监控网络所有的连接、监听、Socket</span><br><span class="line">netstat -t# 监控网络中tcp网络数据包</span><br><span class="line">netstat -u# 监控网络中udp网络数据包</span><br><span class="line">netstat -tlnp# 查看系统上已有监听的网络连接与其PID</span><br></pre></td></tr></table></figure><p>示例如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Desktop]# netstat -tlnp</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name   </span><br><span class="line">tcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN      2272/sshd           </span><br><span class="line">tcp        0      0 127.0.0.1:631               0.0.0.0:*                   LISTEN      2108/cupsd          </span><br><span class="line">tcp        0      0 127.0.0.1:25                0.0.0.0:*                   LISTEN      2404/master         </span><br><span class="line">tcp        0      0 :::22                       :::*                        LISTEN      2272/sshd           </span><br><span class="line">tcp        0      0 ::1:631                     :::*                        LISTEN      2108/cupsd          </span><br><span class="line">tcp        0      0 ::1:25                      :::*                        LISTEN      2404/master</span><br></pre></td></tr></table></figure><h4 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vmstat # 检查CPU、内存等的信息</span><br><span class="line">vmstat -fs# 检查内存相关</span><br><span class="line">vmstat -d# 检查系统磁盘的读写状态</span><br><span class="line">vmstat 1 3# 每秒1次，记3次</span><br><span class="line">cat /proc/cpuinfo |grep "physical id"|sort|uniq|wc -l# 查看系统物理cpu数</span><br><span class="line">cat /proc/cpuinfo |grep "cpu cores"|wc -l# 查看系统cpu核数</span><br><span class="line"> cat /proc/cpuinfo |grep "processor"|wc -l# 查看系统cpu总数</span><br></pre></td></tr></table></figure><p>示例如下：</p><figure class="highlight plain"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat /proc/cpuinfo</span><br><span class="line">processor: 0</span><br><span class="line">vendor_id: GenuineIntel</span><br><span class="line">cpu family: 6</span><br><span class="line">model: 63</span><br><span class="line">model name: Intel(R) Xeon(R) CPU E5-2630 v3 @ 2.40GHz</span><br><span class="line">stepping: 2</span><br><span class="line">microcode: 0x36</span><br><span class="line">cpu MHz: 2400.048</span><br><span class="line">cache size: 20480 KB</span><br><span class="line">physical id: 0</span><br><span class="line">siblings: 1</span><br><span class="line">core id: 0</span><br><span class="line">cpu cores: 1</span><br><span class="line">apicid: 0</span><br><span class="line">initial apicid: 0</span><br><span class="line">fpu: yes</span><br><span class="line">fpu_exception: yes</span><br><span class="line">cpuid level: 13</span><br><span class="line">wp: yes</span><br><span class="line">flags: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes f16c rdrand hypervisor lahf_lm abm fsgsbase tsc_adjust bmi1 avx2 smep bmi2 erms invpcid</span><br><span class="line">bogomips: 4800.09</span><br><span class="line">clflush size: 64</span><br><span class="line">cache_alignment: 64</span><br><span class="line">address sizes: 46 bits physical, 48 bits virtual</span><br><span class="line">power management:</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# cat /proc/cpuinfo |grep &quot;physical id&quot;|sort|uniq|wc -l</span><br><span class="line">1</span><br><span class="line">[root@localhost ~]# cat /proc/cpuinfo |grep &quot;cpu cores&quot;|wc -l</span><br><span class="line">1</span><br><span class="line">[root@localhost ~]# cat /proc/cpuinfo |grep &quot;processor&quot;|wc -l</span><br><span class="line">1</span><br><span class="line">[root@localhost ~]# free -m</span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:          1783       1701         82          1          0        668</span><br><span class="line">-/+ buffers/cache:       1033        750</span><br><span class="line">Swap:         3727       1793       1934</span><br><span class="line">[root@localhost Desktop]# vmstat 1 3</span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st</span><br><span class="line"> 0  0      8  68660  88456 429480    0    0    70    36   67  139  1  1 97  1  0</span><br><span class="line"> 0  0      8  68660  88464 429476    0    0     0    16   57   88  0  0 99  1  0</span><br><span class="line"> 0  0      8  68660  88464 429480    0    0     0     0   49   99  0  0 100  0  0</span><br><span class="line">[root@localhost Desktop]# vmstat -d </span><br><span class="line">disk- ------------reads------------ ------------writes----------- -----IO------</span><br><span class="line">       total merged sectors      ms  total merged sectors      ms    cur    sec</span><br><span class="line">ram0       0      0       0       0      0      0       0       0      0      0</span><br><span class="line">ram1       0      0       0       0      0      0       0       0      0      0</span><br><span class="line">ram2       0      0       0       0      0      0       0       0      0      0</span><br><span class="line">ram3       0      0       0       0      0      0       0       0      0      0</span><br><span class="line">loop1      0      0       0       0      0      0       0       0      0      0</span><br><span class="line">loop2      0      0       0       0      0      0       0       0      0      0</span><br><span class="line">loop3      0      0       0       0      0      0       0       0      0      0</span><br><span class="line">loop4      0      0       0       0      0      0       0       0      0      0</span><br><span class="line">sr0        0      0       0       0      0      0       0       0      0      0</span><br><span class="line">disk- ------------reads------------ ------------writes----------- -----IO------</span><br><span class="line">       total merged sectors      ms  total merged sectors      ms    cur    sec</span><br><span class="line">sda    27022   8888  969508  131052   5571  56722  498324  895653      0    145</span><br></pre></td></tr></table></figure><h2 id="Tomcat系统配置"><a href="#Tomcat系统配置" class="headerlink" title="Tomcat系统配置"></a>Tomcat系统配置</h2><h3 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h3><ol><li>$CATALINA_HOME下bin\catalina.sh、或者setenv.sh，添加JAVA的堆内存</li><li>$CATALINA_HOME下conf\server.xml，提高连接数</li></ol><h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><ol><li>关闭tomcat进程，top查看free的数量，接着设置$CATALINA_HOME/bin/setenv.sh，分配80%的free数（例如2048MB，那么可以参考配置如下）</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">export</span> <span class="string">CATALINA_OPTS="$CATALINA_OPTS</span> <span class="bullet">-Xms1600m"</span></span><br><span class="line"><span class="string">export</span> <span class="string">CATALINA_OPTS="$CATALINA_OPTS</span> <span class="bullet">-Xmx1600m"</span></span><br><span class="line"><span class="string">export</span> <span class="string">CATALINA_OPTS="$CATALINA_OPTS</span> <span class="attr">-XX:MaxPermSize=256m"</span></span><br><span class="line"><span class="string">export</span> <span class="string">CATALINA_OPTS="$CATALINA_OPTS</span> <span class="attr">-XX:+PrintGCDetails</span> <span class="attr">-Xloggc:../logs/gc.log</span> <span class="attr">-XX:+PrintGCTimeStamps"</span></span><br></pre></td></tr></table></figure><ol start="2"><li>关于连接数的建议。当系统资源有限，甚至只有1个CPU，那么这里不建议用来做并发处理！假设，1000并发，那么1个CPU会很累，因为在切换线程的时间，会随着并发数的增加而狂增，时间都花在了切换线程上了，会导致很多线程响应超时！</li><li>需要考虑，程序是以IO上传下载为主，还是计算为主。如果IO为主，可以考虑增加连接数maxThread；如果以计算为主，那么就需要减少maxThread了，为了得到更多的资源处理计算，避免并发数太多，时间与资源都花在线程切换上，导致计算时间不足。</li></ol><p>可以参考vmstat -d来查看读写；vmstat -fs查看内存相关</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;Linux系统，参数读取命令&lt;/li&gt;
&lt;li&gt;tomcat优化的大致方向，流程&lt;/li&gt;
&lt;li&gt;实践-反馈-知识-反馈-实践&lt;/li&gt;
&lt;li&gt;笔记&lt;/li&gt;
&lt;li&gt;代码流程&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Linux系统配置优化建议：&lt;a href=&quot;htt
      
    
    </summary>
    
    
      <category term="配置" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/%E9%85%8D%E7%BD%AE/"/>
    
      <category term="Linux" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/Linux/"/>
    
      <category term="Tomcat" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/Tomcat/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/24/about/%E7%A7%AF%E7%B4%AF%E6%96%B9%E6%B3%95/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/24/about/积累方法/</id>
    <published>2018-11-24T15:30:49.669Z</published>
    <updated>2018-11-24T15:41:34.869Z</updated>
    
    <content type="html"><![CDATA[<ol><li>完成一个项目，就把流程写下来。</li><li>作为领导者，可以试着把自己的想学的技术分配出去</li><li>实时复盘，跟进新思想</li><li>今晚想熬夜了，想做完规定时间安排的任务</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;完成一个项目，就把流程写下来。&lt;/li&gt;
&lt;li&gt;作为领导者，可以试着把自己的想学的技术分配出去&lt;/li&gt;
&lt;li&gt;实时复盘，跟进新思想&lt;/li&gt;
&lt;li&gt;今晚想熬夜了，想做完规定时间安排的任务&lt;/li&gt;
&lt;/ol&gt;

      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>R语言的基础学习</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/22/2018-11-22-R%E8%AF%AD%E8%A8%80%E7%9A%84%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/22/2018-11-22-R语言的基础学习/</id>
    <published>2018-11-22T14:45:19.000Z</published>
    <updated>2018-11-24T12:52:15.364Z</updated>
    
    <content type="html"><![CDATA[<h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><h3 id="五种基本类型"><a href="#五种基本类型" class="headerlink" title="五种基本类型"></a>五种基本类型</h3><h4 id="字符"><a href="#字符" class="headerlink" title="字符"></a>字符</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="string">"233"</span></span><br></pre></td></tr></table></figure><h4 id="数值"><a href="#数值" class="headerlink" title="数值"></a>数值</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="number">3.14</span></span><br><span class="line">x &lt;- <span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="整数"><a href="#整数" class="headerlink" title="整数"></a>整数</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="number">3L</span></span><br></pre></td></tr></table></figure><h4 id="复数"><a href="#复数" class="headerlink" title="复数"></a>复数</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="number">1</span>+<span class="number">2i</span></span><br></pre></td></tr></table></figure><h4 id="逻辑"><a href="#逻辑" class="headerlink" title="逻辑"></a>逻辑</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="literal">TRUE</span></span><br></pre></td></tr></table></figure><h3 id="向量"><a href="#向量" class="headerlink" title="向量"></a>向量</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  Vector</span></span><br><span class="line"><span class="comment"># 三种表达方式</span></span><br><span class="line">x &lt;- vector(<span class="string">"character"</span>, length=<span class="number">10</span>)</span><br><span class="line">x1 &lt;- <span class="number">1</span>:<span class="number">4</span></span><br><span class="line">x2 &lt;- c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">x3 &lt;- c(<span class="literal">TRUE</span>,<span class="number">10</span>,<span class="string">"a"</span>)</span><br><span class="line">x4 &lt;- c(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>)</span><br><span class="line">x5 &lt;- c(<span class="literal">TRUE</span>,<span class="literal">FALSE</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 转换</span></span><br><span class="line">as.numeric(x2)</span><br><span class="line">as.logical(x5)</span><br><span class="line">as.character(x4)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重命名</span></span><br><span class="line">class(x1)</span><br><span class="line">names(x2) &lt;- c(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>)</span><br><span class="line">x2</span><br></pre></td></tr></table></figure><h3 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h3><p>矩阵=向量+纬度</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># matrix</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建方法1</span></span><br><span class="line">x &lt;- matrix(<span class="number">1</span>:<span class="number">6</span>, nrow = <span class="number">3</span>, ncol = <span class="number">2</span>)</span><br><span class="line"><span class="comment"># 创建方法2</span></span><br><span class="line">y &lt;- <span class="number">1</span>:<span class="number">6</span></span><br><span class="line">dim(y) &lt;- c(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 属性与纬度的查看</span></span><br><span class="line">dim(x)</span><br><span class="line">attributes(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 矩阵扩展</span></span><br><span class="line">y2 &lt;- matrix(<span class="number">1</span>:<span class="number">6</span>, nrow = <span class="number">2</span>, ncol = <span class="number">3</span>)</span><br><span class="line">rbind(y,y2)</span><br><span class="line">cbind(y,y2)</span><br><span class="line">y</span><br></pre></td></tr></table></figure><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>数组 = 矩阵+n纬度</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数组</span></span><br><span class="line"></span><br><span class="line">x &lt;- array(<span class="number">1</span>:<span class="number">24</span>, dim = c(<span class="number">4</span>,<span class="number">6</span>))</span><br><span class="line">x</span><br><span class="line"></span><br><span class="line">x2 &lt;- array(<span class="number">1</span>:<span class="number">24</span>, dim = c(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">x2</span><br></pre></td></tr></table></figure><h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列表</span></span><br><span class="line"><span class="comment"># 可以添加不同类型的变量</span></span><br><span class="line">listvalue &lt;- list(<span class="string">"a"</span>, <span class="number">2</span>, <span class="number">10L</span>, <span class="number">1</span>+<span class="number">2i</span>, <span class="literal">TRUE</span>)</span><br><span class="line">listvalue</span><br><span class="line"></span><br><span class="line">listvalue2 &lt;- list(c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>), c(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>))</span><br><span class="line">listvalue2</span><br><span class="line"></span><br><span class="line">x &lt;- matrix(<span class="number">1</span>:<span class="number">6</span>, nrow = <span class="number">2</span>, ncol = <span class="number">3</span>)</span><br><span class="line">dimnames(x) &lt;- list(c(<span class="string">"a"</span>,<span class="string">"b"</span>), c(<span class="string">"c"</span>,<span class="string">"d"</span>,<span class="string">"e"</span>))</span><br><span class="line">x</span><br></pre></td></tr></table></figure><h3 id="因子"><a href="#因子" class="headerlink" title="因子"></a>因子</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 因子</span></span><br><span class="line"><span class="comment"># 整数向量+标签</span></span><br><span class="line"></span><br><span class="line">x &lt;- factor(c(<span class="string">"female"</span>,<span class="string">"female"</span>,<span class="string">"male"</span>,<span class="string">"female"</span>,<span class="string">"male"</span>))</span><br><span class="line">x</span><br><span class="line">y &lt;- factor(c(<span class="string">"female"</span>,<span class="string">"female"</span>,<span class="string">"male"</span>,<span class="string">"female"</span>,<span class="string">"male"</span>),levels = c(<span class="string">"male"</span>, <span class="string">'female'</span>))</span><br><span class="line">y</span><br><span class="line"></span><br><span class="line">table(x)</span><br><span class="line">table(y)</span><br><span class="line"></span><br><span class="line">unclass(x)</span><br><span class="line">class(x)</span><br><span class="line">class(unclass(x))</span><br></pre></td></tr></table></figure><h3 id="缺失值"><a href="#缺失值" class="headerlink" title="缺失值"></a>缺失值</h3><p>NA</p><p>NaN</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 缺失值</span></span><br><span class="line"></span><br><span class="line">x &lt;- c(<span class="number">1</span>, <span class="literal">NA</span>, <span class="number">2</span>, <span class="literal">NA</span>, <span class="number">3</span>)</span><br><span class="line">is.na(x)</span><br><span class="line">is.nan(x)</span><br><span class="line"></span><br><span class="line">y &lt;- c(<span class="number">1</span>, <span class="literal">NaN</span>, <span class="number">2</span>, <span class="literal">NaN</span>, <span class="number">3</span>)</span><br><span class="line">is.na(y)</span><br><span class="line">is.nan(y)</span><br></pre></td></tr></table></figure><h3 id="数据框"><a href="#数据框" class="headerlink" title="数据框"></a>数据框</h3><p>存储表格数据，视为各元素长度相同的列表</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据框</span></span><br><span class="line"></span><br><span class="line">df &lt;- data.frame(id = c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>), name = c(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>), gender=c(<span class="literal">TRUE</span>, <span class="literal">TRUE</span>, <span class="literal">FALSE</span>, <span class="literal">FALSE</span>))</span><br><span class="line">df</span><br><span class="line"></span><br><span class="line">nrow(df)</span><br><span class="line">ncol(df)</span><br><span class="line"></span><br><span class="line">df2 &lt;- data.frame(id = c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>), name = c(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>), score=c(<span class="number">80</span>, <span class="number">90</span>, <span class="number">100</span>, <span class="number">60</span>))</span><br><span class="line">df2</span><br><span class="line">data.matrix(df2)</span><br></pre></td></tr></table></figure><h3 id="日期与时间"><a href="#日期与时间" class="headerlink" title="日期与时间"></a>日期与时间</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 日期与时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># character</span></span><br><span class="line">x &lt;- date()</span><br><span class="line">x</span><br><span class="line">class(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Date</span></span><br><span class="line">x2 &lt;- Sys.Date()</span><br><span class="line">x2</span><br><span class="line">class(x2)</span><br><span class="line"></span><br><span class="line">x3 &lt;- as.Date(<span class="string">"2018-11-23"</span>)</span><br><span class="line">x3</span><br><span class="line">class(x3)</span><br><span class="line"></span><br><span class="line">weekdays(x3)</span><br><span class="line">months(x3)</span><br><span class="line">quarters(x3)</span><br><span class="line"></span><br><span class="line">julian(x3)</span><br><span class="line"></span><br><span class="line">x4 &lt;- as.Date(<span class="string">"2018-04-25"</span>)</span><br><span class="line">x3-x4</span><br><span class="line">as.numeric(x3-x4)</span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------</span></span><br><span class="line">x &lt;- Sys.time()</span><br><span class="line">x</span><br><span class="line">class(x)</span><br><span class="line">p &lt;- as.POSIXlt(x)</span><br><span class="line">p</span><br><span class="line">class(p)</span><br><span class="line"><span class="comment"># 获取p下的属性名称</span></span><br><span class="line">names(unclass(p))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取p下对应属性的值</span></span><br><span class="line">p$sec</span><br></pre></td></tr></table></figure><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><div class="article-img"><p><img src="..\uploads\1542977904779.png" alt="1542977904779"></p></div><h2 id="构建子集"><a href="#构建子集" class="headerlink" title="构建子集"></a>构建子集</h2><h3 id="获取预处理数据"><a href="#获取预处理数据" class="headerlink" title="获取预处理数据"></a>获取预处理数据</h3><ol><li>原始数据，经过预处理后的数据</li><li>[]：提取一个或多个类型相同的元素<br>[[]]：从列表或数据框中提取元素<br>$：按名字从列表或数据框中提取元素</li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建子集</span></span><br><span class="line"></span><br><span class="line">x &lt;- <span class="number">1</span>:<span class="number">10</span></span><br><span class="line">x[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取大于5的数据</span></span><br><span class="line">x[<span class="number">6</span>:<span class="number">10</span>]</span><br><span class="line">x&gt;<span class="number">5</span></span><br><span class="line">x[x&gt;<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取大于5且小于7的数据</span></span><br><span class="line">x[x&gt;<span class="number">5</span> &amp; x&lt;<span class="number">7</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取大于5，与小于3的数据</span></span><br><span class="line">x[x&gt;<span class="number">5</span> | x&lt;<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">y &lt;- <span class="number">1</span>:<span class="number">4</span></span><br><span class="line">names(y) &lt;- c(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>)</span><br><span class="line">y</span><br><span class="line">y[<span class="number">1</span>]</span><br><span class="line">y[<span class="string">"a"</span>]</span><br></pre></td></tr></table></figure><h3 id="构建矩阵子集"><a href="#构建矩阵子集" class="headerlink" title="构建矩阵子集"></a>构建矩阵子集</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建矩阵子集</span></span><br><span class="line"></span><br><span class="line">x &lt;- matrix(<span class="number">1</span>:<span class="number">6</span>, nrow = <span class="number">3</span>, ncol = <span class="number">2</span>)</span><br><span class="line">x</span><br><span class="line"></span><br><span class="line">x[<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">x[<span class="number">1</span>,]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第1、3行的第2列</span></span><br><span class="line">x[c(<span class="number">1</span>,<span class="number">3</span>), <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">class(x[<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"><span class="comment"># 只显示行</span></span><br><span class="line">x[<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"><span class="comment"># 将行和列都显示出来</span></span><br><span class="line">x[<span class="number">1</span>,<span class="number">2</span>, drop=<span class="literal">FALSE</span>]</span><br></pre></td></tr></table></figure><h3 id="构建数据框的子集"><a href="#构建数据框的子集" class="headerlink" title="构建数据框的子集"></a>构建数据框的子集</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建数据框的子集</span></span><br><span class="line">x &lt;- data.frame(v1=<span class="number">1</span>:<span class="number">5</span>, v2=<span class="number">6</span>:<span class="number">10</span>, v3=<span class="number">11</span>:<span class="number">15</span>)</span><br><span class="line">x</span><br><span class="line"></span><br><span class="line">x$v1</span><br><span class="line"></span><br><span class="line">x$v1[c(<span class="number">1</span>,<span class="number">3</span>)]</span><br><span class="line"></span><br><span class="line">x[,<span class="number">2</span>]</span><br><span class="line">x[,<span class="string">"v2"</span>]</span><br><span class="line">x[<span class="number">1</span>,<span class="string">"v2"</span>]</span><br><span class="line"></span><br><span class="line">x[(x$v1&lt;<span class="number">4</span> &amp; x$v2&gt;<span class="number">7</span>),]</span><br><span class="line"></span><br><span class="line">x$v1&lt;<span class="number">4</span></span><br><span class="line">which(x$v1&lt;<span class="number">4</span>)</span><br><span class="line">x[x$v1&lt;<span class="number">4</span>,]</span><br><span class="line">x[which(x$v1&lt;<span class="number">4</span>),]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2</span></span><br><span class="line">subset(x, x$v1&gt;<span class="number">3</span>)</span><br></pre></td></tr></table></figure><h3 id="构建列表的子集"><a href="#构建列表的子集" class="headerlink" title="构建列表的子集"></a>构建列表的子集</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建矩列表子集</span></span><br><span class="line"></span><br><span class="line">x &lt;- list(id=<span class="number">1</span>:<span class="number">4</span>, height=<span class="number">170</span>, gender=<span class="string">"male"</span>)</span><br><span class="line"></span><br><span class="line">x[<span class="number">1</span>]</span><br><span class="line">x[<span class="string">"id"</span>]</span><br><span class="line"></span><br><span class="line">x[[<span class="number">1</span>]]</span><br><span class="line">x[[<span class="string">"id"</span>]]</span><br><span class="line">x$id</span><br><span class="line"></span><br><span class="line">x[c(<span class="number">1</span>,<span class="number">3</span>)]</span><br><span class="line"></span><br><span class="line">y &lt;- list(a = list(<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>), b=c(<span class="string">"Monday"</span>, <span class="string">"Tuesday"</span>))</span><br><span class="line">y</span><br><span class="line">y[[<span class="number">1</span>]]</span><br><span class="line"><span class="comment"># 获取第一个列表中含有列表的元素</span></span><br><span class="line">y[[<span class="number">1</span>]][<span class="number">2</span>]</span><br><span class="line"><span class="comment"># 获取第一个列表中含有列表的对应值</span></span><br><span class="line">y[[<span class="number">1</span>]][[<span class="number">2</span>]]</span><br><span class="line"></span><br><span class="line">y[[c(<span class="number">1</span>,<span class="number">3</span>)]]</span><br><span class="line">y[[c(<span class="number">2</span>,<span class="number">2</span>)]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表的不完全匹配</span></span><br><span class="line">z &lt;- list(abcdefg=<span class="number">1</span>:<span class="number">10</span>, abcd=<span class="number">1</span>:<span class="number">4</span>)</span><br><span class="line">z$abcdefg</span><br><span class="line">z$abcde</span><br><span class="line"></span><br><span class="line">z[[<span class="string">"abcde"</span>]]</span><br><span class="line">z[[<span class="string">"abcde"</span>, exact = <span class="literal">FALSE</span>]]</span><br></pre></td></tr></table></figure><h3 id="处理缺失值"><a href="#处理缺失值" class="headerlink" title="处理缺失值"></a>处理缺失值</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 处理缺失值</span></span><br><span class="line"></span><br><span class="line">x &lt;- c(<span class="number">1</span>, <span class="literal">NA</span>, <span class="number">2</span>, <span class="literal">NA</span>, <span class="number">3</span>)</span><br><span class="line">is.na(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取不是缺失值的值</span></span><br><span class="line">x[!is.na(x)]</span><br><span class="line"></span><br><span class="line">y &lt;- c(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="literal">NA</span>, <span class="string">"c"</span>, <span class="literal">NA</span>)</span><br><span class="line">z &lt;- complete.cases(x,y)</span><br><span class="line">z</span><br><span class="line">x[z]</span><br><span class="line">y[z]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据集</span></span><br><span class="line"><span class="keyword">library</span>(datasets)</span><br><span class="line">head(airquality)</span><br><span class="line">g &lt;- complete.cases(airquality)</span><br><span class="line">g</span><br><span class="line"><span class="comment"># 获取没有缺失值的前1-10行数据</span></span><br><span class="line">airquality[g,][<span class="number">1</span>:<span class="number">10</span>,]</span><br></pre></td></tr></table></figure><h3 id="向量化操作"><a href="#向量化操作" class="headerlink" title="向量化操作"></a>向量化操作</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 向量化操作</span></span><br><span class="line"></span><br><span class="line">x &lt;- <span class="number">1</span>:<span class="number">5</span></span><br><span class="line">y &lt;- <span class="number">6</span>:<span class="number">10</span></span><br><span class="line"></span><br><span class="line">z &lt;- x+y</span><br><span class="line">z</span><br><span class="line">x*y</span><br><span class="line">y/x</span><br><span class="line"></span><br><span class="line">x &lt;- matrix(<span class="number">1</span>:<span class="number">4</span>, nrow=<span class="number">2</span>, ncol=<span class="number">2</span>)</span><br><span class="line">y &lt;- matrix(rep(<span class="number">2</span>,<span class="number">4</span>), nrow=<span class="number">2</span>, ncol=<span class="number">2</span>)</span><br><span class="line">x</span><br><span class="line">y</span><br><span class="line">x*y</span><br><span class="line">y/x</span><br><span class="line"></span><br><span class="line"><span class="comment"># 矩阵乘法</span></span><br><span class="line">x %*% y</span><br></pre></td></tr></table></figure><h3 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h3><div class="article-img"><p><img src="..\uploads\1542981534131.png" alt="1542981534131"></p></div><h2 id="R语言函数"><a href="#R语言函数" class="headerlink" title="R语言函数"></a>R语言函数</h2><h3 id="lapply"><a href="#lapply" class="headerlink" title="lapply"></a>lapply</h3><p>lapply<br>-可以循环处理列表中的每一个元素<br>-lapply（参数）：lapply（列表，函数/函数名，其他参数）<br>-总是返回一个列表<br>-sapply：简化结果<br>·结果列表元素长度均为1，返回向量<br>·结果列表元素长度相同且大于1，返回矩阵</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lapply函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取函数参数值</span></span><br><span class="line">str(lapply)</span><br><span class="line"></span><br><span class="line">x &lt;- list(a=<span class="number">1</span>:<span class="number">10</span>, b=c(<span class="number">11</span>,<span class="number">21</span>,<span class="number">31</span>,<span class="number">41</span>,<span class="number">51</span>))</span><br><span class="line"><span class="comment"># 求列表中的平均值</span></span><br><span class="line">lapply(x, mean)</span><br><span class="line"></span><br><span class="line">x &lt;- <span class="number">1</span>:<span class="number">4</span></span><br><span class="line">lapply(x,runif)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 依次循环获取</span></span><br><span class="line">x &lt;- list(a = matrix(<span class="number">1</span>:<span class="number">6</span>, <span class="number">2</span>,<span class="number">3</span>), b = matrix(<span class="number">4</span>:<span class="number">7</span>,<span class="number">2</span>,<span class="number">2</span>))</span><br><span class="line">lapply(x, <span class="keyword">function</span>(m) m[<span class="number">1</span>,])</span><br><span class="line"></span><br><span class="line">x &lt;- list(a=<span class="number">1</span>:<span class="number">10</span>, b=c(<span class="number">11</span>,<span class="number">21</span>,<span class="number">31</span>,<span class="number">41</span>,<span class="number">51</span>))</span><br><span class="line"><span class="comment"># 求列表中的平均值</span></span><br><span class="line">lapply(x, mean)</span><br><span class="line"><span class="comment"># 简化理解</span></span><br><span class="line">sapply(x, mean)</span><br></pre></td></tr></table></figure><h3 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h3><p>-沿着数组的某一维度处理数据<br>·例如：将函数用于矩阵的行或列<br>·虽然与for/while循环的效率相似，但是只用一句话就可以完成<br>-apply（参数）：apply（数组，维度，函数/函数名）</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># apply函数</span></span><br><span class="line"></span><br><span class="line">x &lt;- matrix(<span class="number">1</span>:<span class="number">16</span>, <span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line">x</span><br><span class="line"><span class="comment"># 行</span></span><br><span class="line">apply(x, <span class="number">1</span>, mean)</span><br><span class="line">rowMeans(x)</span><br><span class="line">apply(x, <span class="number">1</span>, sum)</span><br><span class="line">rowSums(x)</span><br><span class="line"><span class="comment"># 列</span></span><br><span class="line">apply(x, <span class="number">2</span>, mean)</span><br><span class="line">colMeans(x)</span><br><span class="line">apply(x, <span class="number">2</span>, sum)</span><br><span class="line">colSums(x)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">x&lt;-matrix(rnorm(<span class="number">100</span>),<span class="number">10</span>,<span class="number">10</span>)</span><br><span class="line">x&lt;-matrix(<span class="number">1</span>:<span class="number">8</span>,<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line">apply(x,<span class="number">1</span>,quantile,probs=c(<span class="number">0.25</span>,<span class="number">0.75</span>))</span><br><span class="line"></span><br><span class="line">x&lt;-array(rnorm(<span class="number">2</span>*<span class="number">3</span>*<span class="number">4</span>), c(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">apply(x,c(<span class="number">1</span>,<span class="number">2</span>),mean)</span><br><span class="line">apply(x,c(<span class="number">1</span>,<span class="number">3</span>),mean)</span><br><span class="line">apply(x,c(<span class="number">2</span>,<span class="number">3</span>),mean)</span><br></pre></td></tr></table></figure><h3 id="mapply"><a href="#mapply" class="headerlink" title="mapply"></a>mapply</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mapply</span></span><br><span class="line"></span><br><span class="line">list(rep(<span class="number">1</span>,<span class="number">4</span>),rep(<span class="number">2</span>,<span class="number">3</span>),rep(<span class="number">3</span>,<span class="number">2</span>),rep(<span class="number">4</span>,<span class="number">1</span>))</span><br><span class="line">mapply(rep, <span class="number">1</span>:<span class="number">4</span>, <span class="number">4</span>:<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">s &lt;- <span class="keyword">function</span>(n ,mean, std)&#123;</span><br><span class="line">  rnorm(n ,mean, std)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">s(<span class="number">4</span>, <span class="number">0</span> ,<span class="number">1</span>)</span><br><span class="line">mapply(s, <span class="number">1</span>:<span class="number">5</span>, <span class="number">5</span>:<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">list(s(<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>), s(<span class="number">2</span>,<span class="number">4</span>,<span class="number">2</span>), s(<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>), s(<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>), s(<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure><h3 id="tapply"><a href="#tapply" class="headerlink" title="tapply"></a>tapply</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tapply</span></span><br><span class="line"></span><br><span class="line">x&lt;-c(rnorm(<span class="number">5</span>),runif(<span class="number">5</span>),rnorm(<span class="number">5</span>,<span class="number">1</span>))</span><br><span class="line">f&lt;-gl(<span class="number">3</span>,<span class="number">5</span>)</span><br><span class="line">tapply(x,f,mean)</span><br><span class="line">tapply(x,f,mean,simplify=<span class="literal">FALSE</span>)</span><br></pre></td></tr></table></figure><h3 id="split"><a href="#split" class="headerlink" title="split"></a>split</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><div class="article-img"><p><img src="..\uploads\1543022766048.png" alt="1543022766048"></p></div><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>视频：<a href="https://www.imooc.com/learn/546" target="_blank" rel="noopener">https://www.imooc.com/learn/546</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;数据结构&quot;&gt;&lt;a href=&quot;#数据结构&quot; class=&quot;headerlink&quot; title=&quot;数据结构&quot;&gt;&lt;/a&gt;数据结构&lt;/h2&gt;&lt;h3 id=&quot;五种基本类型&quot;&gt;&lt;a href=&quot;#五种基本类型&quot; class=&quot;headerlink&quot; title=&quot;五种基本类
      
    
    </summary>
    
    
      <category term="R语言" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/R%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>实践路线（微服务预习）</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/16/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%A2%84%E4%B9%A0/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/16/微服务预习/</id>
    <published>2018-11-15T16:08:08.000Z</published>
    <updated>2018-11-15T16:11:31.038Z</updated>
    
    <content type="html"><![CDATA[<h2 id="实践路线（github）"><a href="#实践路线（github）" class="headerlink" title="实践路线（github）"></a>实践路线（github）</h2><p>github管理项目，呈现一个项目学习路线的面貌。打造个人品牌</p><ul><li><p>[x] 【宿舍】使用SpringBoot快速构建RESTful API应用</p></li><li><p>[ ] 【公司】业务平台Spring改为SpringBoot项目</p></li><li><p>[ ] 【公司】SpringBoot的单元测试</p></li><li><p>[x] 【宿舍】SpringBoot的热部署等配置</p></li><li><p>[ ] 【宿舍】SpringCloud的初体验</p></li><li><p>[ ] 【公司】建立activeMQ，并与redis做结合</p></li><li><p>[ ] 【公司】将SpringBoot项目拆分为微服务</p></li><li><p>[ ] 【宿舍】实现将微服务注册到EurkaServer上</p></li><li><p>[ ] 【宿舍】SpringBoot容错处理搭建Hystrix</p></li><li><p>[ ] 【宿舍】使用Ribbin实现客户端负载均衡</p></li><li><p>[ ] 【宿舍】实现Hystrix Dashboard可视化监控数据</p></li><li><p>[ ] 【公司】Elasticsearch日志存储系统搭建</p></li><li><p>[ ] 【公司】Logstash日志收集系统搭建</p></li><li><p>[ ] 【公司】Kiaabna日志查询系统搭建</p></li><li><p>[ ] 【宿舍】ELK日志中心搭建</p></li><li><p>[ ] 【宿舍】自主搭建系统监控中心</p></li><li><p>[ ] 【宿舍】Dubbo的初体验</p></li><li><p>[ ] 【宿舍】jenkins的持续集成搭建</p></li><li><p>[ ] 【宿舍】Docker镜像下载与构建</p></li><li><p>[ ] 【宿舍】使用Docker Registry打造私有镜像仓库</p></li><li><p>[ ] 【宿舍】使用Spring Cloud Bus实现配置的自动刷新</p></li></ul><h3 id="方式"><a href="#方式" class="headerlink" title="方式"></a>方式</h3><ol><li>3天制实现以上功能的每一个点</li><li>第一天，学习理论知识，并找如何搭建（前提：在公司也需要储备学习资源）</li><li>第二天，实践为主，完成以上的搭建任务（前提：在公司查看其他人怎么实现）</li><li>第三天，完善实践，标注学习日期，课本回顾（前提：完成实践内容）</li></ol><h2 id="传统单体架构及其面临的挑战"><a href="#传统单体架构及其面临的挑战" class="headerlink" title="传统单体架构及其面临的挑战"></a><strong>传统单体架构及其面临的挑战</strong></h2><h3 id="传统单体架构分析"><a href="#传统单体架构分析" class="headerlink" title="传统单体架构分析"></a>传统单体架构分析</h3><p>​    一个典型的单体应用就是将所有的业务场景的表示层、业务逻辑层和数据访问层放在一个工程中，最终经过编译、打包，部署在一台服务器上。例如典型的J2EE工程，它是将表示层的JSP、业务逻辑层的Service、Controller和数据访问层的Dao，打成war包，部署在Tomcat、Jetty或者其他Servlet容器中运行。</p><p>​    在一个小型应用的初始阶段，访问量较小，应用只需要一台服务器就能够部署所有的资源，例如将应用程序、数据库、文件资源等部署在同一台服务器上。最典型的就是LAMP系统，即服务器采用Linux系统，开发应用程序的语言为PHP，部署在Apache服务器上，采用MySQL数据库。在应用程序的初始阶段，采用这种架构的性价比是非常高的，开发速度快，开发成本低，只需要一台廉价的服务器。</p><h3 id="单体架构的优势"><a href="#单体架构的优势" class="headerlink" title="单体架构的优势"></a>单体架构的优势</h3><ol><li>开发特别快</li><li>开发初期，成本低，性价比高</li><li>根据MVC等标准风格，功能层次拆分清楚 </li><li>部署简单，直接一个war包就能解决</li><li>技术单一，项目不需要复杂的技术栈，往往一套就可以开发完</li></ol><h3 id="单体架构局限性与面临的挑战"><a href="#单体架构局限性与面临的挑战" class="headerlink" title="单体架构局限性与面临的挑战"></a>单体架构局限性与面临的挑战</h3><ol><li><p>复杂性</p><p>​    整个项目包含的模块非常多，模块的边界模糊，依赖关系不清晰，代码质量参差不齐……整个项目非常复杂。每次修改代码都心惊胆战，甚至添加一个简单的功能，或者修改一个BUG都会造成隐含的缺陷。</p></li><li><p>开发效率</p><p>​    单体式架构下的组织通常来说技术选型非常单一，团队技术能力相对单薄，团队的吸引力一般。</p><p>​    整个系统一个团队。如果系统变得庞大，成员就需要学习大量的代码和领域知识，团队内的沟通和协作也变得低效。</p></li><li><p>稳定性</p><p>​    某个功能模块出现bug，或者某个库出现问题，都可能导致整个进程宕机，影响整体的应用。</p></li><li><p>部署与运维成本</p><p>​    传统的单体架构，一长串的本地接口或者方法调用，冗长而臃肿，往往是一个人负责整个的开发和维护。随着业务的发展和需求的变化，本地代码的不断迭代和变更，会导致只有原来的开发者才能理解接口的逻辑顺序，调用关系和功能需求，一旦开发者离职，那么功能模块运维就会非常困难。</p><p>​    测试、部署成本高，系统中任何功能的改变，都需要整个系统重新测试并部署。</p></li><li><p>新功能交付</p><p>​    直接本地API接口调用，不存在业务的拆分和相互调用，不需要依赖其他功能模块，这样子，开发只需要对自己开发的模块负责。这会导致代码重复率变高，功能变更或者新需求的加入会变得困难。</p></li><li><p>扩展能力</p><p>​    单体应用作为一个强耦合的整体，无法根据业务功能伸缩。只能再整体的系统进行扩展，而无法针对某一个功能模块按照需求扩展，比如计算密集型服务，IO密集型服务。</p><p>​    单体应用往往使用统一的技术平台或方案解决所有问题，团队的每个成员都必须使用相同的开发语言和架构，想要引入新的框架或技术平台非常困难。</p></li></ol><h3 id="如何解决上述问题？"><a href="#如何解决上述问题？" class="headerlink" title="如何解决上述问题？"></a>如何解决上述问题？</h3><ol><li><p>拆分</p><p>​    将应用进行水平和垂直的拆分，可以按照功能、技术群进行拆分（例如：商品中心、订单中心、审计）。</p></li><li><p>解耦</p><p>​    通过服务化和订阅、发布机制对应用调用关系解耦，支持服务的自动注册和发现</p></li><li><p>透明</p><p>​    通过服务注册中心管理服务的发布和消费、调用关系</p></li><li><p>独立</p><p>​    服务可以独立打包、发布、部署、启停、扩容和升级，核心服务独立集群部署</p></li><li><p>分层</p><p>​    梳理和抽取核心应用、公共应用，作为独立的服务下沉到核心和公共能力层，逐渐形成稳定的服务中心，使前端应用能更快速的响应多变的市场需求</p></li></ol><h3 id="结合某案例分析传统单体架构面临问题【案例】"><a href="#结合某案例分析传统单体架构面临问题【案例】" class="headerlink" title="结合某案例分析传统单体架构面临问题【案例】"></a>结合某案例分析传统单体架构面临问题【案例】</h3><h2 id="单体架构拆分"><a href="#单体架构拆分" class="headerlink" title="单体架构拆分"></a>单体架构拆分</h2><h3 id="服务水平拆分"><a href="#服务水平拆分" class="headerlink" title="服务水平拆分"></a>服务水平拆分</h3><p>​    按照数据的查询、存储、展示、采集的方向来进行拆分。</p><ol><li><p>数据模型能否彻底分开，决定了微服务的边界功能是否彻底划清。</p></li><li><p>实践过程中强烈推荐的原则是<strong>一个微服务对应一个库</strong></p></li><li><p>随着微服务规模壮大，可以针对性的做读写分离；如果单表数据庞大，可以分表来解决。</p></li></ol><h3 id="服务水平拆分面临问题"><a href="#服务水平拆分面临问题" class="headerlink" title="服务水平拆分面临问题"></a>服务水平拆分面临问题</h3><ol><li>对于无法修改的遗留系统，推荐采用绞杀者模式：在遗留系统外面增加新的功能做成微服务方式，而不是直接修改原有系统，逐步的实现对老系统替换</li><li>规范整个系统而非微服务的日志体系，采用标准的日志格式非常便于后续的日志聚合检索，便于整体的视角分析、监控、查看系统；</li><li>同时做两件不可控的事情（微服务改造、新技术的冲击）注定项目成功概率较低，千万避免自己重复发明轮子，尽量选择市面上成熟的开源技术框架进行支撑，比如Spring Boot、Spring Cloud、Netflix、WildFly Swarm、Docker、Kubernetes等框架；</li></ol><h3 id="服务垂直拆分"><a href="#服务垂直拆分" class="headerlink" title="服务垂直拆分"></a>服务垂直拆分</h3><p>​    按照展示层、应用层、领域层、基础设施层进行拆分。</p><h3 id="服务拆分之后各模块间通信与交互"><a href="#服务拆分之后各模块间通信与交互" class="headerlink" title="服务拆分之后各模块间通信与交互"></a>服务拆分之后各模块间通信与交互</h3><h3 id="服务的设计原则"><a href="#服务的设计原则" class="headerlink" title="服务的设计原则"></a>服务的设计原则</h3><ol><li><p>复用性</p></li><li><p>耦合性</p></li><li><p>服务编排</p></li><li><p>自治</p></li><li><p>无状态</p></li><li><p>自动发现</p></li></ol><h3 id="服务拆分后面临挑战"><a href="#服务拆分后面临挑战" class="headerlink" title="服务拆分后面临挑战"></a>服务拆分后面临挑战</h3><ol><li><p>调用性能</p><p>​    在服务化之前，业务通常都是本地API调用，本地方法调用性能损耗较小。服务化之后，服务提供者和消费者之间采用远程网络通信，增加了额外的性能损耗。</p></li><li><p>线性扩展</p><p>​    </p></li><li><p>服务监控</p></li><li><p>故障定位</p><p>​    在分布式环境下，如何快速有效的进行故障问题定界定位</p></li><li><p>日志搜索</p><p>​    在分布式环境下，如何方便的进行对服务调用日志做高效的检索</p></li><li><p>流控</p><p>​    服务化、分布式部署之后，有逻辑关联关系的多个数据库操作被打散成各自独立的服务实例上去，引入分布式环境下的事务一致性问题</p><ol><li>客户端需求和每个微服务暴露的细粒度API不匹配</li><li>微服务使用的RPC私有协议，不是浏览器友好或防火墙友好的</li><li>微服务难以重构。随着时间推移，我们可能想要更改系统划分成服务的方式。如果客户端与微服务直接通信，那么执行这类重构就非常困难了</li></ol></li></ol><h2 id="微服务架构综述"><a href="#微服务架构综述" class="headerlink" title="微服务架构综述"></a><strong>微服务架构综述</strong></h2><h3 id="什么是微服务？"><a href="#什么是微服务？" class="headerlink" title="什么是微服务？"></a>什么是微服务？</h3><p>​<br>​     简而言之，微服务架构风格的开发方法，是以开发一组小型服务的方式来开发一个独立的应用系统的。其中每个小型服务都运行在自己的进程中，并经常采用HTTP资源API轻量的机制来相互通信。</p><p>​    这些服务围绕业务功能进行构建，并能通过全自动的部署机制来进行独立部署。这些微服务可以使用不同的语言来编写，并且可以使用不同的数据存储技术。对这些微服务我们仅做最低限度的集中管理。    </p><p>​    每个微服务可独立运行在自己的进程里；</p><p>​    一系列独立运行的微服务共同构建起整个系统；</p><p>​    服务为独立的业务开发，一个微服务只关注某个特定的功能，如订单管理、用户管理等；</p><p>​    微服务之间通过一些轻量的通信机制进行通信，如REST API进行调用；</p><p>​    使用不同的语言与存储技术；</p><p>​    全自动的部署机制；    </p><h3 id="微服务架构"><a href="#微服务架构" class="headerlink" title="微服务架构"></a>微服务架构</h3><p>出处：<a href="https://www.jianshu.com/p/ae55e444c3a7" target="_blank" rel="noopener">微服务架构</a></p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\9005929-6919de42324fe107.webp" alt="img"></p></div><p>网关集群：数据的聚合、实现对接入客户端的身份认证、防报文重放与防数据篡改、功能调用的业务鉴权、响应数据的脱敏、流量与并发控制等</p><p>业务集群：一般情况下移动端访问和浏览器访问的网关需要隔离，防止业务耦合</p><p>Local Cache：由于客户端访问业务可能需要调用多个服务聚合，所以本地缓存有效的降低了服务调用的频次，同时也提示了访问速度。本地缓存一般使用自动过期方式，业务场景中允许有一定的数据延时。</p><p>服务层：原子服务层，实现基础的增删改查功能，如果需要依赖其他服务需要在Service层主动调用</p><p>Remote Cache：访问DB前置一层分布式缓存，减少DB交互次数，提升系统的TPS</p><p>DAL：数据访问层，如果单表数据量过大则需要通过DAL层做数据的分库分表处理。</p><p>MQ：消息队列用来解耦服务之间的依赖，异步调用可以通过MQ的方式来执行</p><p>数据库主从：服务化过程中毕竟的阶段，用来提升系统的TPS</p><h3 id="微服务架构优点"><a href="#微服务架构优点" class="headerlink" title="微服务架构优点"></a>微服务架构优点</h3><p>​    易于开发和维护。一个微服务只关注一个特定的业务功能，所以它的业务清晰、代码量较少。开发和维护单个微服务相对比较简单，整个应用是由若干个微服务构建而成，所以整个应用也会维持在可控状态；</p><p>​    单个微服务启动较快。单个微服务代码量较少，所以启动会比较快；<br>​    修改容易部署。单体应用只要有修改，就要重新部署整个应用，微服务解决了这样的问题。一般来说，对某个微服务进行修改，只需要重新部署这个服务即可；</p><p>​    技术栈不受限。在微服务中，我们可以结合项目业务及团队的特点，合理地选择技术栈；</p><p><a href="https://www.jianshu.com/p/ae55e444c3a7" target="_blank" rel="noopener">出处：微服务优势</a></p><p><strong>1、降低复杂度</strong></p><p>将原来偶合在一起的复杂业务拆分为单个服务，规避了原本复杂度无止境的积累。每一个微服务专注于单一功能，并通过定义良好的接口清晰表述服务边界。每个服务开发者只专注服务本身，通过使用缓存、DAL等各种技术手段来提升系统的性能，而对于消费方来说完全透明。</p><p><strong>2、可独立部署</strong></p><p>由于微服务具备独立的运行进程，所以每个微服务可以独立部署。当业务迭代时只需要发布相关服务的迭代即可，降低了测试的工作量同时也降低了服务发布的风险。</p><p><strong>3、容错</strong></p><p>在微服务架构下，当某一组件发生故障时，故障会被隔离在单个服务中。 通过限流、熔断等方式降低错误导致的危害，保障核心业务正常运行。</p><p><strong>4、扩展</strong></p><p>单块架构应用也可以实现横向扩展，就是将整个应用完整的复制到不同的节点。当应用的不同组件在扩展需求上存在差异时，微服务架构便体现出其灵活性，因为每个服务可以根据实际需求独立进行扩展。</p><h3 id="微服务架构面临的挑战有哪些？"><a href="#微服务架构面临的挑战有哪些？" class="headerlink" title="微服务架构面临的挑战有哪些？"></a>微服务架构面临的挑战有哪些？</h3><p>​    <img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\24015312f806d3b5ff5b6d45711f5df1" alt="img"></p><p>​    运维要求较高。更多的服务意味着更多的运维投入。在单体架构中只需要保证一个应用的正常运行；而在微服务中，需要保证几十甚至几百个服务的正常运行与协作，带来了巨大的挑战；</p><p>​    分布式固有的复杂性。使用微服务构建的是分布式系统。对于一个分布式系统，系统容错、网络延迟、分布式事务等都带来了巨大的挑战；<br>​    成本高。微服务之间通过接口进行通信。如果修改某个微服务的API，可能所有使用了该接口的微服务都需要做调整；</p><p>​    重复劳动。很多服务可能都会使用到相同的功能。而这个功能并没有达到分解为一个微服务的程度，这个时候，可能各个服务都会开发这一功能，导致代码重复。</p><h3 id="微服务生命周期与交付流程"><a href="#微服务生命周期与交付流程" class="headerlink" title="微服务生命周期与交付流程"></a><strong>微服务生命周期与交付流程</strong></h3><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\7c1bd0d58a7a1a356b905110bff67cd9" alt="img"></p></div><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\b5a87249002f4b0201f1f4ebf9ec71f1" alt="img"></p></div><h3 id="微服务管理规范"><a href="#微服务管理规范" class="headerlink" title="微服务管理规范"></a>微服务管理规范</h3><p>​    微服务带来的依赖管理问题，我们可以通过平台提供的API管理能力来解决。说到API管理，那首先就用提到服务契约。平台开发工具中提供了方便的服务发布能力，能够快速的将业务功能对外发布，生成服务的规格契约，当然也可以先设计服务契约，在根据契约来生成服务的默认实现代码。</p><p>​    这里强调一下，我们提到的服务契约是一个很重要的东西，他有点类似web service的wsdl描述，主要描述服务接口的输入输出规格标准和其他一些服务调用集成相关的规格内容。</p><h3 id="微服务框架对比"><a href="#微服务框架对比" class="headerlink" title="微服务框架对比"></a><strong>微服务框架对比</strong></h3><p>Spring Cloud与Dubbo</p><h4 id="性能对比"><a href="#性能对比" class="headerlink" title="性能对比"></a>性能对比</h4><p><a href="https://cloud.tencent.com/developer/article/1177574" target="_blank" rel="noopener">图片出处</a></p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\6jmlhrz2to.jpeg" alt="img"></p></div><p>​    Spring Cloud 抛弃了 Dubbo 的 RPC 通信，采用的是基于 HTTP 的 REST 方式。严格来说，这两种方式各有优劣。虽然从一定程度上来说，基于 HTTP 的 REST 方式牺牲了服务调用的性能，但也避免了上面提到的原生 RPC 带来的问题。而且 REST 相比 RPC 更为灵活，服务提供方和调用方的依赖只依靠一纸契约，不存在代码级别的强依赖，这在强调快速演化的微服务环境下，显得更加合适。</p><h4 id="服务对比"><a href="#服务对比" class="headerlink" title="服务对比"></a>服务对比</h4><p><a href="https://cloud.tencent.com/developer/article/1177574" target="_blank" rel="noopener">图片出处</a></p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\gy1tppfw1d.jpeg" alt="img"></p></div><p><strong>Dubbo 专注 RPC 和服务治理，Spring Cloud 则是一个微服务架构生态</strong></p><h4 id="组件对比"><a href="#组件对比" class="headerlink" title="组件对比"></a>组件对比</h4><p>出处：<a href="https://www.jianshu.com/p/ae55e444c3a7" target="_blank" rel="noopener">组件对比</a></p><p>Dubbo组件运行流程</p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\9005929-c7db3aef000f1927-1540943395067.webp" alt="img"></p></div><p>gateWay:前置网关，具体业务操作，gateWay通过dubbo提供的负载均衡机制自动完成</p><p>Service：原子服务，只提供该业务相关的原子服务</p><p>Zookeeper：原子服务注册到zk上</p><p>Spring Could组件运行流程</p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\9005929-5bf161de38a9a62d.webp" alt="img"></p></div><p>所有请求都统一通过 API 网关（Zuul）来访问内部服务。</p><p>网关接收到请求后，从注册中心（Eureka）获取可用服务。</p><p>由 Ribbon 进行均衡负载后，分发到后端的具体实例。</p><p>微服务之间通过 Feign 进行通信处理业务。</p><h4 id="服务依赖方式"><a href="#服务依赖方式" class="headerlink" title="服务依赖方式"></a>服务依赖方式</h4><p>出处：<a href="https://www.jianshu.com/p/ae55e444c3a7" target="_blank" rel="noopener">服务依赖方式</a></p><p>Dubbo：</p><p>​    因此需要为每个微服务定义了各自的interface接口，并通过持续集成发布到私有仓库中，调用方应用对微服务提供的抽象接口存在强依赖关系，开发、测试、集成环境都需要严格的管理版本依赖。</p><p>通过maven的install &amp; deploy命令把interface和Model层发布到仓库中，服务调用方只需要依赖interface和model层即可。在开发调试阶段只发布Snapshot版本。等到服务调试完成再发布Release版本，通过版本号来区分每次迭代的版本。通过xml配置方式即可方面接入dubbo，对程序无入侵。</p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\9005929-e1cd60672c7a3c21.webp" alt="img"></p></div><p>Spring Cloud：</p><p>​    服务提供方和服务消费方通过json方式交互，因此只需要定义好相关json字段即可，消费方和提供方无接口依赖。通过注解方式来实现服务配置，对于程序有一定入侵。</p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\9005929-e798a5a86e2da786.webp" alt="img"></p></div><p>对比：</p><p>​    Dubbo服务依赖略重，需要有完善的版本管理机制，但是程序入侵少。而Spring Cloud通过Json交互，省略了版本管理的问题，但是具体字段含义需要统一管理，自身Rest API方式交互，为跨平台调用奠定了基础。</p><h3 id="微服务架构及常用组件"><a href="#微服务架构及常用组件" class="headerlink" title="微服务架构及常用组件"></a><strong>微服务架构及常用组件</strong></h3><h2 id="微服务开发之Dubbo"><a href="#微服务开发之Dubbo" class="headerlink" title="微服务开发之Dubbo"></a><strong>微服务开发之Dubbo</strong></h2><h3 id="Dubbo介绍"><a href="#Dubbo介绍" class="headerlink" title="Dubbo介绍"></a>Dubbo介绍</h3><p>Dubbo 是一个分布式服务框架，是国内互联网公司开源做的比较不错的阿里开放的微服务化治理框架，致力于提供高性能和透明化的RPC远程服务调用方案，以及SOA服务治理方案。 其核心部分包含（官网）:</p><ul><li><p>远程通讯: 提供对多种基于长连接的NIO框架抽象封装，包括多种线程模型，序列化，以及“请求-响应”模式的信息交换方式；</p></li><li><p>集群容错: 提供基于接口方法的透明远程过程调用，包括多协议支持，以及软负载均衡，失败容错，地址路由，动态配置等集群支持；</p></li><li><p>自动发现: 基于注册中心目录服务，使服务消费方能动态的查找服务提供方，使地址透明，使服务提供方可以平滑增加或减少机器。</p></li></ul><h3 id="为什么选择Dubbo"><a href="#为什么选择Dubbo" class="headerlink" title="为什么选择Dubbo?"></a>为什么选择Dubbo?</h3><ul><li><p>Dubbo 支持 <strong>RPC 调用</strong>，服务之间的调用性能会很好。</p></li><li><p><strong>支持多种序列化协议</strong>，如 Hessian、HTTP、WebService。</p></li><li><p><strong>Dobbo Admin后台管理功能强大</strong>，提供了路由规则、动态配置、访问控制、权重调节、均衡负载等功能。</p></li><li><p>在国内影响力比较大，<strong>中文社区文档较为全面</strong>。</p></li><li><p>阿里最近<strong>重启维护</strong>。</p></li></ul><h3 id="Dubbo架构剖析"><a href="#Dubbo架构剖析" class="headerlink" title="Dubbo架构剖析"></a><strong>Dubbo架构剖析</strong></h3><p>出处：<a href="https://cloud.tencent.com/developer/article/1177574" target="_blank" rel="noopener">结构剖析</a></p><p>Dubbo 核心部件（如下图）:</p><p>Provider： 暴露服务的提供方，可以通过jar或者容器的方式启动服务</p><p>Consumer：调用远程服务的服务消费方。</p><p>Registry： 服务注册中心和发现中心。</p><p>Monitor： 统计服务和调用次数，调用时间监控中心。（dubbo的控制台页面中可以显示，目前只有一个简单版本）</p><p>Container：服务运行的容器。</p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\nxfywqs12h.jpeg" alt="img"></p></div><p>流程详解：</p><ul><li>0 服务容器负责启动，加载，运行服务提供者（Standalone 容器）。</li><li>1 服务提供者在启动时，向注册中心注册自己提供的服务（Zookeeper/Redis）。</li><li>2 服务消费者在启动时，向注册中心订阅自己所需的服务。</li><li>3 注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。</li><li>4 服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。</li><li>5 服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心（根据数据可以动态调整权重）。</li></ul><h3 id="Dubbo优缺点分析"><a href="#Dubbo优缺点分析" class="headerlink" title="Dubbo优缺点分析"></a><strong>Dubbo优缺点分析</strong></h3><p>出处：<a href="https://cloud.tencent.com/developer/article/1177574" target="_blank" rel="noopener">Dubbo 优缺点分析</a></p><ul><li><p><strong>Registry 严重依赖第三方组件</strong>（zookeeper 或者 redis），当这些组件出现问题时，服务调用很快就会中断。</p></li><li><p>Dubbo 只支持 RPC 调用。使得服务提供方（抽象接口）与调用方在代码上产生了<strong>强依赖</strong>，服务提供者需要不断将包含抽象接口的 jar 包打包出来供消费者使用。一旦打包出现问题，就会导致服务调用出错，并且以后发布部署会成很大问题（太强的依赖关系）。</p></li><li><p>另外，以后要兼容 .NET Core 服务，<strong>Dubbo RPC 本身不支持跨语言</strong>（可以用跨语言 RPC 框架解决，比如 Thrift、gRPC（重复封装了），或者自己再包一层 REST 服务，提供跨平台的服务调用实现，但相对麻烦很多）</p></li><li><p>Dubbo <strong>只是实现了服务治理</strong>，其他微服务框架并未包含，如果需要使用，需要结合第三方框架实现（比如分布式配置用淘宝的 Diamond、服务跟踪用京东的 Hydra，但使用相对麻烦些），开发成本较高，且风险较大。</p></li><li><p>社区更新不及时（虽然最近在疯狂更新），但也难免阿里以后又不更新了，就尴尬了。</p></li><li><p>主要是国内公司使用，但阿里内部使用 HSF，相对于 Spring Cloud，企业应用会差一些。</p></li></ul><h3 id="Dubbo调用地址与负载均衡"><a href="#Dubbo调用地址与负载均衡" class="headerlink" title="Dubbo调用地址与负载均衡"></a><strong>Dubbo调用地址与负载均衡</strong></h3><p>出处：<a href="https://blog.csdn.net/li_xiao_dai/article/details/80077181" target="_blank" rel="noopener">Dubbo的URL参数</a></p><div class="article-bounded"><div class="article-table"><table><thead><tr><th>name</th><th>desc</th></tr></thead><tbody><tr><td>mock</td><td>配置此method在客户端调用时是直接调用，还是强制使用mock，还是调用失败后使用mock</td></tr><tr><td>mock</td><td>配置此method在客户端调用时是直接调用，还是强制使用mock，还是调用失败后使用mock</td></tr><tr><td>retries</td><td>调用Provider失败后的重试其他Provider的次数</td></tr><tr><td>forks</td><td>并发调用时Provider的个数</td></tr><tr><td>timeout</td><td>调用的Provider的超时时间，毫秒</td></tr><tr><td>merger</td><td>MergeableClusterInvoker调用时，指定的merge方式或者merge方法</td></tr><tr><td>reference.filter</td><td>用于Consumer端控制、指定过滤器名称</td></tr><tr><td>service.filter</td><td>用于Provider端控制、指定过滤器名称</td></tr><tr><td>accesslog</td><td>用于控制AccessLogFilter是否加载进FilterChain中</td></tr><tr><td>actives</td><td>用于控制ActiveLimitFilter是否加载进FilterChain中</td></tr><tr><td>cache</td><td>用于控制CacheFilter是否加载进FilterChain中</td></tr><tr><td>deprecated</td><td>用于控制DeprecatedFilter是否加载进FilterChain中</td></tr><tr><td>executes</td><td>用于控制ExecuteLimitFilter是否加载进FilterChain中，以及指定信号量初始值单个Provider最大可并发数</td></tr><tr><td>generic</td><td>用于控制GenericImplFilter是否加载进FilterChain中</td></tr><tr><td>token</td><td>用于控制TokenFilter是否加载进FilterChain中</td></tr><tr><td>tps</td><td>用于控制TpsLimitFilter是否加载进FilterChain中</td></tr><tr><td>validation</td><td>用于控制ValidationFilter是否加载进FilterChain中</td></tr><tr><td>invoker.listener</td><td>用于控制invoker过程中的监听器名称</td></tr><tr><td>exporter.listener</td><td>用于控制export过程中的监听器名称</td></tr><tr><td>async</td><td>Consumer端控制本地调用是否是异步调用</td></tr><tr><td>return</td><td>Consumer端控制本地调用是否不需要调用返回值</td></tr><tr><td>connections</td><td>用于控制Consumer在调用多个Provider时，自身的connneticon是否共享或最大个数</td></tr><tr><td>codec</td><td>指定编码器</td></tr><tr><td>heartbeat</td><td>指定是否发送心跳，以及心跳的发送间隔</td></tr><tr><td>exchanger</td><td>指定exchanger扩展点的实现类</td></tr><tr><td>heartbeat.timeout</td><td>心跳超时时间</td></tr><tr><td>sent</td><td>Consumer端发送时，Consumer的等待超时时间</td></tr><tr><td>codec</td><td>指定编码器</td></tr><tr><td>dispather</td><td>指定分发器</td></tr><tr><td>channel.handler</td><td>控制、指定handler处理器</td></tr><tr><td>threadname</td><td>Provider端指定的线程池扩展点中线程名称</td></tr><tr><td>threads</td><td>Provider端指定的线程池扩展点中核心线程数和最大线程数的数量</td></tr><tr><td>queues</td><td>Provider端指定的线程池扩展点中队列的大小，0为使用SynchronousQueue，小于0为无限</td></tr><tr><td>dump.directory</td><td>Provider端线程池线程越界时，jstack命令dump线程文件快照存储的路径</td></tr><tr><td>corethreads</td><td>Provider端指定的线程池扩展点中cache/limited线程池核心线程数</td></tr><tr><td>alive</td><td>Provider端指定的线程池扩展点中cache线程池线程空闲时间，毫秒</td></tr><tr><td>connect.queue.capacity</td><td>Provider端dispatcher为connection时，指定线程池队列容量</td></tr><tr><td>connect.queue.warning.size</td><td>Provider端dispatcher为connection时，指定线程池队列容量告警阈值</td></tr></tbody></table></div></div><p>出处：<a href="https://blog.csdn.net/jnqqls/article/details/46702103" target="_blank" rel="noopener">负载均衡策略</a></p><p>Dubbo提供了多种均衡策略，缺省为random随机调用。</p><div class="article-bounded"><div class="article-table"><table><thead><tr><th>均衡策略</th><th>描述</th></tr></thead><tbody><tr><td>Random LoadBalance</td><td>随机，按权重设置随机概率。<br>在一个截面上碰撞的概率高，但调用量越大分布越均匀，而且按概率使用权重后也比较均匀，有利于动态调整提供者权重。</td></tr><tr><td>RoundRobin LoadBalance</td><td>轮循，按公约后的权重设置轮循比率。<br>存在慢的提供者累积请求问题，比如：第二台机器很慢，但没挂，当请求调到第二台时就卡在那，久而久之，所有请求都卡在调到第二台上。</td></tr><tr><td>LeastActive LoadBalance</td><td>最少活跃调用数，相同活跃数的随机，活跃数指调用前后计数差。<br>使慢的提供者收到更少请求，因为越慢的提供者的调用前后计数差会越大。</td></tr><tr><td>ConsistentHash LoadBalance</td><td>一致性Hash，相同参数的请求总是发到同一提供者。<br>当某一台提供者挂时，原本发往该提供者的请求，基于虚拟节点，平摊到其它提供者，不会引起剧烈变动</td></tr></tbody></table></div></div><h3 id="Dubbo高可用机制"><a href="#Dubbo高可用机制" class="headerlink" title="Dubbo高可用机制"></a>Dubbo高可用机制</h3><h3 id="Dubbo管控台与监控"><a href="#Dubbo管控台与监控" class="headerlink" title="Dubbo管控台与监控"></a>Dubbo管控台与监控</h3><p>出处：<a href="https://blog.csdn.net/shangmingtao/article/details/78049479" target="_blank" rel="noopener">Dubbo管控台和监控中心</a></p><h4 id="管理控制台"><a href="#管理控制台" class="headerlink" title="管理控制台"></a>管理控制台</h4><p>Dubbo-Admin管理控制台是一个可以直观看到并管理生产者消费者的平台.Dubbo-Admin本身就是一个java项目.</p><p>下载地址: <a href="https://github.com/alibaba/dubbo" target="_blank" rel="noopener">https://github.com/alibaba/dubbo</a> 在dubbo-admin上用mvn package就可以了</p><p>打好包后我们需要将war包解压缩到tomcat webapps的ROOT目录下.并更改配置文件,启动tomcat</p><p>配置文件:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#zookeeper地址</span><br><span class="line">dubbo.registry.address=zookeeper://127.0.0.1:2181 </span><br><span class="line">#管理员密码 管理账号root</span><br><span class="line">dubbo.admin.root.password=root</span><br><span class="line">#访客密码</span><br><span class="line">dubbo.admin.guest.password=guest</span><br></pre></td></tr></table></figure><p>验证是否安装成功,访问<a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080</a> 出现如下页面证明安装成功 </p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\dubbo管理控制台.png" alt="dubbo管理控制台.png"></p></div><h4 id="Dubbo监控中心"><a href="#Dubbo监控中心" class="headerlink" title="Dubbo监控中心"></a>Dubbo监控中心</h4><p>Dubbo监控中心monitor主要是用来计数的,它所处的位置如下图,比如某个生产者被访问了多少次,当然官方提供的是一个简易的监控中心,我们也可以利用官方给出的api定制自己的监控中心.</p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\nxfywqs12h.jpeg" alt="img"></p></div><h3 id="基于Dubbo的项目应用案例分析【案例】"><a href="#基于Dubbo的项目应用案例分析【案例】" class="headerlink" title="基于Dubbo的项目应用案例分析【案例】"></a>基于Dubbo的项目应用案例分析【案例】</h3><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xzvf dubbo-monitor-simple-2.5.3-assembly.tar.gz</span><br></pre></td></tr></table></figure><p>更改dubbo-monitor-simple-2.5.3-assembly/dubbo-monitor-simple-2.5.3/conf下的dubbo.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">dubbo.container=log4j,spring,registry,jetty</span><br><span class="line">dubbo.application.name=simple-monitor</span><br><span class="line">dubbo.application.owner=</span><br><span class="line">#dubbo.registry.address=multicast://224.5.6.7:1234</span><br><span class="line">#zookeeper地址</span><br><span class="line">dubbo.registry.address=zookeeper://127.0.0.1:2181 </span><br><span class="line">#dubbo.registry.address=redis://127.0.0.1:6379</span><br><span class="line">#dubbo.registry.address=dubbo://127.0.0.1:9090</span><br><span class="line">dubbo.protocol.port=7070</span><br><span class="line">#注意这里,因为我们的管理控制台用tomcat启动,tomcat默认端口8080,所以这里我们用8090,可以看出官方给的简易监控中心使用jetty启动的.</span><br><span class="line">dubbo.jetty.port=8090 </span><br><span class="line">dubbo.jetty.directory=$&#123;user.home&#125;/monitor</span><br><span class="line">dubbo.charts.directory=$&#123;dubbo.jetty.directory&#125;/charts</span><br><span class="line">dubbo.statistics.directory=$&#123;user.home&#125;/monitor/statistics</span><br><span class="line">dubbo.log4j.file=logs/dubbo-monitor-simple.log</span><br><span class="line">dubbo.log4j.level=WARN</span><br></pre></td></tr></table></figure><p>接下来我们启动,进入dubbo-monitor-simple-2.5.3-assembly/dubbo-monitor-simple-2.5.3/bin目录,通过如下命令启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start.sh #linux</span><br><span class="line">start.bat #windows</span><br></pre></td></tr></table></figure><p>访问:<a href="http://localhost:8090/" target="_blank" rel="noopener">http://localhost:8090</a> 如下页面启动成功: </p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\监控中心.png" alt="监控中心"></p></div><h2 id="微服务之Spring-Cloud"><a href="#微服务之Spring-Cloud" class="headerlink" title="微服务之Spring Cloud"></a><strong>微服务之Spring Cloud</strong></h2><h3 id="Spring-Cloud介绍"><a href="#Spring-Cloud介绍" class="headerlink" title="Spring Cloud介绍"></a>Spring Cloud介绍</h3><p>​    基于 Spring boot</p><p>​    云服务、分布式框架集合</p><p>​    Spring Cloud，来源于 Spring Source ，具有 Spring 社区的强大背书外，还有 Netflix 强大的后盾与技术输出。Netflix 作为一家成功实践微服务架构的互联网公司，在几年前就把几乎整个微服务框架栈开源贡献给了社区，这些框架开源的整套微服务架构套件是 Spring Cloud 的核心。</p><h3 id="为什么选择Spring-Cloud？"><a href="#为什么选择Spring-Cloud？" class="headerlink" title="为什么选择Spring Cloud？"></a>为什么选择Spring Cloud？</h3><p>出处：<a href="https://cloud.tencent.com/developer/article/1177574" target="_blank" rel="noopener">Spring Cloud优缺点</a></p><ul><li><p>有强大的 Spring 社区、Netflix 等公司支持，并且<strong>开源社区贡献非常活跃</strong>。</p></li><li><p><strong>标准化</strong>的将微服务的成熟产品和框架结合一起，Spring Cloud 提供<strong>整套的微服务解决方案，开发成本较低，且风险较小</strong>。</p></li><li><p><strong>基于 Spring Boot</strong>，具有简单配置、快速开发、轻松部署、方便测试的特点。</p></li><li><p>支持 REST 服务调用，相比于 RPC，更加<strong>轻量化和灵活</strong>（服务之间只依赖一纸契约，不存在代码级别的强依赖），有利于<strong>跨语言服务的实现</strong>，以及<strong>服务的发布部署</strong>。另外，结合 Swagger，也使得<strong>服务的文档一体化</strong>。</p></li><li><p>提供了 Docker 及 Kubernetes 微服务编排支持。</p></li><li><p>国内外企业应用非常多，经受了大公司的应用考验（比如 Netfilx 公司），以及强大的开源社区支持。</p></li></ul><h3 id="Spring-Cloud架构剖析"><a href="#Spring-Cloud架构剖析" class="headerlink" title="Spring Cloud架构剖析"></a>Spring Cloud架构剖析</h3><p>出处：<a href="https://www.jianshu.com/p/ae55e444c3a7" target="_blank" rel="noopener">Spring Colud完整技术与组件架构</a></p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\pe0rv90aoc.jpeg" alt="img"></p></div><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\0gc7v2gapy.jpeg" alt="img"></p></div><ul><li>常用组件：<ul><li>Eureka:　服务注册发现框架；</li><li>Zuul:　服务网关；</li><li>Karyon:　服务端框架；</li><li>Ribbon:　客户端框架；</li><li>Hystrix: 服务容错组件；</li><li>Archaius: 服务配置组件；</li><li>Servo: Metrics组件；</li><li>Blitz4j: 日志组件</li></ul></li><li>流程：<ul><li>请求统一通过 API 网关（Zuul）来访问内部服务。</li><li>网关接收到请求后，从注册中心（Eureka）获取可用服务。</li><li>由 Ribbon 进行均衡负载后，分发到后端具体实例。</li><li>微服务之间通过 Feign 进行通信处理业务。</li><li>Hystrix 负责处理服务超时熔断。</li><li>Turbine 监控服务间的调用和熔断相关指标。</li></ul></li></ul><h3 id="Spring-Cloud的工具框架"><a href="#Spring-Cloud的工具框架" class="headerlink" title="Spring Cloud的工具框架"></a>Spring Cloud的工具框架</h3><p>出处：<a href="https://cloud.tencent.com/developer/article/1177574" target="_blank" rel="noopener">工具框架</a></p><ul><li><strong>Spring Cloud Config 配置中心</strong>，利用 Git 集中管理程序的配置。</li><li>Spring Cloud Netflix 集成众多Netflix的开源软件。</li><li><strong>Spring Cloud Netflix Eureka 服务中心</strong>（类似于管家的概念，需要什么直接从这里取，就可以了），一个基于 REST 的服务，用于定位服务，以实现云端中间层服务发现和故障转移。</li><li><strong>Spring Cloud Netflix Hystrix 熔断器</strong>，容错管理工具，旨在通过熔断机制控制服务和第三方库的节点，从而对延迟和故障提供更强大的容错能力。</li><li><strong>Spring Cloud Netflix Zuul 网关</strong>，是在云平台上提供动态路由，监控，弹性，安全等边缘服务的框架。Web 网站后端所有请求的前门。</li><li>Spring Cloud Netflix Archaius 配置管理 API，包含一系列配置管理API，提供动态类型化属性、线程安全配置操作、轮询框架、回调机制等功能。</li><li><strong>Spring Cloud Netflix Ribbon 负载均衡</strong>。</li><li><strong>Spring Cloud Netflix Fegin REST客户端</strong>。</li><li><strong>Spring Cloud Bus 消息总线</strong>，利用分布式消息将服务和服务实例连接在一起，用于在一个集群中传播状态的变化。</li><li>Spring Cloud for Cloud Foundry 利用 Pivotal Cloudfoundry 集成你的应用程序。</li><li>Spring Cloud Cloud Foundry Service Broker 为建立管理云托管服务的服务代理提供了一个起点。</li><li><strong>Spring Cloud Cluster 集群工具</strong>，基于 Zookeeper, Redis, Hazelcast, Consul 实现的领导选举和平民状态模式的抽象和实现。</li><li>Spring Cloud Consul 基于 Hashicorp Consul 实现的服务发现和配置管理。</li><li><strong>Spring Cloud Security 安全控制</strong>，在 Zuul 代理中为 OAuth2 REST 客户端和认证头转发提供负载均衡。</li><li><strong>Spring Cloud Sleuth 分布式链路监控</strong>，SpringCloud 应用的分布式追踪系统，和 Zipkin，HTrace，ELK 兼容。</li><li>Spring Cloud Data Flow 一个云本地程序和操作模型，组成数据微服务在一个结构化的平台上。</li><li><strong>Spring Cloud Stream 消息组件</strong>，基于 Redis，Rabbit，Kafka 实现的消息微服务，简单声明模型用以在 Spring Cloud 应用中收发消息。</li><li>Spring Cloud Stream App Starters 基于 Spring Boot 为外部系统提供 Spring 的集成。</li><li>Spring Cloud Task 短生命周期的微服务，为 Spring Booot 应用简单声明添加功能和非功能特性。</li><li>Spring Cloud Task App Starters。</li><li>Spring Cloud Zookeeper 服务发现和配置管理基于 Apache Zookeeper。</li><li>Spring Cloud for Amazon Web Services 快速和亚马逊网络服务集成。</li><li>Spring Cloud Connectors 便于PaaS应用在各种平台上连接到后端像数据库和消息经纪服务。</li><li>Spring Cloud Starters （项目已经终止并且在 Angel.SR2 后的版本和其他项目合并）</li><li><strong>Spring Cloud CLI 命令行工具</strong>，插件用 Groovy 快速的创建 Spring Cloud 组件应用。</li></ul><h3 id="Spring-Cloud优缺点分析"><a href="#Spring-Cloud优缺点分析" class="headerlink" title="Spring Cloud优缺点分析"></a>Spring Cloud优缺点分析</h3><p>出处：<a href="https://cloud.tencent.com/developer/article/1177574" target="_blank" rel="noopener">Spring Cloud优缺点</a></p><ul><li><p>支持 REST 服务调用，可能因为<strong>接口定义过轻</strong>，导致定义文档与实际实现不一致导致服务集成时的问题（可以使用统一文档和版本管理解决，比如 Swagger）。</p></li><li><p>另外，<strong>REST 服务调用性能会比 RPC 低一些</strong>（但也不是强绑定）</p></li><li><p>Spring Cloud 整合了大量组件，<strong>相关文档比较复杂</strong>，需要针对性的进行阅读。</p></li></ul><h3 id="Spring-Cloud负载均衡"><a href="#Spring-Cloud负载均衡" class="headerlink" title="Spring Cloud负载均衡"></a>Spring Cloud负载均衡</h3><p>出处：<a href="https://www.jianshu.com/p/d815f0c3820d" target="_blank" rel="noopener">SppringCloud负载均衡实践</a></p><p>出处：<a href="https://blog.csdn.net/u012702547/article/details/77978845" target="_blank" rel="noopener">SpringCloud负载均衡策略</a></p><div class="article-bounded"><div class="article-table"><table><thead><tr><th>策略接口</th><th>描述</th></tr></thead><tbody><tr><td>IRule</td><td>这是所有负载均衡策略的父接口，里边的核心方法就是choose方法，用来选择一个服务实例。</td></tr><tr><td>AbstractLoad<br>BalancerRule</td><td>AbstractLoadBalancerRule是一个抽象类，里边主要定义了一个ILoadBalancer，就是我们上文所说的负载均衡器，负载均衡器的功能我们在上文已经说的很详细了，这里就不再赘述，这里定义它的目的主要是辅助负责均衡策略选取合适的服务端实例。</td></tr><tr><td>RandomRule</td><td>看名字就知道，这种负载均衡策略就是随机选择一个服务实例，看源码我们知道，在RandomRule的无参构造方法中初始化了一个Random对象，然后在它重写的choose方法又调用了choose(ILoadBalancer lb, Object key)这个重载的choose方法，在这个重载的choose方法中，每次利用random对象生成一个不大于服务实例总数的随机数，并将该数作为下标所以获取一个服务实例。</td></tr><tr><td>RoundRobinRule</td><td>RoundRobinRule这种负载均衡策略叫做线性负载均衡策略，也就是我们在上文所说的BaseLoadBalancer负载均衡器中默认采用的负载均衡策略。这个类的choose(ILoadBalancer lb, Object key)函数整体逻辑是这样的：开启一个计数器count，在while循环中遍历服务清单，获取清单之前先通过incrementAndGetModulo方法获取一个下标，这个下标是一个不断自增长的数先加1然后和服务清单总数取模之后获取到的（所以这个下标从来不会越界），拿着下标再去服务清单列表中取服务，每次循环计数器都会加1，如果连续10次都没有取到服务，则会报一个警告No available alive servers after 10 tries from load balancer: XXXX。</td></tr><tr><td>RetryRule</td><td>看名字就知道这种负载均衡策略带有重试功能。首先RetryRule中又定义了一个subRule，它的实现类是RoundRobinRule，然后在RetryRule的choose(ILoadBalancer lb, Object key)方法中，每次还是采用RoundRobinRule中的choose规则来选择一个服务实例，如果选到的实例正常就返回，如果选择的服务实例为null或者已经失效，则在失效时间deadline之前不断的进行重试（重试时获取服务的策略还是RoundRobinRule中定义的策略），如果超过了deadline还是没取到则会返回一个null。</td></tr><tr><td>WeightedResponse<br>TimeRule</td><td>WeightedResponseTimeRule是RoundRobinRule的一个子类，在WeightedResponseTimeRule中对RoundRobinRule的功能进行了扩展，WeightedResponseTimeRule中会根据每一个实例的运行情况来给计算出该实例的一个权重，然后在挑选实例的时候则根据权重进行挑选，这样能够实现更优的实例调用。WeightedResponseTimeRule中有一个名叫DynamicServerWeightTask的定时任务，默认情况下每隔30秒会计算一次各个服务实例的权重，权重的计算规则也很简单，如果一个服务的平均响应时间越短则权重越大，那么该服务实例被选中执行任务的概率也就越大。</td></tr><tr><td>ClientConfigEnabled<br>RoundRobinRule</td><td>ClientConfigEnabledRoundRobinRule选择策略的实现很简单，内部定义了RoundRobinRule，choose方法还是采用了RoundRobinRule的choose方法，所以它的选择策略和RoundRobinRule的选择策略一致，不赘述。</td></tr><tr><td>BestAvailableRule</td><td>BestAvailableRule继承自ClientConfigEnabledRoundRobinRule，它在ClientConfigEnabledRoundRobinRule的基础上主要增加了根据loadBalancerStats中保存的服务实例的状态信息来过滤掉失效的服务实例的功能，然后顺便找出并发请求最小的服务实例来使用。然而loadBalancerStats有可能为null，如果loadBalancerStats为null，则BestAvailableRule将采用它的父类即ClientConfigEnabledRoundRobinRule的服务选取策略（线性轮询）。</td></tr><tr><td>PredicateBasedRule</td><td>PredicateBasedRule是ClientConfigEnabledRoundRobinRule的一个子类，它先通过内部定义的一个过滤器过滤出一部分服务实例清单，然后再采用线性轮询的方式从过滤出来的结果中选取一个服务实例。</td></tr><tr><td>ZoneAvoidanceRule</td><td>ZoneAvoidanceRule是PredicateBasedRule的一个实现类，只不过这里多一个过滤条件，ZoneAvoidanceRule中的过滤条件是以ZoneAvoidancePredicate为主过滤条件和以AvailabilityPredicate为次过滤条件组成的一个叫做CompositePredicate的组合过滤条件，过滤成功之后，继续采用线性轮询的方式从过滤结果中选择一个出来。</td></tr></tbody></table></div></div><h3 id="Spring-Cloud管理与监控"><a href="#Spring-Cloud管理与监控" class="headerlink" title="Spring Cloud管理与监控"></a>Spring Cloud管理与监控</h3><p>出处：<a href="https://blog.csdn.net/Axela30W/article/details/81117788" target="_blank" rel="noopener">SpringCloud管理与监控的实践</a></p><h2 id="微服务开发之Spring-Boot"><a href="#微服务开发之Spring-Boot" class="headerlink" title="微服务开发之Spring Boot"></a><strong>微服务开发之Spring Boot</strong></h2><h3 id="什么是SpringBoot？"><a href="#什么是SpringBoot？" class="headerlink" title="什么是SpringBoot？"></a>什么是SpringBoot？</h3><p>出处：<a href="https://jimmysong.io/posts/spring-boot-quick-start-guide/" target="_blank" rel="noopener">SpringBoot概念</a></p><p>Spring boot的技术栈</p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads/spring-stack.png" alt="spring-stack"> </p></div><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads/spring-boot-note-spots.png" alt="spring-boot-note-spots"></p></div><h3 id="SpringBoot适应场景"><a href="#SpringBoot适应场景" class="headerlink" title="SpringBoot适应场景"></a><strong>SpringBoot适应场景</strong></h3><p>出处：<a href="https://juejin.im/entry/598951d76fb9a03c350a58d9" target="_blank" rel="noopener">SpringBoot应用场景</a></p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\SpringBoot应用场景.jpg" alt="SpringBoot应用场景"></p></div><h3 id="SpringBoot优势"><a href="#SpringBoot优势" class="headerlink" title="SpringBoot优势"></a>SpringBoot优势</h3><p>出处：<a href="https://blog.csdn.net/fly_zhyu/article/details/76407830" target="_blank" rel="noopener">Spring boot浅谈</a></p><ul><li><p>Spring boot能够使编码变精简、配置变简单、部署变快捷、监控变容易</p></li><li><p>Spring boot默认快速启动一个web容器，不需要外置web容器，将注意力集中在编码上，而不是配置容器等方面上。</p></li><li><p>Spring boot是Spring框架扬长避短的杰作，简化了spring冗余的配置，从xml配置到java Config配置，从setBean的方式配置到自动注解，从多个properties+xml到只要一个yml就完成了配置。</p></li><li><p>Spring boot 默认配置；额很多框架的使用方式，整合了所有框架</p></li><li><p>Spring boot能够对主流开发的框架，进行无配置集成，提高了开发、部署的效率，不用再花额外的时间，研究不同框架的整合与集成上</p></li><li><p>Spring boot支持的配置文件application.yml，减少了传统的properties的链式麻烦</p></li><li><p>Spring boot提供了热部署，实时刷新后台服务，能将服务改动后的效果，呈现出来</p></li><li><p>Spring boot一键启动，只需要一个jar、war，甚至一段代码就可以了，不需要预部署应用服务器</p></li><li><p>configprops：属性配置、dump：线程工作状态、env/name：环境变量、metrics/name：JVM性能指标、mapping：RESTful path与服务类的映射关系</p></li></ul><h3 id="SpringBoot的包版本管理"><a href="#SpringBoot的包版本管理" class="headerlink" title="SpringBoot的包版本管理"></a>SpringBoot的包版本管理</h3><p>pom??</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">spring-boot-dependencies</span><br><span class="line">spring-boot-parent</span><br><span class="line">spring-boot-tools</span><br><span class="line">spring-boot</span><br><span class="line">spring-boot-test</span><br><span class="line">spring-boot-autoconfigure</span><br><span class="line">spring-boot-test-autoconfigure</span><br><span class="line">spring-boot-actuator</span><br><span class="line">spring-boot-devtools</span><br><span class="line">spring-boot-docs</span><br><span class="line">spring-boot-starters</span><br><span class="line">spring-boot-actuator-docs</span><br><span class="line">spring-boot-cli</span><br></pre></td></tr></table></figure><p>出处：<a href="https://www.jianshu.com/p/346cac67bfcc" target="_blank" rel="noopener">SpringBoot Module</a></p><h4 id="spring-boot"><a href="#spring-boot" class="headerlink" title="spring-boot"></a>spring-boot</h4><p>SpringBoot核心工程。</p><h4 id="spring-boot-starters"><a href="#spring-boot-starters" class="headerlink" title="spring-boot-starters"></a>spring-boot-starters</h4><p>是SpringBoot的启动服务工程。</p><h4 id="spring-boot-autoconfigure"><a href="#spring-boot-autoconfigure" class="headerlink" title="spring-boot-autoconfigure"></a>spring-boot-autoconfigure</h4><p>是SpringBoot实现自动配置的核心工程。</p><h4 id="spring-boot-actuator"><a href="#spring-boot-actuator" class="headerlink" title="spring-boot-actuator"></a>spring-boot-actuator</h4><p>提供SpringBoot应用的外围支撑性功能。 比如：</p><ul><li>Endpoints，SpringBoot应用状态监控管理</li><li>HealthIndicator，SpringBoot应用健康指示表</li><li>提供metrics支持</li><li>提供远程shell支持</li></ul><h4 id="spring-boot-tools"><a href="#spring-boot-tools" class="headerlink" title="spring-boot-tools"></a>spring-boot-tools</h4><p>提供了SpringBoot开发者的常用工具集。诸如，spring-boot-gradle-plugin，spring-boot-maven-plugin就是这个工程里面的。</p><h4 id="spring-boot-cli"><a href="#spring-boot-cli" class="headerlink" title="spring-boot-cli"></a>spring-boot-cli</h4><p>是Spring Boot命令行交互工具，可用于使用Spring进行快速原型搭建。你可以用它直接运行Groovy脚本。如果你不喜欢Maven或Gradle，Spring提供了CLI（Command Line Interface）来开发运行Spring应用程序。你可以使用它来运行Groovy脚本，甚至编写自定义命令。</p><h3 id="SpringBoot自动配置"><a href="#SpringBoot自动配置" class="headerlink" title="SpringBoot自动配置"></a><strong>SpringBoot自动配置</strong></h3><p>出处：<a href="https://www.bysocket.com/?p=2001" target="_blank" rel="noopener">SpringBoot自动部署</a> 、<a href="http://ifeve.com/spring-boot-autoconfiguration/" target="_blank" rel="noopener">SpringBoot官方文档</a></p><p>​    Spring Boot <code>spring-boot-autoconfigure</code> 依赖做了很多默认的配置项，即应用默认值。这种模式叫做 “自动配置”。Spring Boot 自动配置会根据添加的依赖，自动加载依赖相关的配置属性并启动依赖。例如默认用的内嵌式容器是 Tomcat ，端口默认设置为 8080。</p><p>​    为什么需要自动配置？顾名思义，自动配置的意义是利用这种模式代替了配置 XML 繁琐模式。以前使用 Spring MVC ，需要进行配置组件扫描、调度器、视图解析器等，使用 Spring Boot 自动配置后，只需要添加 MVC 组件即可自动配置所需要的 Bean。所有自动配置的实现都在 <code>spring-boot-autoconfigure</code> 依赖中，包括 Spring MVC 、Data 和其它框架的自动配置。</p><p>​    Spring Boot的自动配置会尝试根据你添加进来的jar依赖来自动配置你的Spring应用。例如，如果HSQLDB在你的classpath路径上，你没有手动配置任何数据库连接实体类，我们还会自动配置内存数据库。</p><p>你可以有选择的实现自动配置，可以向 @Configuration上添加@EnableAutoConfiguration或者@SpringBootApplication注解来实现。</p><p>逐步覆盖自动配置</p><p>​    自动配置是非入侵式的，任何时候你都可以使用你自定义的配置来覆盖自动配置的特定部分。例如，如果你要添加自己的DataSource bean，默认的内嵌数据库会无效。</p><p>​    如果你需要查找当前应用的自动配置，你可以启动应用时加上–debug开关。它会为核心日志记录器开启debug日志记录，并且会打印自动配置日志信息到控制台。</p><p><strong>禁用特定自动配置</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableAutoConfiguration</span>的排除属性来禁用它们。</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.jdbc.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.*;</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span>(exclude=&#123;DataSourceAutoConfiguration.class&#125;) <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfiguration</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果这个类不在classpath路径下，你可以使用该注解的excludeName属性以及指定全限定名 来替代。最终，你也可以控制自动配置类的列表来额除spring.autoconfigure.exclude属性。</p><p>你可以通过注解级别以及使用属性来定义排除项。</p><p>Starter 组件</p><p>Spring Boot 提供了很多 “开箱即用” 的 Starter 组件。Starter 组件是可被加载在应用中的 Maven 依赖项。只需要在 Maven 配置中添加对应的依赖配置，即可使用对应的 Starter 组件。例如，添加 <code>spring-boot-starter-web</code> 依赖，就可用于构建 REST API 服务，其包含了 Spring MVC 和 Tomcat 内嵌容器等。</p><p>一个完整的 Starter 组件包括以下两点：</p><ul><li>提供自动配置功能的自动配置模块。</li><li>提供依赖关系管理功能的组件模块，即封装了组件所有功能，开箱即用</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">spring-boot-starter</span><br><span class="line">spring-boot-starter-activemq</span><br><span class="line">spring-boot-starter-actuator</span><br><span class="line">spring-boot-starter-amqp</span><br><span class="line">spring-boot-starter-aop</span><br><span class="line">spring-boot-starter-artemis</span><br><span class="line">spring-boot-starter-batch</span><br><span class="line">spring-boot-starter-cache</span><br><span class="line">spring-boot-starter-cloud-connectors</span><br><span class="line">spring-boot-starter-data-cassandra</span><br><span class="line">spring-boot-starter-data-couchbase</span><br><span class="line">spring-boot-starter-data-elasticsearch</span><br><span class="line">spring-boot-starter-data-jpa</span><br><span class="line">spring-boot-starter-data-ldap</span><br><span class="line">spring-boot-starter-data-mongodb</span><br><span class="line">spring-boot-starter-data-mongodb-reactive</span><br><span class="line">spring-boot-starter-data-neo4j</span><br><span class="line">spring-boot-starter-data-redis</span><br><span class="line">spring-boot-starter-data-rest</span><br><span class="line">spring-boot-starter-data-solr</span><br><span class="line">spring-boot-starter-freemarker</span><br><span class="line">spring-boot-starter-groovy-templates</span><br><span class="line">spring-boot-starter-hateoas</span><br><span class="line">spring-boot-starter-integration</span><br><span class="line">spring-boot-starter-jdbc</span><br><span class="line">spring-boot-starter-jersey</span><br><span class="line">spring-boot-starter-jetty</span><br><span class="line">spring-boot-starter-jooq</span><br><span class="line">spring-boot-starter-jta-atomikos</span><br><span class="line">spring-boot-starter-jta-bitronix</span><br><span class="line">spring-boot-starter-jta-narayana</span><br><span class="line">spring-boot-starter-log4j2</span><br><span class="line">spring-boot-starter-logging</span><br><span class="line">spring-boot-starter-mail</span><br><span class="line">spring-boot-starter-mobile</span><br><span class="line">spring-boot-starter-mustache</span><br><span class="line">spring-boot-starter-parent</span><br><span class="line">spring-boot-starter-reactor-netty</span><br><span class="line">spring-boot-starter-security</span><br><span class="line">spring-boot-starter-social-facebook</span><br><span class="line">spring-boot-starter-social-linkedin</span><br><span class="line">spring-boot-starter-social-twitter</span><br><span class="line">spring-boot-starter-test</span><br><span class="line">spring-boot-starter-thymeleaf</span><br><span class="line">spring-boot-starter-tomcat</span><br><span class="line">spring-boot-starter-undertow</span><br><span class="line">spring-boot-starter-validation</span><br><span class="line">spring-boot-starter-web</span><br><span class="line">spring-boot-starter-web-services</span><br><span class="line">spring-boot-starter-webflux</span><br><span class="line">spring-boot-starter-websocket</span><br></pre></td></tr></table></figure><p>自动部署的一些不足：</p><p>​    Spring Boot 工程添加某些 Starter 组件依赖，但不想触发组件自动配置<br>​    Spring Boot 配置多个不同数据源配置时，比如使用 XML 配置多数据源，但其默认数据源配置会触发自动配置出现问题。    </p><h3 id="SpringBoot热部署机制"><a href="#SpringBoot热部署机制" class="headerlink" title="SpringBoot热部署机制"></a><strong>SpringBoot热部署机制</strong></h3><p>出处：<a href="https://www.jianshu.com/p/31440633f967" target="_blank" rel="noopener">SpringBoot热部署</a></p><p>原理：</p><p>​    spring-boot-devtools 是一个为开发者服务的模块，其中最重要的功能就是自动应用代码更改到最新的App上面去。原理 是在发现代码有更改之后，重新启动应用，但是速度比手动停止后再启动还要更快，更快指的不是节省出来的手动操作的时间。</p><p>​    其深层原理是使用了两个ClassLoader，一个Classloader加载那些不会改变的类（第三方的jar包），另外一个ClassLoader加载会更改的类，称为restart ClassLoader</p><p>​    这样在有代码更改的时候，，原来的restart ClassLoader被丢弃，重新创建一个restart ClassLoader，由于需要加载的类相比较少，所以实现了更快的重启时间（5秒左右）</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 添加spring boot devtools --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>true<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 添加plugin --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- fork:如果没有该配置，这个devtools不会起作用，即应用不会restart --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">fork</span>&gt;</span>true<span class="tag">&lt;/<span class="name">fork</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>出处：<a href="https://www.cnblogs.com/jiangbei/p/8438733.html" target="_blank" rel="noopener">热部署与热加载的区别</a></p><p>​    热部署就是在服务器运行时重新部署项目，——生产环境</p><p>​    热加载即在在运行时重新加载class，从而升级应用。——开发环境</p><p>　    热加载的实现原理主要依赖java的类加载机制，在实现方式可以概括为在容器启动的时候起一条后台线程，定时的检测类文件的时间戳变化，如果类的时间戳变掉了，则将类重新载入。</p><p>　　对比反射机制，反射是在运行时获取类信息，通过动态的调用来改变程序行为； 热加载则是在运行时通过重新加载改变类信息，直接改变程序行为。</p><p>　　热部署原理类似，但它是直接重新加载整个应用，这种方式会释放内存，比热加载更加干净彻底，但同时也更费时间。</p><h3 id="如何自定义配置参数？"><a href="#如何自定义配置参数？" class="headerlink" title="如何自定义配置参数？"></a>如何自定义配置参数？</h3><p>出处：<a href="https://www.jianshu.com/p/fbb32298d1fa" target="_blank" rel="noopener">SpringBoot自定义配置参数</a></p><p>yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试中使用的作者信息</span></span><br><span class="line"><span class="attr">author:</span></span><br><span class="line">  <span class="comment"># 姓名</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">xxx</span></span><br><span class="line">  <span class="comment"># 性别</span></span><br><span class="line">  <span class="comment"># gender: man</span></span><br><span class="line">  <span class="comment"># 年龄</span></span><br><span class="line"><span class="attr">  age:</span> <span class="number">22</span></span><br></pre></td></tr></table></figure><h3 id="外部化配置"><a href="#外部化配置" class="headerlink" title="外部化配置"></a>外部化配置</h3><p>出处：<a href="https://www.jianshu.com/p/fbb32298d1fa" target="_blank" rel="noopener">SpringBoot自定义配置参数</a></p><p>实体类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 配置文件对应的实体</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthorValue</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 通过 value 注解获取 properties 文件中的内容</span></span><br><span class="line"><span class="comment">     * $&#123;属性的全称&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;author.name&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 若配置文件中没有配置相应的属性, 而在类中又通过 @Value的形式获取, 系统启动时会报错</span></span><br><span class="line"><span class="comment">     * 所以, 我们可以通过设定默认值的形式避免这样的问题</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;author.age:10&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// getter and setter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过 value 的方式获取配置文件内容的测试方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthorValueTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AuthorValue authorValue;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUserMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Integer age = <span class="number">10</span>;</span><br><span class="line">        Assert.assertEquals(authorValue.getName(), <span class="string">"xxx"</span>);</span><br><span class="line">        Assert.assertEquals(authorValue.getAge(), age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>@ConfigurationProperties 直接封装对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 配置文件对应的实体</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"author"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthorObject</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 年龄</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="comment">// getter and setter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="多环境配置"><a href="#多环境配置" class="headerlink" title="多环境配置"></a>多环境配置</h3><p>出处：<a href="https://blog.csdn.net/yy756127197/article/details/78193398" target="_blank" rel="noopener">SpringBoot多环境配置</a></p><p>一个yml文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span></span><br><span class="line"><span class="attr">    active:</span> <span class="string">dev</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment">#开发环境配置</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">1000</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment">#测试环境配置</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span> <span class="string">stg</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">1001</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment">#生产环境配置</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span> <span class="string">prd</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">1002</span></span><br></pre></td></tr></table></figure><p>多个yml文件（比较实用）</p><p>application.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span></span><br><span class="line"><span class="attr">    active:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure><p>application-dev.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">1000</span></span><br></pre></td></tr></table></figure><p>application-test.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">1001</span></span><br></pre></td></tr></table></figure><p>application-prd.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">1002</span></span><br></pre></td></tr></table></figure><h3 id="Spring-Boot常用注解"><a href="#Spring-Boot常用注解" class="headerlink" title="Spring Boot常用注解"></a>Spring Boot常用注解</h3><p>出处：<a href="https://www.jianshu.com/p/e335923270f0" target="_blank" rel="noopener">SprintBoot常用注解</a></p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\SpringBoot常用注解1.png" alt="SpringBoot常用注解1"></p></div><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\SpringBoot常用注解2.png" alt="SpringBoot常用注2"></p></div><h3 id="Spring-Boot发布之jar与war"><a href="#Spring-Boot发布之jar与war" class="headerlink" title="Spring Boot发布之jar与war"></a>Spring Boot发布之jar与war</h3><p>出处：<a href="https://blog.csdn.net/qq_38623459/article/details/80790859" target="_blank" rel="noopener">SpringBoot发布中jar与war的区别</a></p><p>jar包：直接通过内置tomcat运行，不需要额外安装tomcat。如需修改内置tomcat的配置，只需要在spring boot的配置文件中配置。内置tomcat没有自己的日志输出，全靠jar包应用输出日志。但是比较方便，快速，比较简单。</p><p>war包：传统的应用交付方式，需要安装tomcat，然后放到waeapps目录下运行war包，可以灵活选择tomcat版本，可以直接修改tomcat的配置，有自己的tomcat日志输出，可以灵活配置安全策略。相对打成jar包来说没那么快速方便</p><h3 id="生产级特性"><a href="#生产级特性" class="headerlink" title="生产级特性"></a>生产级特性</h3><p>出处：<a href="https://www.jianshu.com/p/c785764c7c80" target="_blank" rel="noopener">SpringBoot生产级特性</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- 监控 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="endpoint"><a href="#endpoint" class="headerlink" title="endpoint"></a>endpoint</h4><p>我们可以通过一系列的HTTP请求获得应用程序的相关信息，这些请求就是endpoint，具体有如下几个</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">autoconfig  : 获取自动配置信息</span><br><span class="line">beans  ：获取Spring Bean基本信息</span><br><span class="line">configprops ：获取配置项信息</span><br><span class="line">dump ： 获取当前线程基本信息</span><br><span class="line">env ：获取环境变量信息</span><br><span class="line">health ： 获取健康检查信息</span><br><span class="line">info ： 获取应用的基本信息</span><br><span class="line">metrics ： 获取性能指标信息</span><br><span class="line">mappings ： 获取请求映射信息</span><br><span class="line">trace ： 获取请求调用信息</span><br></pre></td></tr></table></figure><p>可以通过application.properties配置文件进行精准控制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 放弃安全限制</span><br><span class="line">management.security.enabled=false</span><br><span class="line"># 关闭一个endpoint：beans</span><br><span class="line">endpoints.beans.enabled=false</span><br><span class="line"># 关闭所有endpoint，仅打开beans</span><br><span class="line">endpoints.enable=false</span><br><span class="line">endpoints.beans.enabled=false</span><br><span class="line"># 修改endpoint名称</span><br><span class="line">endpoints.beans.id=mybeans</span><br><span class="line"># 修改请求路径</span><br><span class="line">endpoints.beans.path=/endpoints/mybeans</span><br></pre></td></tr></table></figure><h4 id="信息聚合"><a href="#信息聚合" class="headerlink" title="信息聚合"></a>信息聚合</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- actuator聚合插件 /actuator --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-hateoas<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- actuator聚合图形化插件 /actuator --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-rest-hal-browser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="应用信息"><a href="#应用信息" class="headerlink" title="应用信息"></a>应用信息</h4><p>通过/info可以查看应用信息，信息可以在application.properties文件中配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">info.app.name=应用名称，使用POM中的信息，@project.modelVersion@</span><br><span class="line">info.app.description=对应用的描述</span><br><span class="line">info.app.version=1.0.0</span><br><span class="line"># 自定义用户信息</span><br><span class="line">info.user.name=hutou</span><br><span class="line">info.user.sex=男</span><br><span class="line">info.user.age=22</span><br></pre></td></tr></table></figure><h4 id="健康检查"><a href="#健康检查" class="headerlink" title="健康检查"></a>健康检查</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 暴露磁盘空间信息</span><br><span class="line">endpoints.health.sensitive=true</span><br><span class="line"># 健康信息缓存时间，设置太短会影响性能</span><br><span class="line">endpoints.health.time-to-live=500</span><br></pre></td></tr></table></figure><p>spring boot提供了很多内置的监控检查功能，都放置在：org.springframework.boot.actuate.health包下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ApplicationHealthIndicator</span><br><span class="line">DiskSpaceHealthIndicator</span><br><span class="line">DataSourceHealthIndicator    检查数据库连接</span><br><span class="line">MailHealthIndicator                检查邮件服务器</span><br><span class="line">MongoHealthIndicator            检查MongoDB数据库</span><br><span class="line">....</span><br></pre></td></tr></table></figure><h4 id="跨域访问"><a href="#跨域访问" class="headerlink" title="跨域访问"></a>跨域访问</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## 跨域访问</span><br><span class="line">endpoints.cors.allowed-origins=http://www.baidu.com</span><br><span class="line">endpoints.cors.allowed-methods=GET,PUT,POST,DELETE</span><br></pre></td></tr></table></figure><p>在应用中增加@CrossOrigin注解来实现跨域</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 自定义配置</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span></span>&#123;</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">     registry.addMapping(<span class="string">"/**"</span>)</span><br><span class="line">         .allowedOrigins(<span class="string">"http://www.baidu.com"</span>)</span><br><span class="line">         .allowedMethods(<span class="string">"GET"</span>,<span class="string">"PUT"</span>,<span class="string">"POST"</span>,<span class="string">"DELETE"</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="监控"><a href="#监控" class="headerlink" title="监控"></a>监控</h3><p>出处：<a href="https://blog.csdn.net/wh_ouyangshuang/article/details/48048111" target="_blank" rel="noopener">SpringBoot监控</a></p><p>spring-boot-actuator模块提供了一个监控和管理生产环境的模块，可以使用http、jmx、ssh、telnet等拉管理和监控应用。审计（Auditing）、<br>健康（health）、数据采集（metrics gathering）会自动加入到应用里面。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 添加依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\SpringBoot监控.png" alt="SpringBoot监控"></p></div><h3 id="【实战】使用SpringBoot快速构建RESTful-API应用"><a href="#【实战】使用SpringBoot快速构建RESTful-API应用" class="headerlink" title="【实战】使用SpringBoot快速构建RESTful API应用"></a>【实战】使用SpringBoot快速构建RESTful API应用</h3><h2 id="微服务之注册中心"><a href="#微服务之注册中心" class="headerlink" title="微服务之注册中心"></a><strong>微服务之注册中心</strong></h2><h3 id="服务调用端与服务提供端之间透明通信"><a href="#服务调用端与服务提供端之间透明通信" class="headerlink" title="服务调用端与服务提供端之间透明通信"></a>服务调用端与服务提供端之间透明通信</h3><h3 id="如何实现服务的动态注册与发现"><a href="#如何实现服务的动态注册与发现" class="headerlink" title="如何实现服务的动态注册与发现"></a>如何实现服务的动态注册与发现</h3><h3 id="注册中心引入"><a href="#注册中心引入" class="headerlink" title="注册中心引入"></a>注册中心引入</h3><h3 id="注册中心之zookeeper"><a href="#注册中心之zookeeper" class="headerlink" title="注册中心之zookeeper"></a><strong>注册中心之zookeeper</strong></h3><h3 id="注册中心底层实现剖析"><a href="#注册中心底层实现剖析" class="headerlink" title="注册中心底层实现剖析"></a>注册中心底层实现剖析</h3><h3 id="SpringCloud之注册中心Eurka"><a href="#SpringCloud之注册中心Eurka" class="headerlink" title="SpringCloud之注册中心Eurka"></a><strong>SpringCloud之注册中心Eurka</strong></h3><h3 id="Eurka介绍与原理分析"><a href="#Eurka介绍与原理分析" class="headerlink" title="Eurka介绍与原理分析"></a>Eurka介绍与原理分析</h3><h3 id="【实战】实现将微服务注册到EurkaServer上"><a href="#【实战】实现将微服务注册到EurkaServer上" class="headerlink" title="【实战】实现将微服务注册到EurkaServer上"></a>【实战】实现将微服务注册到EurkaServer上</h3><h2 id="微服务之负载均衡"><a href="#微服务之负载均衡" class="headerlink" title="微服务之负载均衡"></a><strong>微服务之负载均衡</strong></h2><h3 id="负载均衡应用场景"><a href="#负载均衡应用场景" class="headerlink" title="负载均衡应用场景"></a>负载均衡应用场景</h3><h3 id="常用的负载均衡实现方案"><a href="#常用的负载均衡实现方案" class="headerlink" title="常用的负载均衡实现方案"></a>常用的负载均衡实现方案</h3><h3 id="客户端负载均衡"><a href="#客户端负载均衡" class="headerlink" title="客户端负载均衡"></a><strong>客户端负载均衡</strong></h3><h3 id="服务端负载均衡"><a href="#服务端负载均衡" class="headerlink" title="服务端负载均衡"></a><strong>服务端负载均衡</strong></h3><h3 id="【实战】使用Ribbin实现客户端负载均衡"><a href="#【实战】使用Ribbin实现客户端负载均衡" class="headerlink" title="【实战】使用Ribbin实现客户端负载均衡"></a>【实战】使用Ribbin实现客户端负载均衡</h3><h2 id="微服务之容错处理"><a href="#微服务之容错处理" class="headerlink" title="微服务之容错处理"></a><strong>微服务之容错处理</strong></h2><h3 id="雪崩效应场景分析"><a href="#雪崩效应场景分析" class="headerlink" title="雪崩效应场景分析"></a>雪崩效应场景分析</h3><h3 id="如何应对雪崩效应下的容错处理"><a href="#如何应对雪崩效应下的容错处理" class="headerlink" title="如何应对雪崩效应下的容错处理"></a>如何应对雪崩效应下的容错处理</h3><h3 id="Spring-Cloud体系下之容错处理解决方案断路器Hystrix"><a href="#Spring-Cloud体系下之容错处理解决方案断路器Hystrix" class="headerlink" title="Spring Cloud体系下之容错处理解决方案断路器Hystrix"></a><strong>Spring Cloud体系下之容错处理解决方案断路器Hystrix</strong></h3><h3 id="应用如何接入Hystrix"><a href="#应用如何接入Hystrix" class="headerlink" title="应用如何接入Hystrix"></a>应用如何接入Hystrix</h3><h3 id="如何监控Hystrix状态"><a href="#如何监控Hystrix状态" class="headerlink" title="如何监控Hystrix状态"></a>如何监控Hystrix状态</h3><h3 id="【实战】实现Hystrix-Dashboard可视化监控数据"><a href="#【实战】实现Hystrix-Dashboard可视化监控数据" class="headerlink" title="【实战】实现Hystrix Dashboard可视化监控数据"></a>【实战】实现Hystrix Dashboard可视化监控数据</h3><h2 id="微服务之网关"><a href="#微服务之网关" class="headerlink" title="微服务之网关"></a><strong>微服务之网关</strong></h2><h3 id="微服务网关定义"><a href="#微服务网关定义" class="headerlink" title="微服务网关定义"></a>微服务网关定义</h3><h3 id="微服务网关引入能解决什么问题"><a href="#微服务网关引入能解决什么问题" class="headerlink" title="微服务网关引入能解决什么问题"></a>微服务网关引入能解决什么问题</h3><h3 id="SpringCloud之微服务网关zuul"><a href="#SpringCloud之微服务网关zuul" class="headerlink" title="SpringCloud之微服务网关zuul"></a>SpringCloud之微服务网关zuul</h3><h3 id="如何编写zuul微服务网关"><a href="#如何编写zuul微服务网关" class="headerlink" title="如何编写zuul微服务网关"></a>如何编写zuul微服务网关</h3><h3 id="zuul过滤器的应用"><a href="#zuul过滤器的应用" class="headerlink" title="zuul过滤器的应用"></a>zuul过滤器的应用</h3><h3 id="zuul的容错与回退处理"><a href="#zuul的容错与回退处理" class="headerlink" title="zuul的容错与回退处理"></a>zuul的容错与回退处理</h3><h3 id="【实战】使用zuul聚合微服务"><a href="#【实战】使用zuul聚合微服务" class="headerlink" title="【实战】使用zuul聚合微服务"></a>【实战】使用zuul聚合微服务</h3><h2 id="微服务之配置中心"><a href="#微服务之配置中心" class="headerlink" title="微服务之配置中心"></a>微服务之配置中心</h2><h3 id="服务配置中心介绍与应用场景分析"><a href="#服务配置中心介绍与应用场景分析" class="headerlink" title="服务配置中心介绍与应用场景分析"></a>服务配置中心介绍与应用场景分析</h3><h3 id="微服务配置之Ansible"><a href="#微服务配置之Ansible" class="headerlink" title="微服务配置之Ansible"></a>微服务配置之Ansible</h3><h3 id="如何管理微服务中的配置"><a href="#如何管理微服务中的配置" class="headerlink" title="如何管理微服务中的配置"></a>如何管理微服务中的配置</h3><h3 id="Spring-Cloud下之微服务配置解决方案Spring-Cloud-Config"><a href="#Spring-Cloud下之微服务配置解决方案Spring-Cloud-Config" class="headerlink" title="Spring Cloud下之微服务配置解决方案Spring Cloud Config"></a>Spring Cloud下之微服务配置解决方案Spring Cloud Config</h3><h3 id="Config-Server与Config-Client的实现"><a href="#Config-Server与Config-Client的实现" class="headerlink" title="Config Server与Config Client的实现"></a>Config Server与Config Client的实现</h3><h3 id="Config-Server仓库配置与应用流程"><a href="#Config-Server仓库配置与应用流程" class="headerlink" title="Config Server仓库配置与应用流程"></a>Config Server仓库配置与应用流程</h3><h3 id="如何实现配置端点的刷新"><a href="#如何实现配置端点的刷新" class="headerlink" title="如何实现配置端点的刷新"></a>如何实现配置端点的刷新</h3><h3 id="如何确保配置中心内容的安全性？"><a href="#如何确保配置中心内容的安全性？" class="headerlink" title="如何确保配置中心内容的安全性？"></a>如何确保配置中心内容的安全性？</h3><h3 id="如何实现配置刷新后自动下发？"><a href="#如何实现配置刷新后自动下发？" class="headerlink" title="如何实现配置刷新后自动下发？"></a>如何实现配置刷新后自动下发？</h3><h3 id="【实战】使用Spring-Cloud-Config打造微服务配置中心"><a href="#【实战】使用Spring-Cloud-Config打造微服务配置中心" class="headerlink" title="【实战】使用Spring Cloud Config打造微服务配置中心"></a>【实战】使用Spring Cloud Config打造微服务配置中心</h3><h2 id="微服务之封装"><a href="#微服务之封装" class="headerlink" title="微服务之封装"></a>微服务之封装</h2><h3 id="容器化技术"><a href="#容器化技术" class="headerlink" title="容器化技术"></a><strong>容器化技术</strong></h3><h3 id="Docker简介"><a href="#Docker简介" class="headerlink" title="Docker简介"></a>Docker简介</h3><h3 id="Docker架构剖析"><a href="#Docker架构剖析" class="headerlink" title="Docker架构剖析"></a>Docker架构剖析</h3><h3 id="虚拟机与Docker的对比"><a href="#虚拟机与Docker的对比" class="headerlink" title="虚拟机与Docker的对比"></a><strong>虚拟机与Docker的对比</strong></h3><h3 id="Docker的优点"><a href="#Docker的优点" class="headerlink" title="Docker的优点"></a>Docker的优点</h3><h3 id="Docker安装系统要求"><a href="#Docker安装系统要求" class="headerlink" title="Docker安装系统要求"></a>Docker安装系统要求</h3><h3 id="Docker的安装与卸载"><a href="#Docker的安装与卸载" class="headerlink" title="Docker的安装与卸载"></a>Docker的安装与卸载</h3><h3 id="Docker镜像常用命令"><a href="#Docker镜像常用命令" class="headerlink" title="Docker镜像常用命令"></a><strong>Docker镜像常用命令</strong></h3><h3 id="Docker容器常用命令"><a href="#Docker容器常用命令" class="headerlink" title="Docker容器常用命令"></a><strong>Docker容器常用命令</strong></h3><h3 id="如何配置Docker镜像地址"><a href="#如何配置Docker镜像地址" class="headerlink" title="如何配置Docker镜像地址"></a>如何配置Docker镜像地址</h3><h3 id="Docker镜像下载与构建"><a href="#Docker镜像下载与构建" class="headerlink" title="Docker镜像下载与构建"></a>Docker镜像下载与构建</h3><h3 id="使用Docker-Registry打造私有镜像仓库"><a href="#使用Docker-Registry打造私有镜像仓库" class="headerlink" title="使用Docker Registry打造私有镜像仓库"></a>使用Docker Registry打造私有镜像仓库</h3><h2 id="微服务部署"><a href="#微服务部署" class="headerlink" title="微服务部署"></a>微服务部署</h2><h3 id="持续集成"><a href="#持续集成" class="headerlink" title="持续集成"></a>持续集成</h3><h3 id="Jenkins简介"><a href="#Jenkins简介" class="headerlink" title="Jenkins简介"></a>Jenkins简介</h3><h3 id="使用Jenkins实现自动化发布"><a href="#使用Jenkins实现自动化发布" class="headerlink" title="使用Jenkins实现自动化发布"></a>使用Jenkins实现自动化发布</h3><h3 id="搭建版本控制系统"><a href="#搭建版本控制系统" class="headerlink" title="搭建版本控制系统"></a>搭建版本控制系统</h3><h3 id="搭建Jenkins持续集成系统"><a href="#搭建Jenkins持续集成系统" class="headerlink" title="搭建Jenkins持续集成系统"></a>搭建Jenkins持续集成系统</h3><h3 id="持续集成实现自动化构建"><a href="#持续集成实现自动化构建" class="headerlink" title="持续集成实现自动化构建"></a>持续集成实现自动化构建</h3><h2 id="微服务日志"><a href="#微服务日志" class="headerlink" title="微服务日志"></a>微服务日志</h2><h3 id="为什么需要搭建应用日志中心"><a href="#为什么需要搭建应用日志中心" class="headerlink" title="为什么需要搭建应用日志中心"></a>为什么需要搭建应用日志中心</h3><h3 id="开源日志中心ELK介绍"><a href="#开源日志中心ELK介绍" class="headerlink" title="开源日志中心ELK介绍"></a><strong>开源日志中心ELK介绍</strong></h3><h3 id="日志存储系统之Elasticsearch"><a href="#日志存储系统之Elasticsearch" class="headerlink" title="日志存储系统之Elasticsearch"></a><strong>日志存储系统之Elasticsearch</strong></h3><h3 id="日志收集系统之Logstash"><a href="#日志收集系统之Logstash" class="headerlink" title="日志收集系统之Logstash"></a><strong>日志收集系统之Logstash</strong></h3><h3 id="日志查询系统之Kibana"><a href="#日志查询系统之Kibana" class="headerlink" title="日志查询系统之Kibana"></a><strong>日志查询系统之Kibana</strong></h3><h3 id="ELK日志中心搭建"><a href="#ELK日志中心搭建" class="headerlink" title="ELK日志中心搭建"></a>ELK日志中心搭建</h3><h2 id="微服务监控"><a href="#微服务监控" class="headerlink" title="微服务监控"></a>微服务监控</h2><h3 id="Spring-Boot自带的开源监控系统Spring-Boot-Admin"><a href="#Spring-Boot自带的开源监控系统Spring-Boot-Admin" class="headerlink" title="Spring Boot自带的开源监控系统Spring Boot Admin"></a>Spring Boot自带的开源监控系统Spring Boot Admin</h3><h3 id="自主搭建系统监控中心"><a href="#自主搭建系统监控中心" class="headerlink" title="自主搭建系统监控中心"></a><strong>自主搭建系统监控中心</strong></h3><h3 id="分布式调用链中心"><a href="#分布式调用链中心" class="headerlink" title="分布式调用链中心"></a><strong>分布式调用链中心</strong></h3><h3 id="开源调用链中心Zipkin"><a href="#开源调用链中心Zipkin" class="headerlink" title="开源调用链中心Zipkin"></a><strong>开源调用链中心Zipkin</strong></h3><h3 id="微服务调用链追踪"><a href="#微服务调用链追踪" class="headerlink" title="微服务调用链追踪"></a>微服务调用链追踪</h3><h3 id="Spring-Cloud-Sleuth简介"><a href="#Spring-Cloud-Sleuth简介" class="headerlink" title="Spring Cloud Sleuth简介"></a>Spring Cloud Sleuth简介</h3><h3 id="Spring-Cloud-Sleuth与Zipkin结合应用"><a href="#Spring-Cloud-Sleuth与Zipkin结合应用" class="headerlink" title="Spring Cloud Sleuth与Zipkin结合应用"></a>Spring Cloud Sleuth与Zipkin结合应用</h3><h2 id="微服务之异步化"><a href="#微服务之异步化" class="headerlink" title="微服务之异步化"></a><strong>微服务之异步化</strong></h2><h3 id="使用MQ实现异步调用"><a href="#使用MQ实现异步调用" class="headerlink" title="使用MQ实现异步调用"></a><strong>使用MQ实现异步调用</strong></h3><h3 id="分布式事务解决方案剖析"><a href="#分布式事务解决方案剖析" class="headerlink" title="分布式事务解决方案剖析"></a>分布式事务解决方案剖析</h3><h3 id="Spring-Cloud-Bus的应用"><a href="#Spring-Cloud-Bus的应用" class="headerlink" title="Spring Cloud Bus的应用"></a><strong>Spring Cloud Bus的应用</strong></h3><h3 id="【实战】使用Spring-Cloud-Bus实现配置的自动刷新"><a href="#【实战】使用Spring-Cloud-Bus实现配置的自动刷新" class="headerlink" title="【实战】使用Spring Cloud Bus实现配置的自动刷新"></a>【实战】使用Spring Cloud Bus实现配置的自动刷新</h3><h2 id="微服务测试"><a href="#微服务测试" class="headerlink" title="微服务测试"></a>微服务测试</h2><h3 id="Spring-Boot单元测试"><a href="#Spring-Boot单元测试" class="headerlink" title="Spring Boot单元测试"></a>Spring Boot单元测试</h3><h3 id="Service层测试"><a href="#Service层测试" class="headerlink" title="Service层测试"></a><strong>Service层测试</strong></h3><h3 id="REST-API测试"><a href="#REST-API测试" class="headerlink" title="REST API测试"></a><strong>REST API测试</strong></h3><h3 id="【综合案例】-某大型的跨境电商项目"><a href="#【综合案例】-某大型的跨境电商项目" class="headerlink" title="【综合案例】 某大型的跨境电商项目"></a>【综合案例】 某大型的跨境电商项目</h3><h3 id="【综合案例】-某服务治理平台"><a href="#【综合案例】-某服务治理平台" class="headerlink" title="【综合案例】 某服务治理平台"></a>【综合案例】 某服务治理平台</h3><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol><li>单体架构简介：<a href="http://book.51cto.com/art/201803/567370.htm" target="_blank" rel="noopener">http://book.51cto.com/art/201803/567370.htm</a></li><li>单体架构到微服务的演进：<a href="https://my.oschina.net/zhanghaiyang/blog/725728" target="_blank" rel="noopener">https://my.oschina.net/zhanghaiyang/blog/725728</a></li><li>从单体架构迁移微服务：<a href="http://www.infoq.com/cn/news/2016/08/Monomer-architecture-Micro-servi" target="_blank" rel="noopener">http://www.infoq.com/cn/news/2016/08/Monomer-architecture-Micro-servi</a></li><li>单体与微服务架构：<a href="https://blog.csdn.net/hu_zhiting/article/details/77036914" target="_blank" rel="noopener">https://blog.csdn.net/hu_zhiting/article/details/77036914</a> </li><li>微服务的4大设计原则和19个解决方案：<a href="https://juejin.im/entry/59bf30876fb9a00a583176a1" target="_blank" rel="noopener">https://juejin.im/entry/59bf30876fb9a00a583176a1</a></li><li>微服务对比：<a href="https://segmentfault.com/a/1190000010953144" target="_blank" rel="noopener">https://segmentfault.com/a/1190000010953144</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;实践路线（github）&quot;&gt;&lt;a href=&quot;#实践路线（github）&quot; class=&quot;headerlink&quot; title=&quot;实践路线（github）&quot;&gt;&lt;/a&gt;实践路线（github）&lt;/h2&gt;&lt;p&gt;github管理项目，呈现一个项目学习路线的面貌。打造个人品
      
    
    </summary>
    
      <category term="微服务" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
    
      <category term="计划" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/%E8%AE%A1%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>about</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/15/about/about/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/15/about/about/</id>
    <published>2018-11-15T14:33:34.855Z</published>
    <updated>2018-11-15T14:33:57.984Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://wenchongjiaokou.info" target="_blank" rel="noopener">blog</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://wenchongjiaokou.info&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;blog&lt;/a&gt;&lt;/p&gt;

      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>不成文规定</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/14/%E6%AF%8F%E5%A4%A9%E4%B8%80%E7%AF%87(%E5%A4%A7%E7%BA%B2)/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/14/每天一篇(大纲)/</id>
    <published>2018-11-14T15:52:45.173Z</published>
    <updated>2018-11-15T16:07:44.173Z</updated>
    
    <content type="html"><![CDATA[<h1 id="不成文规定："><a href="#不成文规定：" class="headerlink" title="不成文规定："></a>不成文规定：</h1><p>离职or求职期间才可以公布到blog上，暂时存放到自己的本地目录下。不公开！</p><h2 id="PKI-内容分解"><a href="#PKI-内容分解" class="headerlink" title="PKI 内容分解"></a>PKI 内容分解</h2><ul><li style="list-style: none"><input type="checkbox"> ASN.1 语法</li><li style="list-style: none"><input type="checkbox"> 证书编码、格式</li><li style="list-style: none"><input type="checkbox"> 数字证书的概念</li><li style="list-style: none"><input type="checkbox"> 数字证书的信息：基本项、扩展项</li><li style="list-style: none"><input type="checkbox"> 数字签名</li><li style="list-style: none"><input type="checkbox"> 证书验证</li><li style="list-style: none"><input type="checkbox"> 证书申请与签发的流程</li><li style="list-style: none"><input type="checkbox"> PKI应用（这个需要模糊化，不能涉及公司）</li><li style="list-style: none"><input type="checkbox"> 证书与CA的关系</li><li style="list-style: none"><input type="checkbox"> CRL</li><li style="list-style: none"><input type="checkbox"> OCSP</li><li style="list-style: none"><input type="checkbox"> 时间戳</li><li style="list-style: none"><input type="checkbox"> RSA</li><li style="list-style: none"><input type="checkbox"> 加密、公开密钥</li></ul><p>（可以看教科书+阮一峰）</p><ul><li style="list-style: none"><input type="checkbox"> 密钥的生命周期</li></ul><p>（<a href="http://www.docin.com/p-743210632.html）" target="_blank" rel="noopener">http://www.docin.com/p-743210632.html）</a></p><ul><li style="list-style: none"><input type="checkbox"> SHA1、MD5、SHA256等算法原理</li></ul><p>-&gt;这部分可以等刷LintCode到某种层次的时候开始自己造个轮子玩一玩（估计需要2年时间，才有这个能力</p><ul><li style="list-style: none"><input type="checkbox"> P1的结构</li><li style="list-style: none"><input type="checkbox"> P7的结构，SignedData,2018年10月30日</li><li style="list-style: none"><input type="checkbox"> </li></ul><h2 id="java基础分解"><a href="#java基础分解" class="headerlink" title="java基础分解"></a>java基础分解</h2><ul><li style="list-style: none"><input type="checkbox"> HashMap的源码（bolg）</li><li style="list-style: none"><input type="checkbox"> ArrayList对比LinkList（bolg）</li><li style="list-style: none"><input type="checkbox"> 锁</li><li style="list-style: none"><input type="checkbox"> equals</li><li style="list-style: none"><input type="checkbox"> wait() 与sleep()和notify() 的区别</li><li style="list-style: none"><input type="checkbox"> 抽象类和接口的区别</li><li style="list-style: none"><input type="checkbox"> 生产者消费者</li><li style="list-style: none"><input type="checkbox"> 单向链表</li><li style="list-style: none"><input type="checkbox"> InputStream 和reader流的区别</li><li style="list-style: none"><input type="checkbox"> 单例模式</li><li style="list-style: none"><input type="checkbox"> 设计模式</li><li style="list-style: none"><input type="checkbox"> </li></ul><h2 id="java进阶分解"><a href="#java进阶分解" class="headerlink" title="java进阶分解"></a>java进阶分解</h2><ul><li style="list-style: none"><input type="checkbox"> GC机制</li><li style="list-style: none"><input type="checkbox"> 内存模型</li><li style="list-style: none"><input type="checkbox"> 高并发</li><li style="list-style: none"><input type="checkbox"> 连接池</li><li style="list-style: none"><input type="checkbox"> JVM</li><li style="list-style: none"><input type="checkbox"> 线程同步</li><li style="list-style: none"><input type="checkbox"> Java的IO</li><li style="list-style: none"><input type="checkbox"> java调用jdbc连接数据库</li><li style="list-style: none"><input type="checkbox"> preStatement和Statement的区别</li><li style="list-style: none"><input type="checkbox"> Spring如何实现事务</li><li style="list-style: none"><input type="checkbox"> HTTP2.0与1.0的区别</li><li style="list-style: none"><input type="checkbox"> </li></ul><h2 id="java技术经验分解"><a href="#java技术经验分解" class="headerlink" title="java技术经验分解"></a>java技术经验分解</h2><ul><li style="list-style: none"><input type="checkbox"> JAVA_GC日志分析，2018年10月30日</li><li style="list-style: none"><input type="checkbox"> 跳过导航链接一个不错的测试并发Java代码</li><li style="list-style: none"><input type="checkbox"> JAVA命令行工具的使用</li><li style="list-style: none"><input type="checkbox"> lombok介绍</li><li style="list-style: none"><input type="checkbox"> BTrace介绍</li><li style="list-style: none"><input type="checkbox"> ActiveMQ_基础学习</li><li style="list-style: none"><input type="checkbox"> Maven私服-nexus简介</li><li style="list-style: none"><input type="checkbox"> 配置Linux的DNS</li><li style="list-style: none"><input type="checkbox"> Wireshark使用分享</li><li style="list-style: none"><input type="checkbox"> RMI结合Spring使用</li><li style="list-style: none"><input type="checkbox"> chrome浏览器插件postman测试接口</li><li style="list-style: none"><input type="checkbox"> Java下HttpClient访问https的两种方式</li><li style="list-style: none"><input type="checkbox"> Spring事务管理介绍</li><li style="list-style: none"><input type="checkbox"> Spring事务管理基本使用</li><li style="list-style: none"><input type="checkbox"> 常见开源协议大白话说明</li><li style="list-style: none"><input type="checkbox"> mysql Innodb 表空间初步认识</li><li style="list-style: none"><input type="checkbox"> docker基本知识以及应用</li><li style="list-style: none"><input type="checkbox"> 六种方式实现hibernate查询</li><li style="list-style: none"><input type="checkbox"> java 客户端-服务端 证书信任</li><li style="list-style: none"><input type="checkbox"> 使用Toad比对数据库</li><li style="list-style: none"><input type="checkbox"> OpenSSL部分使用方法</li></ul><h2 id="微服务培训"><a href="#微服务培训" class="headerlink" title="微服务培训"></a>微服务培训</h2><h3 id="课程实战"><a href="#课程实战" class="headerlink" title="课程实战"></a>课程实战</h3><ul><li style="list-style: none"><input type="checkbox"> 【案例】结合某案例分析传统单体架构面临问题</li><li style="list-style: none"><input type="checkbox"> 【案例】基于Dubbo的项目应用案例分析</li><li style="list-style: none"><input type="checkbox"> 【实战】使用SpringBoot快速构建RESTful API应用</li><li style="list-style: none"><input type="checkbox"> 【实战】实现将微服务注册到EurkaServer上</li><li style="list-style: none"><input type="checkbox"> 【实战】使用Ribbin实现客户端负载均衡</li><li style="list-style: none"><input type="checkbox"> 【实战】实现Hystrix Dashboard可视化监控数据</li><li style="list-style: none"><input type="checkbox"> 【实战】使用zuul聚合微服务</li><li style="list-style: none"><input type="checkbox"> 【实战】使用Spring Cloud Config打造微服务配置中心</li><li style="list-style: none"><input type="checkbox"> 【实战】使用Spring Cloud Bus实现配置的自动刷新</li><li style="list-style: none"><input type="checkbox"> 【综合案例】 某大型的跨境电商项目</li><li style="list-style: none"><input type="checkbox"> 【综合案例】 某服务治理平台</li></ul><h3 id="分解"><a href="#分解" class="headerlink" title="分解"></a>分解</h3><ul><li style="list-style: none"><input type="checkbox"> Dubbo与Spring Cloud</li></ul><div class="article-img"><p><img src="https://pinksmallfan.github.io/WenChongAndJiaoKou/uploads/换位思考.png" alt="换位思考"></p></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;不成文规定：&quot;&gt;&lt;a href=&quot;#不成文规定：&quot; class=&quot;headerlink&quot; title=&quot;不成文规定：&quot;&gt;&lt;/a&gt;不成文规定：&lt;/h1&gt;&lt;p&gt;离职or求职期间才可以公布到blog上，暂时存放到自己的本地目录下。不公开！&lt;/p&gt;
&lt;h2 id=&quot;PKI
      
    
    </summary>
    
    
      <category term="Other" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>实验吧（Decode）</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/11/2018-11-11-%E5%AE%9E%E9%AA%8C%E5%90%A7%EF%BC%88Decode%EF%BC%89/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/11/2018-11-11-实验吧（Decode）/</id>
    <published>2018-11-11T15:04:00.000Z</published>
    <updated>2018-11-15T16:12:05.776Z</updated>
    
    <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p>Decode</p><blockquote><p>0x253464253534253435253335253433253661253435253737253464253531253666253738253464253434253637253462253466253534253662253462253464253534253435253738253433253661253435253737253466253531253666253738253464253434253435253462253464253534253435253332253433253661253435253738253464253531253666253738253464253534253535253462253464253534253431253330253433253661253435253737253465253531253666253738253464253661253435253462253466253534253633253462253464253534253435253737253433253661253662253334253433253661253662253333253433253661253435253738253465253431253364253364</p></blockquote><h3 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h3><p>首先，查看这段编码，有什么异常，我们可以发现253x出现得比较频繁，16进制25转为十进制为37，在ASCII即%，那么可以想到的是URL</p><h4 id="十六进制转ASCII编码"><a href="#十六进制转ASCII编码" class="headerlink" title="十六进制转ASCII编码"></a>十六进制转ASCII编码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hex16=<span class="number">253464253534253435253335253433253661253435253737253464253531253666253738253464253434253637253462253466253534253662253462253464253534253435253738253433253661253435253737253466253531253666253738253464253434253435253462253464253534253435253332253433253661253435253738253464253531253666253738253464253534253535253462253464253534253431253330253433253661253435253737253465253531253666253738253464253661253435253462253466253534253633253462253464253534253435253737253433253661253662253334253433253661253662253333253433253661253435253738253465253431253364253364</span></span><br><span class="line">d = [chr(int(b, <span class="number">16</span>)) <span class="keyword">for</span> b <span class="keyword">in</span> [hex16[i:i+<span class="number">2</span>] <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(hex16), <span class="number">2</span>)]]</span><br><span class="line"><span class="comment"># ['%', '4', 'd', '%', '5', '4', '%', '4', '5', '%', '3', '5', '%', '4', '3', '%', '6', 'a', '%', '4', '5', '%', '7', '7', '%', '4', 'd', '%', '5', '1', '%', '6', 'f', '%', '7', '8', '%', '4', 'd', '%', '4', '4', '%', '6', '7', '%', '4', 'b', '%', '4', 'f', '%', '5', '4', '%', '6', 'b', '%', '4', 'b', '%', '4', 'd', '%', '5', '4', '%', '4', '5', '%', '7', '8', '%', '4', '3', '%', '6', 'a', '%', '4', '5', '%', '7', '7', '%', '4', 'f', '%', '5', '1', '%', '6', 'f', '%', '7', '8', '%', '4', 'd', '%', '4', '4', '%', '4', '5', '%', '4', 'b', '%', '4', 'd', '%', '5', '4', '%', '4', '5', '%', '3', '2', '%', '4', '3', '%', '6', 'a', '%', '4', '5', '%', '7', '8', '%', '4', 'd', '%', '5', '1', '%', '6', 'f', '%', '7', '8', '%', '4', 'd', '%', '5', '4', '%', '5', '5', '%', '4', 'b', '%', '4', 'd', '%', '5', '4', '%', '4', '1', '%', '3', '0', '%', '4', '3', '%', '6', 'a', '%', '4', '5', '%', '7', '7', '%', '4', 'e', '%', '5', '1', '%', '6', 'f', '%', '7', '8', '%', '4', 'd', '%', '6', 'a', '%', '4', '5', '%', '4', 'b', '%', '4', 'f', '%', '5', '4', '%', '6', '3', '%', '4', 'b', '%', '4', 'd', '%', '5', '4', '%', '4', '5', '%', '7', '7', '%', '4', '3', '%', '6', 'a', '%', '6', 'b', '%', '3', '4', '%', '4', '3', '%', '6', 'a', '%', '6', 'b', '%', '3', '3', '%', '4', '3', '%', '6', 'a', '%', '4', '5', '%', '7', '8', '%', '4', 'e', '%', '4', '1', '%', '3', 'd', '%', '3', 'd']"</span></span><br><span class="line"></span><br><span class="line">a=<span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> range(len(d)):</span><br><span class="line">    a+=d[j]</span><br><span class="line">a</span><br><span class="line"><span class="comment"># %4d%54%45%35%43%6a%45%77%4d%51%6f%78%4d%44%67%4b%4f%54%6b%4b%4d%54%45%78%43%6a%45%77%4f%51%6f%78%4d%44%45%4b%4d%54%45%32%43%6a%45%78%4d%51%6f%78%4d%54%55%4b%4d%54%41%30%43%6a%45%77%4e%51%6f%78%4d%6a%45%4b%4f%54%63%4b%4d%54%45%77%43%6a%6b%34%43%6a%6b%33%43%6a%45%78%4e%41%3d%3d</span></span><br></pre></td></tr></table></figure><h4 id="ASCII编码转URL编码"><a href="#ASCII编码转URL编码" class="headerlink" title="ASCII编码转URL编码"></a>ASCII编码转URL编码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> unquote</span><br><span class="line">a=<span class="string">'%4d%54%45%35%43%6a%45%77%4d%51%6f%78%4d%44%67%4b%4f%54%6b%4b%4d%54%45%78%43%6a%45%77%4f%51%6f%78%4d%44%45%4b%4d%54%45%32%43%6a%45%78%4d%51%6f%78%4d%54%55%4b%4d%54%41%30%43%6a%45%77%4e%51%6f%78%4d%6a%45%4b%4f%54%63%4b%4d%54%45%77%43%6a%6b%34%43%6a%6b%33%43%6a%45%78%4e%41%3d%3d'</span></span><br><span class="line">test=unquote(a,<span class="string">'utf-8'</span>)</span><br><span class="line">test</span><br><span class="line"><span class="comment"># 'MTE5CjEwMQoxMDgKOTkKMTExCjEwOQoxMDEKMTE2CjExMQoxMTUKMTA0CjEwNQoxMjEKOTcKMTEwCjk4Cjk3CjExNA=='</span></span><br></pre></td></tr></table></figure><h4 id="Base64值解码"><a href="#Base64值解码" class="headerlink" title="Base64值解码"></a>Base64值解码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> base64</span><br><span class="line">test = <span class="string">'MTE5CjEwMQoxMDgKOTkKMTExCjEwOQoxMDEKMTE2CjExMQoxMTUKMTA0CjEwNQoxMjEKOTcKMTEwCjk4Cjk3CjExNA=='</span></span><br><span class="line">data = base64.b64decode(test)</span><br><span class="line">data</span><br><span class="line"><span class="string">b'119\n101\n108\n99\n111\n109\n101\n116\n111\n115\n104\n105\n121\n97\n110\n98\n97\n114'</span></span><br></pre></td></tr></table></figure><h4 id="ASCII编码"><a href="#ASCII编码" class="headerlink" title="ASCII编码"></a>ASCII编码</h4><p>对比ASCII表，可得</p><p>welcometoshiyanbar</p><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\c2fdfc039245d688c56332adacc27d1ed21b2451.jpg" alt="img"></p></div><blockquote><p>b = 123<br>bin(int(b))<br>‘0b1111011’<br>oct(int(b))<br>‘0o173’<br>hex(int(b))<br>‘0x7b’<br>int(b)</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;题目&quot;&gt;&lt;a href=&quot;#题目&quot; class=&quot;headerlink&quot; title=&quot;题目&quot;&gt;&lt;/a&gt;题目&lt;/h3&gt;&lt;p&gt;Decode&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;0x25346425353425343525333525343325366125343
      
    
    </summary>
    
      <category term="实验吧" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/categories/%E5%AE%9E%E9%AA%8C%E5%90%A7/"/>
    
    
      <category term="密码学" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
      <category term="other" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>实验吧（我喜欢的培根）</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/11/2018-11-11-%E5%AE%9E%E9%AA%8C%E5%90%A7%EF%BC%88%E6%88%91%E5%96%9C%E6%AC%A2%E7%9A%84%E5%9F%B9%E6%A0%B9%EF%BC%89/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/11/2018-11-11-实验吧（我喜欢的培根）/</id>
    <published>2018-11-11T14:34:08.000Z</published>
    <updated>2018-11-15T16:12:16.411Z</updated>
    
    <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p>我喜欢的培根，key: CTF{}</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-- --- .-. ... . ..--.- .. ... ..--.- -.-. --- --- .-.. ..--.- -... ..- - ..--.- -... .- -.-. --- -. ..--.- .. ... ..--.- -.-. --- --- .-.. . .-. ..--.- -.. -.-. -.-. -.. -.-. -.-. -.-. -.. -.. -.. -.-. -.. -.-. -.-. -.-. -.. -.. -.-. -.-. -.-. -.-. -.-. -.-. -.-. -.-. -.-. -.. -.. -.-. -.. -.-. -.-. -.-. -.-. -.. -.-. -.-. -.-. -.-. -.-. / -.-. -.. -.-. -.-. -.-. -.. -.-. -.-. -.. -.-. / -.-. -.-. -.-. -.. -.-. -.-. -.. -.. -.. -.-. -.-. -.. -.. -.. -.-. -.-. -.. -.-. -.. -..</span><br></pre></td></tr></table></figure><h3 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h3><h4 id="莫斯密码"><a href="#莫斯密码" class="headerlink" title="莫斯密码"></a>莫斯密码</h4><p>自己编写一个morse解码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">Title:MorseCode</span></span><br><span class="line"><span class="string">Author:PinkSmallFan</span></span><br><span class="line"><span class="string">Type:crypto</span></span><br><span class="line"><span class="string">Detail:莫斯密码</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">morse</span><span class="params">(lstr)</span>:</span></span><br><span class="line">    flag = <span class="string">''</span></span><br><span class="line">    data = lstr.split(<span class="string">' '</span>)</span><br><span class="line">    dict = &#123;<span class="string">'.-'</span>: <span class="string">'A'</span>,</span><br><span class="line">            <span class="string">'-...'</span>: <span class="string">'B'</span>,</span><br><span class="line">            <span class="string">'-.-.'</span>: <span class="string">'C'</span>,</span><br><span class="line">            <span class="string">'-..'</span>:<span class="string">'D'</span>,</span><br><span class="line">            <span class="string">'.'</span>:<span class="string">'E'</span>,</span><br><span class="line">            <span class="string">'..-.'</span>:<span class="string">'F'</span>,</span><br><span class="line">            <span class="string">'--.'</span>: <span class="string">'G'</span>,</span><br><span class="line">            <span class="string">'....'</span>: <span class="string">'H'</span>,</span><br><span class="line">            <span class="string">'..'</span>: <span class="string">'I'</span>,</span><br><span class="line">            <span class="string">'.---'</span>:<span class="string">'J'</span>,</span><br><span class="line">            <span class="string">'-.-'</span>: <span class="string">'K'</span>,</span><br><span class="line">            <span class="string">'.-..'</span>: <span class="string">'L'</span>,</span><br><span class="line">            <span class="string">'--'</span>: <span class="string">'M'</span>,</span><br><span class="line">            <span class="string">'-.'</span>: <span class="string">'N'</span>,</span><br><span class="line">            <span class="string">'---'</span>: <span class="string">'O'</span>,</span><br><span class="line">            <span class="string">'.--.'</span>: <span class="string">'P'</span>,</span><br><span class="line">            <span class="string">'--.-'</span>: <span class="string">'Q'</span>,</span><br><span class="line">            <span class="string">'.-.'</span>: <span class="string">'R'</span>,</span><br><span class="line">            <span class="string">'...'</span>: <span class="string">'S'</span>,</span><br><span class="line">            <span class="string">'-'</span>: <span class="string">'T'</span>,</span><br><span class="line">            <span class="string">'..-'</span>: <span class="string">'U'</span>,</span><br><span class="line">            <span class="string">'...-'</span>: <span class="string">'V'</span>,</span><br><span class="line">            <span class="string">'.--'</span>: <span class="string">'W'</span>,</span><br><span class="line">            <span class="string">'-..-'</span>: <span class="string">'X'</span>,</span><br><span class="line">            <span class="string">'-.--'</span>: <span class="string">'Y'</span>,</span><br><span class="line">            <span class="string">'--..'</span>: <span class="string">'Z'</span>,</span><br><span class="line">            <span class="string">'.----'</span>: <span class="string">'1'</span>,</span><br><span class="line">            <span class="string">'..---'</span>: <span class="string">'2'</span>,</span><br><span class="line">            <span class="string">'...--'</span>: <span class="string">'3'</span>,</span><br><span class="line">            <span class="string">'....-'</span>: <span class="string">'4'</span>,</span><br><span class="line">            <span class="string">'.....'</span>: <span class="string">'5'</span>,</span><br><span class="line">            <span class="string">'-....'</span>: <span class="string">'6'</span>,</span><br><span class="line">            <span class="string">'--...'</span>: <span class="string">'7'</span>,</span><br><span class="line">            <span class="string">'---..'</span>: <span class="string">'8'</span>,</span><br><span class="line">            <span class="string">'----.'</span>: <span class="string">'9'</span>,</span><br><span class="line">            <span class="string">'-----'</span>: <span class="string">'0'</span>,</span><br><span class="line">            <span class="string">'..--..'</span>: <span class="string">'?'</span>,</span><br><span class="line">            <span class="string">'-..-.'</span>: <span class="string">'/'</span>,</span><br><span class="line">            <span class="string">'-.--.-'</span>: <span class="string">'()'</span>,</span><br><span class="line">            <span class="string">'-....-'</span>: <span class="string">'-'</span>,</span><br><span class="line">            <span class="string">'.-.-.-'</span>: <span class="string">'.'</span></span><br><span class="line">            &#125;;</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">        flag+=dict[item]</span><br><span class="line">    <span class="keyword">return</span> flag</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(lstr)</span>:</span></span><br><span class="line">    print(lstr)</span><br><span class="line">    result = morse(lstr)</span><br><span class="line">    print(result)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment">#  example</span></span><br><span class="line"><span class="comment"># print('helloworld')</span></span><br><span class="line"><span class="comment"># abc='-- --- .-. ... . ..--.- .. ... ..--.- -.-. --- --- .-.. ..--.- -... ..- - ..--.- -... .- -.-. --- -. ..--.- .. ... ..--.- -.-. --- --- .-.. . .-. ..--.- -.. -.-. -.-. -.. -.-. -.-. -.-. -.. -.. -.. -.-. -.. -.-. -.-. -.-. -.. -.. -.-. -.-. -.-. -.-. -.-. -.-. -.-. -.-. -.-. -.. -.. -.-. -.. -.-. -.-. -.-. -.-. -.. -.-. -.-. -.-. -.-. -.-. / -.-. -.. -.-. -.-. -.-. -.. -.-. -.-. -.. -.-. / -.-. -.-. -.-. -.. -.-. -.-. -.. -.. -.. -.-. -.-. -.. -.. -.. -.-. -.-. -.. -.-. -.. -..'</span></span><br><span class="line"><span class="comment"># main(abc)</span></span><br><span class="line"><span class="comment"># result为MORSE..--.-IS..--.-COOL..--.-BUT..--.-BACON..--.-IS..--.-COOLER..--.-DCCDCCCDDDCDCCCDDCCCCCCCCCDDCDCCCCDCCCCC/CDCCCDCCDC/CCCDCCDDDCCDDDCCDCDD</span></span><br></pre></td></tr></table></figure><h4 id="培根密码"><a href="#培根密码" class="headerlink" title="培根密码"></a>培根密码</h4><div class="article-bounded"><div class="article-table"><table><tbody><tr><td>A/a</td><td>aaaaa</td><td>H/h</td><td>aabbb</td><td>O/o</td><td>abbba</td><td>V/v</td><td>babab</td></tr><tr><td>B/b</td><td>aaaab</td><td>I/i</td><td>abaaa</td><td>P/p</td><td>abbbb</td><td>W/w</td><td>babba</td></tr><tr><td>C/c</td><td>aaaba</td><td>J/j</td><td>abaab</td><td>Q/q</td><td>baaaa</td><td>X/x</td><td>babbb</td></tr><tr><td>D/d</td><td>aaabb</td><td>K/k</td><td>ababa</td><td>R/r</td><td>baaab</td><td>Y/y</td><td>bbaaa</td></tr><tr><td>E/e</td><td>aabaa</td><td>L/l</td><td>ababb</td><td>S/s</td><td>baaba</td><td>Z/z</td><td>bbaab</td></tr><tr><td>F/f</td><td>aabab</td><td>M/m</td><td>abbaa</td><td>T/t</td><td>baabb</td><td></td><td></td></tr><tr><td>G/g</td><td>aabba</td><td>N/n</td><td>abbab</td><td>U/u</td><td>babaa</td><td></td></tr></tbody></table></div></div><p>将DCCDCCCDDDCDCCCDDCCCCCCCCCDDCDCCCCDCCCCC/CDCCCDCCDC/CCCDCCDDDCCDDDCCDCDD去掉反斜杠，五个为一组，D-&gt;a，C-&gt;b，进行培根密码解密</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">Title:PeigenCode</span></span><br><span class="line"><span class="string">Author:PinkSmallFan</span></span><br><span class="line"><span class="string">Type:crypto</span></span><br><span class="line"><span class="string">Detail:培根密码</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">peigenDe</span><span class="params">(lstr)</span>:</span></span><br><span class="line">dict = &#123;<span class="string">'aaaaa'</span>: <span class="string">'A'</span>,</span><br><span class="line">            <span class="string">'aaaab'</span>: <span class="string">'B'</span>,</span><br><span class="line">            <span class="string">'aaaba'</span>: <span class="string">'C'</span>,</span><br><span class="line">            <span class="string">'aaabb'</span>: <span class="string">'D'</span>,</span><br><span class="line">    <span class="string">'aabaa'</span>: <span class="string">'E'</span>,</span><br><span class="line">    <span class="string">'aabab'</span>: <span class="string">'F'</span>,</span><br><span class="line">    <span class="string">'aabba'</span>: <span class="string">'G'</span>,</span><br><span class="line"><span class="string">'aabbb'</span>: <span class="string">'H'</span>,</span><br><span class="line">    <span class="string">'abaaa'</span>: <span class="string">'I'</span>,</span><br><span class="line">    <span class="string">'abaab'</span>: <span class="string">'J'</span>,</span><br><span class="line">    <span class="string">'ababa'</span>: <span class="string">'K'</span>,</span><br><span class="line">    <span class="string">'ababb'</span>: <span class="string">'L'</span>,</span><br><span class="line">    <span class="string">'abbaa'</span>: <span class="string">'M'</span>,</span><br><span class="line">    <span class="string">'abbab'</span>: <span class="string">'N'</span>,</span><br><span class="line">    <span class="string">'abbba'</span>: <span class="string">'O'</span>,</span><br><span class="line">    <span class="string">'abbbb'</span>: <span class="string">'P'</span>,</span><br><span class="line">    <span class="string">'baaaa'</span>: <span class="string">'Q'</span>,</span><br><span class="line">    <span class="string">'baaab'</span>: <span class="string">'R'</span>,</span><br><span class="line">    <span class="string">'baaba'</span>: <span class="string">'S'</span>,</span><br><span class="line">    <span class="string">'baabb'</span>: <span class="string">'T'</span>,</span><br><span class="line">    <span class="string">'babaa'</span>: <span class="string">'U'</span>,</span><br><span class="line">    <span class="string">'babab'</span>: <span class="string">'V'</span>,</span><br><span class="line">    <span class="string">'babba'</span>: <span class="string">'W'</span>,</span><br><span class="line">    <span class="string">'babbb'</span>: <span class="string">'X'</span>,</span><br><span class="line">    <span class="string">'bbaaa'</span>: <span class="string">'Y'</span>,</span><br><span class="line">    <span class="string">'bbaab'</span>: <span class="string">'Z'</span></span><br><span class="line">    &#125;;</span><br><span class="line">size = len(lstr)</span><br><span class="line">lenght = <span class="number">5</span></span><br><span class="line">returnStr = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(round(size/lenght)):</span><br><span class="line">result=lstr[lenght*i:lenght*(i+<span class="number">1</span>)].lower()</span><br><span class="line">returnStr += dict[result]</span><br><span class="line"><span class="keyword">return</span> returnStr</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(lstr)</span>:</span></span><br><span class="line">print(lstr)</span><br><span class="line">result = peigenDe(lstr)</span><br><span class="line">print(result)</span><br><span class="line"><span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment"># example</span></span><br><span class="line"><span class="comment"># data = 'baabaaabbbabaaabbaaaaaaaaabbabaaaabaaaaaabaaabaabaaaabaabbbaabbbaababb'</span></span><br><span class="line"><span class="comment"># main(data)</span></span><br><span class="line"><span class="comment"># SHIYANBAISCOOL</span></span><br></pre></td></tr></table></figure><p>PS：注意，之前含有的反斜杠，为空格，需要额外添加空格</p><p>最后大小写试一试就ok啦~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;题目&quot;&gt;&lt;a href=&quot;#题目&quot; class=&quot;headerlink&quot; title=&quot;题目&quot;&gt;&lt;/a&gt;题目&lt;/h3&gt;&lt;p&gt;我喜欢的培根，key: CTF{}&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td c
      
    
    </summary>
    
      <category term="实验吧" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/categories/%E5%AE%9E%E9%AA%8C%E5%90%A7/"/>
    
    
      <category term="密码学" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
      <category term="other" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>实验吧（困在栅栏里的爱）</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/11/2018-11-11-%E5%AE%9E%E9%AA%8C%E5%90%A7%EF%BC%88%E5%9B%B0%E5%9C%A8%E6%A0%85%E6%A0%8F%E9%87%8C%E7%9A%84%E7%88%B1%EF%BC%89/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/11/2018-11-11-实验吧（困在栅栏里的爱）/</id>
    <published>2018-11-11T08:56:50.000Z</published>
    <updated>2018-11-15T16:12:10.682Z</updated>
    
    <content type="html"><![CDATA[<h2 id="困在栅栏里的爱"><a href="#困在栅栏里的爱" class="headerlink" title="困在栅栏里的爱"></a>困在栅栏里的爱</h2><h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p>最近一直在好奇一个问题，QWE到底等不等于ABC？</p><p>-.- .. –.- .-.. .– - ..-. -.-. –.- –. -. … — — </p><p>flag格式：CTF{xxx}</p><p>题目地址：<a href="http://www.shiyanbar.com/ctf/1917" target="_blank" rel="noopener">http://www.shiyanbar.com/ctf/1917</a></p><h3 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h3><h4 id="莫斯密码"><a href="#莫斯密码" class="headerlink" title="莫斯密码"></a>莫斯密码</h4><p>自己编写一个morse解码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">Title:MorseCode</span></span><br><span class="line"><span class="string">Author:PinkSmallFan</span></span><br><span class="line"><span class="string">Type:crypto</span></span><br><span class="line"><span class="string">Detail:莫斯密码</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">morse</span><span class="params">(lstr)</span>:</span></span><br><span class="line">    flag = <span class="string">''</span></span><br><span class="line">    data = lstr.split(<span class="string">' '</span>)</span><br><span class="line">    dict = &#123;<span class="string">'.-'</span>: <span class="string">'A'</span>,</span><br><span class="line">            <span class="string">'-...'</span>: <span class="string">'B'</span>,</span><br><span class="line">            <span class="string">'-.-.'</span>: <span class="string">'C'</span>,</span><br><span class="line">            <span class="string">'-..'</span>:<span class="string">'D'</span>,</span><br><span class="line">            <span class="string">'.'</span>:<span class="string">'E'</span>,</span><br><span class="line">            <span class="string">'..-.'</span>:<span class="string">'F'</span>,</span><br><span class="line">            <span class="string">'--.'</span>: <span class="string">'G'</span>,</span><br><span class="line">            <span class="string">'....'</span>: <span class="string">'H'</span>,</span><br><span class="line">            <span class="string">'..'</span>: <span class="string">'I'</span>,</span><br><span class="line">            <span class="string">'.---'</span>:<span class="string">'J'</span>,</span><br><span class="line">            <span class="string">'-.-'</span>: <span class="string">'K'</span>,</span><br><span class="line">            <span class="string">'.-..'</span>: <span class="string">'L'</span>,</span><br><span class="line">            <span class="string">'--'</span>: <span class="string">'M'</span>,</span><br><span class="line">            <span class="string">'-.'</span>: <span class="string">'N'</span>,</span><br><span class="line">            <span class="string">'---'</span>: <span class="string">'O'</span>,</span><br><span class="line">            <span class="string">'.--.'</span>: <span class="string">'P'</span>,</span><br><span class="line">            <span class="string">'--.-'</span>: <span class="string">'Q'</span>,</span><br><span class="line">            <span class="string">'.-.'</span>: <span class="string">'R'</span>,</span><br><span class="line">            <span class="string">'...'</span>: <span class="string">'S'</span>,</span><br><span class="line">            <span class="string">'-'</span>: <span class="string">'T'</span>,</span><br><span class="line">            <span class="string">'..-'</span>: <span class="string">'U'</span>,</span><br><span class="line">            <span class="string">'...-'</span>: <span class="string">'V'</span>,</span><br><span class="line">            <span class="string">'.--'</span>: <span class="string">'W'</span>,</span><br><span class="line">            <span class="string">'-..-'</span>: <span class="string">'X'</span>,</span><br><span class="line">            <span class="string">'-.--'</span>: <span class="string">'Y'</span>,</span><br><span class="line">            <span class="string">'--..'</span>: <span class="string">'Z'</span>,</span><br><span class="line">            <span class="string">'.----'</span>: <span class="string">'1'</span>,</span><br><span class="line">            <span class="string">'..---'</span>: <span class="string">'2'</span>,</span><br><span class="line">            <span class="string">'...--'</span>: <span class="string">'3'</span>,</span><br><span class="line">            <span class="string">'....-'</span>: <span class="string">'4'</span>,</span><br><span class="line">            <span class="string">'.....'</span>: <span class="string">'5'</span>,</span><br><span class="line">            <span class="string">'-....'</span>: <span class="string">'6'</span>,</span><br><span class="line">            <span class="string">'--...'</span>: <span class="string">'7'</span>,</span><br><span class="line">            <span class="string">'---..'</span>: <span class="string">'8'</span>,</span><br><span class="line">            <span class="string">'----.'</span>: <span class="string">'9'</span>,</span><br><span class="line">            <span class="string">'-----'</span>: <span class="string">'0'</span>,</span><br><span class="line">            <span class="string">'..--..'</span>: <span class="string">'?'</span>,</span><br><span class="line">            <span class="string">'-..-.'</span>: <span class="string">'/'</span>,</span><br><span class="line">            <span class="string">'-.--.-'</span>: <span class="string">'()'</span>,</span><br><span class="line">            <span class="string">'-....-'</span>: <span class="string">'-'</span>,</span><br><span class="line">            <span class="string">'.-.-.-'</span>: <span class="string">'.'</span></span><br><span class="line">            &#125;;</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">        flag+=dict[item]</span><br><span class="line">    <span class="keyword">return</span> flag</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(lstr)</span>:</span></span><br><span class="line">    print(lstr)</span><br><span class="line">    result = morse(lstr)</span><br><span class="line">    print(result)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment">#  example</span></span><br><span class="line"><span class="comment"># print('helloworld')</span></span><br><span class="line"><span class="comment"># abc='-.- .. --.- .-.. .-- - ..-. -.-. --.- --. -. ... --- ---'</span></span><br><span class="line"><span class="comment"># main(abc)</span></span><br><span class="line"><span class="comment"># result为KIQLWTFCQGNSOO</span></span><br></pre></td></tr></table></figure><h4 id="替换密码"><a href="#替换密码" class="headerlink" title="替换密码"></a>替换密码</h4><p>qwe替换abc，即键盘的qwert…键盘从上到下，从左到右转换</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">Title:QWECode</span></span><br><span class="line"><span class="string">Author:PinkSmallFan</span></span><br><span class="line"><span class="string">Type:crypto</span></span><br><span class="line"><span class="string">Detail:替换密码</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">qweDecode</span><span class="params">(lstr)</span>:</span></span><br><span class="line">    qweData = <span class="string">'QWERTYUIOPASDFGHJKLZXCVBNM'</span></span><br><span class="line">    abcData = <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span></span><br><span class="line">    returnStr = <span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span> data <span class="keyword">in</span> lstr:</span><br><span class="line">        returnStr += abcData[qweData.index(data.upper())]</span><br><span class="line">    <span class="keyword">return</span> returnStr</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(lstr)</span>:</span></span><br><span class="line">    print(lstr)</span><br><span class="line">    result = qweDecode(lstr)</span><br><span class="line">    print(result)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment"># example</span></span><br><span class="line"><span class="comment"># data='KIQLWTFCQGNSOO'</span></span><br><span class="line"><span class="comment"># main(data)</span></span><br><span class="line"><span class="comment"># RHASBENVAOYLII</span></span><br></pre></td></tr></table></figure><h4 id="栏删密码"><a href="#栏删密码" class="headerlink" title="栏删密码"></a>栏删密码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">Title:FenceCode</span></span><br><span class="line"><span class="string">Author:PinkSmallFan</span></span><br><span class="line"><span class="string">Type:crypto</span></span><br><span class="line"><span class="string">Detail:栏删密码</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fenceDecode</span><span class="params">(lstr)</span>:</span></span><br><span class="line"></span><br><span class="line">    decodeStr = <span class="string">''</span></span><br><span class="line">    returnStr = <span class="string">''</span></span><br><span class="line">    fenceSize = <span class="number">1</span></span><br><span class="line">    encodeSize = len(lstr)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> r <span class="keyword">in</span> range(round(encodeSize/<span class="number">2</span>)):</span><br><span class="line">        fenceSize = r+<span class="number">1</span></span><br><span class="line">        decodeStr = <span class="string">''</span></span><br><span class="line">        <span class="keyword">for</span> f <span class="keyword">in</span> range(fenceSize):</span><br><span class="line">            <span class="keyword">for</span> e <span class="keyword">in</span> range(encodeSize):</span><br><span class="line">                <span class="keyword">if</span>((f + e) % fenceSize == <span class="number">0</span>):</span><br><span class="line">                    decodeStr += lstr[e]</span><br><span class="line"></span><br><span class="line">        returnStr += str(fenceSize) + <span class="string">':'</span> + decodeStr + <span class="string">'\n'</span></span><br><span class="line">    <span class="keyword">return</span> returnStr</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(lstr)</span>:</span></span><br><span class="line">    print(lstr)</span><br><span class="line">    result = fenceDecode(lstr)</span><br><span class="line">    print(result)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myround</span><span class="params">(num)</span>:</span></span><br><span class="line">   <span class="keyword">return</span> int(num)+int(<span class="number">2</span>*num)%<span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># example</span></span><br><span class="line"><span class="comment"># data='RHASBENVAOYLII'</span></span><br><span class="line"><span class="comment"># main(data)</span></span><br><span class="line"><span class="comment"># RHASBENVAOYLII</span></span><br><span class="line"><span class="comment"># 1:RHASBENVAOYLII</span></span><br><span class="line"><span class="comment"># 2:RABNAYIHSEVOLI</span></span><br><span class="line"><span class="comment"># 3:RSNOIAEALHBVYI</span></span><br><span class="line"><span class="comment"># 4:RBAISVLANYHEOI</span></span><br><span class="line"><span class="comment"># 5:REYBOSAIAVIHNL</span></span><br><span class="line"><span class="comment"># 6:RNIELBYSOAAHVI</span></span><br><span class="line"><span class="comment"># 7:RVNIEIBLSYAOHA</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># test</span></span><br><span class="line"><span class="comment"># print(myround(6.9/2))</span></span><br><span class="line"><span class="comment"># print(format(5/2, '.1f'))</span></span><br><span class="line"><span class="comment"># print(round(2.5))</span></span><br></pre></td></tr></table></figure><h4 id="倒序"><a href="#倒序" class="headerlink" title="倒序"></a>倒序</h4><p>可以找到栏删密码中，第二个合适，即ILOVESHIYANBAR，接着大小写都试一下，就完成啦~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;困在栅栏里的爱&quot;&gt;&lt;a href=&quot;#困在栅栏里的爱&quot; class=&quot;headerlink&quot; title=&quot;困在栅栏里的爱&quot;&gt;&lt;/a&gt;困在栅栏里的爱&lt;/h2&gt;&lt;h3 id=&quot;题目&quot;&gt;&lt;a href=&quot;#题目&quot; class=&quot;headerlink&quot; title=&quot;题
      
    
    </summary>
    
      <category term="实验吧" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/categories/%E5%AE%9E%E9%AA%8C%E5%90%A7/"/>
    
    
      <category term="密码学" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
      <category term="other" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>RSA</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/09/2018-11-9-RSA/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/09/2018-11-9-RSA/</id>
    <published>2018-11-09T15:42:42.000Z</published>
    <updated>2018-11-15T16:12:43.059Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><h3 id="gmpy2"><a href="#gmpy2" class="headerlink" title="gmpy2"></a>gmpy2</h3><h4 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h4><blockquote><p>import gmpy2<br>divm(…)<br>divm(a, b, m) returns x such that b <em> x == a modulo m. Raises a ZeroDivisionError exception if no such value x exists.<br>invert(…)<br>invert(x, m) returns y such that x </em> y == 1 modulo m, or 0 if no such y exists.</p><p><strong>mpz(…)</strong></p><p>mpz() returns a new <em>mpz</em> object set to 0.</p><p>mpz(n) returns a new <em>mpz</em> object from a numeric value <em>n</em>. If <em>n</em> is not an integer, it will be truncated to an integer.</p><p>mpz(s[, base=0]) returns a new <em>mpz</em> object from a string <em>s</em> made of digits in the given base. If base = 0, thn binary, octal, or hex Python strings are recognized by leading 0b, 0o, or 0x characters. Otherwise the string is assumed to be decimal. Values for base can range between 2 and 62.</p></blockquote><h4 id="常用例子"><a href="#常用例子" class="headerlink" title="常用例子"></a>常用例子</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 已知p、q、e，求d</span></span><br><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line">p =gmpy2.mpz(<span class="number">17</span>)</span><br><span class="line">q =gmpy2.mpz(<span class="number">5</span>)</span><br><span class="line">e =gmpy2.mpz(<span class="number">7</span>)</span><br><span class="line">phi_n= (p - <span class="number">1</span>) * (q - <span class="number">1</span>)</span><br><span class="line">d = gmpy2.invert(e, phi_n)</span><br><span class="line">print(<span class="string">"d is:"</span>)</span><br><span class="line"><span class="keyword">print</span> (d)</span><br></pre></td></tr></table></figure><h3 id="pow"><a href="#pow" class="headerlink" title="pow"></a>pow</h3><h4 id="引用-1"><a href="#引用-1" class="headerlink" title="引用"></a>引用</h4><blockquote><p>pow(…)<br>pow(x, y, m) returns n such that x ^ y == 1 modulo m. Raises a ZeroDivisionError exception if no such value n exists.</p></blockquote><h4 id="常用例子-1"><a href="#常用例子-1" class="headerlink" title="常用例子"></a>常用例子</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line">p =gmpy2.mpz(<span class="number">9648423029010515676590551740010426534945737639235739800643989352039852507298491399561035009163427050370107570733633350911691280297777160200625281665378483</span>)</span><br><span class="line">q =gmpy2.mpz(<span class="number">11874843837980297032092405848653656852760910154543380907650040190704283358909208578251063047732443992230647903887510065547947313543299303261986053486569407</span>)</span><br><span class="line">e =gmpy2.mpz(<span class="number">65537</span>)</span><br><span class="line">phi_n= (p - <span class="number">1</span>) * (q - <span class="number">1</span>)</span><br><span class="line">n=p*q</span><br><span class="line">d = gmpy2.invert(e, phi_n)</span><br><span class="line">c=gmpy2.mpz(<span class="number">83208298995174604174773590298203639360540024871256126892889661345742403314929861939100492666605647316646576486526217457006376842280869728581726746401583705899941768214138742259689334840735633553053887641847651173776251820293087212885670180367406807406765923638973161375817392737747832762751690104423869019034</span>)</span><br><span class="line">m=pow(c,d,n)</span><br><span class="line">print(<span class="string">"Message is :"</span>)</span><br><span class="line">print(m)</span><br></pre></td></tr></table></figure><p><a href="https://www.freebuf.com/articles/others-articles/166049.html" target="_blank" rel="noopener">引用地址</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Python&quot;&gt;&lt;a href=&quot;#Python&quot; class=&quot;headerlink&quot; title=&quot;Python&quot;&gt;&lt;/a&gt;Python&lt;/h2&gt;&lt;h3 id=&quot;gmpy2&quot;&gt;&lt;a href=&quot;#gmpy2&quot; class=&quot;headerlink&quot; title=
      
    
    </summary>
    
    
      <category term="密码学" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>微服务实践笔记</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/08/2018-11-8-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%9E%E8%B7%B5%E7%AC%94%E8%AE%B0/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/08/2018-11-8-微服务实践笔记/</id>
    <published>2018-11-08T15:51:02.000Z</published>
    <updated>2018-12-13T16:35:48.822Z</updated>
    
    <content type="html"><![CDATA[<ul><li style="list-style: none"><input type="checkbox" checked> 【宿舍】使用SpringBoot快速构建RESTful API应用</li><li style="list-style: none"><input type="checkbox"> 【公司】业务平台Spring改为SpringBoot项目</li><li style="list-style: none"><input type="checkbox"> 【公司】SpringBoot的单元测试</li><li style="list-style: none"><input type="checkbox" checked> 【宿舍】SpringBoot的热部署等配置</li><li style="list-style: none"><input type="checkbox" checked> 【宿舍】SpringCloud的初体验</li><li style="list-style: none"><input type="checkbox"> 【公司】建立activeMQ，并与redis做结合</li><li style="list-style: none"><input type="checkbox"> 【公司】将SpringBoot项目拆分为微服务</li><li style="list-style: none"><input type="checkbox" checked> 【宿舍】实现将微服务注册到EurkaServer上</li><li style="list-style: none"><input type="checkbox" checked> 【宿舍】SpringBoot容错处理搭建Hystrix</li><li style="list-style: none"><input type="checkbox" checked> 【宿舍】使用Ribbin实现客户端负载均衡</li><li style="list-style: none"><input type="checkbox"> 【宿舍】实现Hystrix Dashboard可视化监控数据</li><li style="list-style: none"><input type="checkbox"> 【公司】Elasticsearch日志存储系统搭建</li><li style="list-style: none"><input type="checkbox"> 【公司】Logstash日志收集系统搭建</li><li style="list-style: none"><input type="checkbox"> 【公司】Kiaabna日志查询系统搭建</li><li style="list-style: none"><input type="checkbox"> 【宿舍】ELK日志中心搭建</li><li style="list-style: none"><input type="checkbox"> 【宿舍】自主搭建系统监控中心</li><li style="list-style: none"><input type="checkbox"> 【宿舍】Dubbo的初体验</li><li style="list-style: none"><input type="checkbox"> 【宿舍】jenkins的持续集成搭建</li><li style="list-style: none"><input type="checkbox"> 【宿舍】Docker镜像下载与构建</li><li style="list-style: none"><input type="checkbox"> 【宿舍】使用Docker Registry打造私有镜像仓库</li><li style="list-style: none"><input type="checkbox"> 【宿舍】使用Spring Cloud Bus实现配置的自动刷新</li></ul><h2 id="SpringBoot快速构建RESTful-API应用"><a href="#SpringBoot快速构建RESTful-API应用" class="headerlink" title="SpringBoot快速构建RESTful API应用"></a>SpringBoot快速构建RESTful API应用</h2><h3 id="搭建SpringBoot项目"><a href="#搭建SpringBoot项目" class="headerlink" title="搭建SpringBoot项目"></a>搭建SpringBoot项目</h3><h4 id="pom依赖"><a href="#pom依赖" class="headerlink" title="pom依赖"></a>pom依赖</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.spring<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>example<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>example<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.restdocs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-restdocs-mockmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="bo实体类"><a href="#bo实体类" class="headerlink" title="bo实体类"></a>bo实体类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">long</span> id, String content)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id=id;</span><br><span class="line">        <span class="keyword">this</span>.content=content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getId</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Control层-REST-GET-POST-PUT-DELETE"><a href="#Control层-REST-GET-POST-PUT-DELETE" class="headerlink" title="Control层(REST, GET/POST/PUT/DELETE)"></a>Control层(REST, GET/POST/PUT/DELETE)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String template = <span class="string">"Hello, %s"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> AtomicLong counter = <span class="keyword">new</span> AtomicLong();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/greeting"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">greeting</span><span class="params">(@RequestParam(value = <span class="string">"name"</span>, defaultValue = <span class="string">"world"</span>)</span>String name)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(counter.incrementAndGet(), String.format(template, name));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/users"</span>)</span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;List&lt;User&gt;&gt; getUser()&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; users = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">"Bob"</span>));  <span class="comment">//counter.incrementAndGet()</span></span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="number">2</span>, <span class="string">"Tom"</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(users, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/register"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title">register</span><span class="params">(@Valid User user, BindingResult bindingResult)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(bindingResult.hasErrors())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(bindingResult.getFieldError().getDefaultMessage(),</span><br><span class="line">                    HttpStatus.BAD_REQUEST);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(<span class="string">"success"</span>, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title">updateUser</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        User uUser = user;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(uUser, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/delete"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">deleteUser</span><span class="params">(<span class="keyword">long</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity(HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试例程"><a href="#测试例程" class="headerlink" title="测试例程"></a>测试例程</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">testUser</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MockMvc mockMvc = MockMvcBuilders.standaloneSetup(<span class="keyword">new</span> UserController()).build();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetUsers</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        mockMvc.perform(MockMvcRequestBuilders.get(<span class="string">"/users"</span>))</span><br><span class="line">                .andExpect(MockMvcResultMatchers.status().isOk())</span><br><span class="line">                .andExpect(MockMvcResultMatchers.content().json(<span class="string">"[&#123;\"id\":1,\"content\":\"Bob\"&#125;,&#123;\"id\":2,\"content\":\"Tom\"&#125;]"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRegister</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        mockMvc.perform(MockMvcRequestBuilders.post(<span class="string">"/register"</span>)</span><br><span class="line">                .param(<span class="string">"id"</span>, <span class="string">"1"</span>)</span><br><span class="line">                .param(<span class="string">"content"</span>, <span class="string">"gaga"</span>))</span><br><span class="line">                .andExpect(MockMvcResultMatchers.status().isOk())</span><br><span class="line">                .andExpect(MockMvcResultMatchers.content().string(<span class="string">"success"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdateUser</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        mockMvc.perform(MockMvcRequestBuilders.put(<span class="string">"/update"</span>)</span><br><span class="line">                .param(<span class="string">"id"</span>, <span class="string">"1"</span>)</span><br><span class="line">                .param(<span class="string">"content"</span>, <span class="string">"tt"</span>))</span><br><span class="line">                .andExpect(MockMvcResultMatchers.status().isOk())</span><br><span class="line">                .andExpect(MockMvcResultMatchers.content().string(<span class="string">"&#123;\"id\":1,\"content\":\"tt\"&#125;"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        mockMvc.perform(MockMvcRequestBuilders.delete(<span class="string">"/delete"</span>)</span><br><span class="line">            .param(<span class="string">"id"</span>,<span class="string">"1"</span>))</span><br><span class="line">                .andExpect(MockMvcResultMatchers.status().isOk())</span><br><span class="line">                .andExpect(MockMvcResultMatchers.content().string(<span class="string">""</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="SpringBoot的热部署等配置"><a href="#SpringBoot的热部署等配置" class="headerlink" title="SpringBoot的热部署等配置"></a>SpringBoot的热部署等配置</h2><h3 id="pom依赖-1"><a href="#pom依赖-1" class="headerlink" title="pom依赖"></a>pom依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>true<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在bulid节点修改为</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- fork:如果没有该配置，这个devtools不会起作用，即应用不会restart --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">fork</span>&gt;</span>true<span class="tag">&lt;/<span class="name">fork</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="编辑器的自动构建"><a href="#编辑器的自动构建" class="headerlink" title="编辑器的自动构建"></a>编辑器的自动构建</h3><h4 id="IDEA"><a href="#IDEA" class="headerlink" title="IDEA"></a>IDEA</h4><ol><li>file ，Settings ，Build ,Execution,Deplment (ctrl+shift+alt+S)，选择Compiler，对“Build project automaticaly”打钩。</li><li>Shift+ALT+Ctrl+/ ，选择Registry，修改默认注册关系，找“complier.automake.allow.when.app.running”，打钩后选择Close</li></ol><h4 id="eclipse"><a href="#eclipse" class="headerlink" title="eclipse"></a>eclipse</h4><ol><li>导航栏，选择Build ，勾选Build Automaticaly</li></ol><h2 id="Spring-Cloud搭建Eureka"><a href="#Spring-Cloud搭建Eureka" class="headerlink" title="Spring Cloud搭建Eureka"></a>Spring Cloud搭建Eureka</h2><h3 id="搭建一个maven主工程project"><a href="#搭建一个maven主工程project" class="headerlink" title="搭建一个maven主工程project"></a>搭建一个maven主工程project</h3><h4 id="IDEA-1"><a href="#IDEA-1" class="headerlink" title="IDEA"></a>IDEA</h4><ol><li><p>File-new-project</p></li><li><p>选择maven项目</p></li></ol><h3 id="搭建一个服务注册中心的model工程"><a href="#搭建一个服务注册中心的model工程" class="headerlink" title="搭建一个服务注册中心的model工程"></a>搭建一个服务注册中心的model工程</h3><h4 id="IDEA-2"><a href="#IDEA-2" class="headerlink" title="IDEA"></a>IDEA</h4><ol><li>File-new-model</li><li>选择Spring initialir项目</li><li>选择Cloud Discovery-Eureka Server</li></ol><p>PS:因人而异， Group：com.example、Artifact：eurekaserver</p><h4 id="POM"><a href="#POM" class="headerlink" title="POM"></a>POM</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eurekaserver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>eurekaserver<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot eurekaServer<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Greenwich.M1<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span><span class="comment">&lt;!-- Version is important --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- fork:如果没有该配置，这个devtools不会起作用，即应用不会restart --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">fork</span>&gt;</span>true<span class="tag">&lt;/<span class="name">fork</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="启动服务注册中心"><a href="#启动服务注册中心" class="headerlink" title="启动服务注册中心"></a>启动服务注册中心</h4><ol><li>在对应Eurekaserver的Application中添加注解@EnableEurekaServer</li><li>启动应用</li><li>打开网页：<a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a></li><li>可以看到DS Replicas有一个localhost的工程</li></ol><h4 id="配置服务注册中心"><a href="#配置服务注册中心" class="headerlink" title="配置服务注册中心"></a>配置服务注册中心</h4><ol><li>将resources资源目录下，默认的application.properties改为application.yml</li><li>指定server</li><li>设置eureka.client.registerWithEureka与eureka.client.fetchRegistry为false</li><li>重新启动服务注册中心</li><li>可以看到DS Replicas，No instances available</li><li>application.yml</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8761</span></span><br><span class="line"></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">  instance:</span></span><br><span class="line"><span class="attr">    hostname:</span> <span class="string">localhost</span></span><br><span class="line"><span class="attr">  client:</span></span><br><span class="line"><span class="attr">    registerWithEureka:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    fetchRegistry:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    serviceUrl:</span></span><br><span class="line"><span class="attr">      defaultZone:</span> <span class="attr">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span></span><br></pre></td></tr></table></figure><ol start="7"><li>eurekaServerApplication(src-main-java下)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.eurekaserver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableEurekaServer</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaserverApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EurekaserverApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="搭建一个服务提供者的model工程"><a href="#搭建一个服务提供者的model工程" class="headerlink" title="搭建一个服务提供者的model工程"></a>搭建一个服务提供者的model工程</h3><h4 id="IDEA-3"><a href="#IDEA-3" class="headerlink" title="IDEA"></a>IDEA</h4><ol><li>File-new-model</li><li>选择Spring initialir项目</li><li>选择Cloud Discovery-Eureka Client</li></ol><h4 id="POM-1"><a href="#POM-1" class="headerlink" title="POM"></a>POM</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eurekaclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>eurekaclient<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Greenwich.M1<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- fork:如果没有该配置，这个devtools不会起作用，即应用不会restart --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">fork</span>&gt;</span>true<span class="tag">&lt;/<span class="name">fork</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="配置服务提供者"><a href="#配置服务提供者" class="headerlink" title="配置服务提供者"></a>配置服务提供者</h4><ol><li>将resources资源目录下，默认的application.properties改为application.yml</li><li>指定server</li><li>重新启动服务提供者（前提是已启动了服务注册中心）</li><li>可以看到DS Replicas，<strong>SERVICE-HELLOCLIENT</strong></li><li>application.yml</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">  instance:</span></span><br><span class="line"><span class="attr">    hostname:</span> <span class="string">localhost</span></span><br><span class="line"><span class="attr">  client:</span></span><br><span class="line"><span class="attr">    serviceUrl:</span></span><br><span class="line"><span class="attr">      defaultZone:</span> <span class="attr">http://$&#123;eureka.instance.hostname&#125;:8761/eureka/</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  application:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">service-helloClient</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8762</span></span><br></pre></td></tr></table></figure><ol start="6"><li>eurekaClientApplication(src-main-java下)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.eurekaclient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.EnableEurekaClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaclientApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EurekaclientApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;server.port&#125;"</span>)</span><br><span class="line">    String port;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"helloClient"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">helloClient</span><span class="params">(@RequestParam String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"helloWorld,client:"</span>+name+<span class="string">", port:"</span>+port;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="启动服务提供者"><a href="#启动服务提供者" class="headerlink" title="启动服务提供者"></a>启动服务提供者</h4><ol><li>启动服务提供者，8762端口启用</li><li>url输入：<a href="http://localhost:8762/helloClient?name=PinkSmallFan" target="_blank" rel="noopener">http://localhost:8762/helloClient?name=PinkSmallFan</a></li><li>显示：helloWorld,client:PinkSmallFan, port:8762</li></ol><h3 id="搭建一个负载均衡ribbon"><a href="#搭建一个负载均衡ribbon" class="headerlink" title="搭建一个负载均衡ribbon"></a>搭建一个负载均衡ribbon</h3><h4 id="IDEA-4"><a href="#IDEA-4" class="headerlink" title="IDEA"></a>IDEA</h4><ol><li><p>将一个实例配置为多个实例</p><p>1）选择应用运行的“Edit configuration”</p><p>2）在对应Spring Boot上，选择对应的项目，并取消“Single instance only”</p><p>3）启动项目</p><p>4）项目启动成功后，修改对应的端口</p><p>5）再次启动（两个不同端口的实例）</p></li><li><p>搭建一个spring-boot工程（参考搭建服务提供者）</p></li><li><p>pom继承父类pom文件</p></li></ol><h4 id="POM-2"><a href="#POM-2" class="headerlink" title="POM"></a>POM</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eurekaribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>eurekaribbon<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eurekaserver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Greenwich.M1<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="配置服务消费者"><a href="#配置服务消费者" class="headerlink" title="配置服务消费者"></a>配置服务消费者</h4><ol><li>将resources资源目录下，默认的application.properties改为application.yml</li><li>指定server</li><li>重新启动服务消费者者（前提是已启动了服务注册中心、服务提供者）</li><li>可以看到DS Replicas，SERVICE-HELLOCLIENT，<strong>SERVICE-RIBBON</strong></li><li>application.yml</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">  instance:</span></span><br><span class="line"><span class="attr">    hostname:</span> <span class="string">localhost</span></span><br><span class="line"><span class="attr">  client:</span></span><br><span class="line"><span class="attr">    serviceUrl:</span></span><br><span class="line"><span class="attr">      defaultZone:</span> <span class="attr">http://$&#123;eureka.instance.hostname&#125;:8761/eureka/</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  application:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">service-ribbon</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8764</span></span><br></pre></td></tr></table></figure><ol start="6"><li>eurekaRibbonApplication(src-main-java下)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.eurekaribbon;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.loadbalancer.LoadBalanced;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.EnableEurekaClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaribbonApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EurekaribbonApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span></span><br><span class="line">    <span class="function">RestTemplate <span class="title">restTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 这里选用了默认的策略：ZoneAvoidanceRule，复合判断server所在区域的性能和server的可用性选择server</span></span><br></pre></td></tr></table></figure><ol start="7"><li>配置一个Service</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.eurekaribbon;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(<span class="string">"http://SERVICE-HELLOCLIENT/helloClient?name="</span>+name, String.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="8"><li>配置一个Controller</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.eurekaribbon;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    TestService testService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(value=<span class="string">"/helloClient"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">helloClient</span><span class="params">(@RequestParam String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> testService.hello(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="配置负载均衡策略"><a href="#配置负载均衡策略" class="headerlink" title="配置负载均衡策略"></a>配置负载均衡策略</h4><h4 id="启动服务消费者"><a href="#启动服务消费者" class="headerlink" title="启动服务消费者"></a>启动服务消费者</h4><ol><li>启动服务消费者者，8764端口启用</li><li>url输入：<a href="http://localhost:8764/helloClient?name=PinkSmallFan" target="_blank" rel="noopener">http://localhost:8764/helloClient?name=PinkSmallFan</a></li><li>多次访问，交替显示：</li></ol><p>helloWorld,client:PinkSmallFan, port:8762 </p><p>helloWorld,client:PinkSmallFan, port:8763</p><h3 id="搭建一个服务消费者feign"><a href="#搭建一个服务消费者feign" class="headerlink" title="搭建一个服务消费者feign"></a>搭建一个服务消费者feign</h3><h4 id="IDEA-5"><a href="#IDEA-5" class="headerlink" title="IDEA"></a>IDEA</h4><ol><li><p>将一个实例配置为多个实例</p><p>1）选择应用运行的“Edit configuration”</p><p>2）在对应Spring Boot上，选择对应的项目，并取消“Single instance only”</p><p>3）启动项目</p></li><li><p>搭建一个spring-boot工程</p></li><li><p>pom继承父类pom文件</p></li></ol><h4 id="POM-3"><a href="#POM-3" class="headerlink" title="POM"></a>POM</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eurekafeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>eurekafeign<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eurekaserver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Greenwich.M1<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.ecwid<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ecwid-mailchimp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="配置服务消费者-1"><a href="#配置服务消费者-1" class="headerlink" title="配置服务消费者"></a>配置服务消费者</h4><ol><li>将resources资源目录下，默认的application.properties改为application.yml</li><li>指定server</li><li>重新启动服务消费者者（前提是已启动了服务注册中心、服务提供者）</li><li>可以看到DS Replicas，SERVICE-HELLOCLIENT，SERVICE-RIBBON，<strong>SERVICE-FEIGN</strong></li><li>application.yml</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">  instance:</span></span><br><span class="line"><span class="attr">    hostname:</span> <span class="string">localhost</span></span><br><span class="line"><span class="attr">  client:</span></span><br><span class="line"><span class="attr">    serviceUrl:</span></span><br><span class="line"><span class="attr">      defaultZone:</span> <span class="attr">http://$&#123;eureka.instance.hostname&#125;:8761/eureka/</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  application:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">service-feign</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8765</span></span><br></pre></td></tr></table></figure><ol><li>eurekaFeignApplication(src-main-java下)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.eurekafeign;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.EnableEurekaClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekafeignApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EurekafeignApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>定义一个对外的接口，对应client的</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.eurekafeign;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="meta">@FeignClient</span>(value = <span class="string">"service-helloClient"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TestServiceInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/helloClient"</span>, method = RequestMethod.GET)</span><br><span class="line">    <span class="function">String <span class="title">sayHello</span><span class="params">(@RequestParam(value = <span class="string">"name"</span>)</span> String name)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/** in client</span></span><br><span class="line"><span class="comment"><span class="doctag">@Value</span>("$&#123;server.port&#125;")</span></span><br><span class="line"><span class="comment">    String port;</span></span><br><span class="line"><span class="comment">    <span class="doctag">@RequestMapping</span>("helloClient")</span></span><br><span class="line"><span class="comment">    public String helloClient(<span class="doctag">@RequestParam</span> String name) &#123;</span></span><br><span class="line"><span class="comment">        return "helloWorld,client:"+name+", port:"+port;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><ol start="2"><li>配置一个Controller</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.eurekafeign;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    TestServiceInterface service;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(value = <span class="string">"/helloClient"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(@RequestParam String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> service.sayHello(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="启动服务消费者-1"><a href="#启动服务消费者-1" class="headerlink" title="启动服务消费者"></a>启动服务消费者</h4><ol><li>启动服务消费者者Feign，8765端口启用</li><li>url输入：<a href="http://localhost:8765/helloClient?name=PinkSmallFan" target="_blank" rel="noopener">http://localhost:8765/helloClient?name=PinkSmallFan</a></li><li>多次访问，交替显示：</li></ol><p>helloWorld,client:PinkSmallFan, port:8762 </p><p>helloWorld,client:PinkSmallFan, port:8763</p><h3 id="添加一个断路器Hystrix"><a href="#添加一个断路器Hystrix" class="headerlink" title="添加一个断路器Hystrix"></a>添加一个断路器Hystrix</h3><h4 id="在ribbon上使用断路器"><a href="#在ribbon上使用断路器" class="headerlink" title="在ribbon上使用断路器"></a>在ribbon上使用断路器</h4><h5 id="pom添加依赖节点"><a href="#pom添加依赖节点" class="headerlink" title="pom添加依赖节点"></a>pom添加依赖节点</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--hystrix 断路器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="配置断路器"><a href="#配置断路器" class="headerlink" title="配置断路器"></a>配置断路器</h5><ol><li>Application上添加EnableHystrix注释</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableHystrix</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaribbonApplication</span></span>&#123;...&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>Service层添加注释，与对应短路后的处理方法</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.eurekaribbon;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.netflix.hystrix.contrib.javanica.annotation.HystrixCommand;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@HystrixCommand</span>(fallbackMethod=<span class="string">"helloError"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(<span class="string">"http://SERVICE-HELLOCLIENT/helloClient?name="</span>+name, String.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">helloError</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello,"</span>+name+<span class="string">",sorry, it's error now!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="启动服务消费者ribbon"><a href="#启动服务消费者ribbon" class="headerlink" title="启动服务消费者ribbon"></a>启动服务消费者ribbon</h5><ol><li>启动服务消费者者 Ribbon，8764端口启用</li><li>url输入：<a href="http://localhost:8764/helloClient?name=PinkSmallFan" target="_blank" rel="noopener">http://localhost:8764/helloClient?name=PinkSmallFan</a></li><li>多次访问，交替显示：</li></ol><p>helloWorld,client:PinkSmallFan, port:8762 </p><p>helloWorld,client:PinkSmallFan, port:8763</p><ol start="4"><li><p>关闭一个client工程（8763），再次访问<a href="http://localhost:8764/helloClient?name=PinkSmallFan" target="_blank" rel="noopener">http://localhost:8764/helloClient?name=PinkSmallFan</a></p></li><li><p>多次访问，交替显示：</p></li></ol><p>helloWorld,client:PinkSmallFan, port:8762 </p><p>hello,PinkSmallFan,sorry, it’s error now!</p><ol start="6"><li><p>关闭一个client工程（8762），再次访问<a href="http://localhost:8764/helloClient?name=PinkSmallFan" target="_blank" rel="noopener">http://localhost:8764/helloClient?name=PinkSmallFan</a></p></li><li><p>多次访问，显示：</p></li></ol><p>hello,PinkSmallFan,sorry, it’s error now!</p><h4 id="在feign上使用断路器"><a href="#在feign上使用断路器" class="headerlink" title="在feign上使用断路器"></a>在feign上使用断路器</h4><h5 id="配置启动断路器"><a href="#配置启动断路器" class="headerlink" title="配置启动断路器"></a>配置启动断路器</h5><p>在application.yml上添加开启feign的hystrix功能（默认是关闭的）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line"><span class="attr">  hystrix:</span></span><br><span class="line"><span class="attr">    enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h5 id="断路时的实现接口"><a href="#断路时的实现接口" class="headerlink" title="断路时的实现接口"></a>断路时的实现接口</h5><p>​    新建一个类TestServiceHystrix，实现TestServiceInterface接口，用于在断路时的显示</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestServiceHystrix</span> <span class="keyword">implements</span> <span class="title">TestServiceInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello,"</span>+name+<span class="string">",error now."</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="配置fallback"><a href="#配置fallback" class="headerlink" title="配置fallback"></a>配置fallback</h5><p>在TestServiceInterface接口上添加fallback的注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient</span>(value = <span class="string">"service-helloClient"</span>, fallback = TestServiceHystrix.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TestServiceInterface</span> </span>&#123;...&#125;</span><br></pre></td></tr></table></figure><h5 id="启动服务消费者Feign"><a href="#启动服务消费者Feign" class="headerlink" title="启动服务消费者Feign"></a>启动服务消费者Feign</h5><ol><li>启动服务消费者者Feign，8765端口启用，client未启动</li><li>url输入：<a href="http://localhost:8765/helloClient?name=PinkSmallFan" target="_blank" rel="noopener">http://localhost:8765/helloClient?name=PinkSmallFan</a></li><li>多次访问，显示：</li></ol><p>hello,PinkSmallFan,error now.</p><ol><li>开启一个client工程（8762），再次访问<a href="http://localhost:8765/helloClient?name=PinkSmallFan" target="_blank" rel="noopener">http://localhost:8765/helloClient?name=PinkSmallFan</a></li><li>多次访问，显示：</li></ol><p>helloWorld,client:PinkSmallFan, port:8762 </p><h3 id="搭建一个路由网关"><a href="#搭建一个路由网关" class="headerlink" title="搭建一个路由网关"></a>搭建一个路由网关</h3><h4 id="IDEA-6"><a href="#IDEA-6" class="headerlink" title="IDEA"></a>IDEA</h4><ol><li>搭建一个spring-boot工程（参考搭建服务提供者），选择zuul</li><li>pom继承父类pom文件</li></ol><h4 id="POM-4"><a href="#POM-4" class="headerlink" title="POM"></a>POM</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eurekazuul<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>eurekazuul<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span>       <span class="comment">&lt;!--Greenwich.M3--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eurekaserver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-zuul<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="配置服务"><a href="#配置服务" class="headerlink" title="配置服务"></a>配置服务</h4><ol><li>将resources资源目录下，默认的application.properties改为application.yml</li><li>指定server</li><li>application.yml</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">  instance:</span></span><br><span class="line"><span class="attr">    hostname:</span> <span class="string">localhost</span></span><br><span class="line"><span class="attr">  client:</span></span><br><span class="line"><span class="attr">    serviceUrl:</span></span><br><span class="line"><span class="attr">      defaultZone:</span> <span class="attr">http://$&#123;eureka.instance.hostname&#125;:8761/eureka/</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  application:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">service-zuul</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8767</span></span><br><span class="line"><span class="attr">zuul:</span></span><br><span class="line"><span class="attr">  routes:</span></span><br><span class="line"><span class="attr">    api-a:</span></span><br><span class="line"><span class="attr">      path:</span> <span class="string">/api_a/**</span></span><br><span class="line"><span class="attr">      serviceId:</span> <span class="string">service-ribbon</span></span><br><span class="line"><span class="attr">    api-b:</span></span><br><span class="line"><span class="attr">      path:</span> <span class="string">/api_b/**</span></span><br><span class="line"><span class="attr">      serviceId:</span> <span class="string">service-feign</span></span><br></pre></td></tr></table></figure><ol start="4"><li>eurekazuulApplication(src-main-java下)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.eurekazuul;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.EnableEurekaClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.zuul.EnableZuulProxy;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableZuulProxy</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekazuulApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EurekazuulApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="修改版本兼容zuul"><a href="#修改版本兼容zuul" class="headerlink" title="修改版本兼容zuul"></a>修改版本兼容zuul</h4><p>将eurekaserver中pom.xml的parent节点，springboot版本调至2.0.2，兼容zuul的问题（2.1的bug）</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="启动服务提供者-1"><a href="#启动服务提供者-1" class="headerlink" title="启动服务提供者"></a>启动服务提供者</h4><ol><li>启动服务提供者，8767端口启用</li><li>url输入：<a href="http://localhost:8767/api_b/helloClient?name=PinkSmallFan" target="_blank" rel="noopener">http://localhost:8767/api_b/helloClient?name=PinkSmallFan</a></li><li>显示：helloWorld,client:PinkSmallFan, port:8762</li></ol><h3 id="搭建分布式配置中心（server）"><a href="#搭建分布式配置中心（server）" class="headerlink" title="搭建分布式配置中心（server）"></a>搭建分布式配置中心（server）</h3><h4 id="IDEA-7"><a href="#IDEA-7" class="headerlink" title="IDEA"></a>IDEA</h4><ol><li>搭建一个spring-boot工程（参考搭建服务提供者），选择server config</li><li>pom继承父类pom文件</li></ol><h4 id="POM-5"><a href="#POM-5" class="headerlink" title="POM"></a>POM</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eurekaconfigserver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>eurekaconfigserver<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Greenwich.M3<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-config-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="配置服务-1"><a href="#配置服务-1" class="headerlink" title="配置服务"></a>配置服务</h4><ol><li>将resources资源目录下，默认的application.properties改为application.yml</li><li>指定server</li><li>application.yml</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  application:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">config-server</span></span><br><span class="line"><span class="attr">  profiles:</span></span><br><span class="line"><span class="attr">    active:</span> <span class="string">native</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    config:</span></span><br><span class="line"><span class="attr">      server:</span></span><br><span class="line"><span class="attr">        native:</span></span><br><span class="line"><span class="attr">          search-locations:</span> <span class="attr">classpath:/config</span></span><br><span class="line"><span class="attr">        git:</span></span><br><span class="line"><span class="attr">          uri:</span> <span class="attr">https://github.com/forezp/SpringcloudConfig/</span></span><br><span class="line"><span class="attr">          searchPaths:</span> <span class="string">respo</span></span><br><span class="line"><span class="attr">          username:</span> <span class="string">your</span> <span class="string">username</span></span><br><span class="line"><span class="attr">          password:</span> <span class="string">your</span> <span class="string">password</span></span><br><span class="line"><span class="attr">        label:</span> <span class="string">master</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8768</span></span><br></pre></td></tr></table></figure><ol start="4"><li><p>在resources资源下添加config文件夹</p></li><li><p>添加eurekaconfigclient-dev.yml和eurekaconfigclient-pro.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">  password:</span></span><br><span class="line">    <span class="number">12345678</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">pro</span></span><br><span class="line"><span class="attr">  password:</span> <span class="number">123456</span></span><br></pre></td></tr></table></figure></li></ol><p>6.eurekaconfigserverApplication(src-main-java下)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.eurekaconfigserver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.config.server.EnableConfigServer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableConfigServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaconfigserverApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EurekaconfigserverApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="启动服务配置"><a href="#启动服务配置" class="headerlink" title="启动服务配置"></a>启动服务配置</h4><ol><li>启动服务提供者，8768端口启用</li><li>url输入：<a href="http://localhost:8768/eurekaconfigclient/dev" target="_blank" rel="noopener">http://localhost:8768/eurekaconfigclient/dev</a></li><li>显示：{“name”:”eurekaconfigclient”,”profiles”:[“dev”],”label”:null,”version”:null,”state”:null,”propertySources”:[{“name”:”classpath:/config/eurekaconfigclient-dev.yml”,”source”:{“env.name”:”dev”,”env.password”:12345678}}]}</li></ol><h3 id="搭建分布式配置中心（client）"><a href="#搭建分布式配置中心（client）" class="headerlink" title="搭建分布式配置中心（client）"></a>搭建分布式配置中心（client）</h3><h4 id="IDEA-8"><a href="#IDEA-8" class="headerlink" title="IDEA"></a>IDEA</h4><ol><li>搭建一个spring-boot工程（参考搭建服务提供者），选择client config</li><li>pom继承父类pom文件</li></ol><h4 id="POM-6"><a href="#POM-6" class="headerlink" title="POM"></a>POM</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>eurekaconfigclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>eurekaconfigclient<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Greenwich.M3<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="配置服务-2"><a href="#配置服务-2" class="headerlink" title="配置服务"></a>配置服务</h4><ol><li>将resources资源目录下，默认的application.properties改为bootstrap.yml。不能为application.yml</li><li>指定server</li><li>bootstrap.yml（bootstrap是系统级别，不可覆盖不可更改；application是应用级别，可被覆盖与替换）</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  application:</span></span><br><span class="line"><span class="attr">    name:</span></span><br><span class="line">      <span class="string">eurekaconfigclient</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    config:</span></span><br><span class="line"><span class="attr">      profile:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">      uri:</span> <span class="attr">http://localhost:8768</span></span><br><span class="line"><span class="attr">      label:</span> <span class="string">master</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8861</span></span><br></pre></td></tr></table></figure><ol start="4"><li>eurekaconfigclientApplication(src-main-java下)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.eurekaconfigclient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaconfigclientApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EurekaconfigclientApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;env.password&#125;"</span>)</span><br><span class="line">    String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/getPassword"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="启动服务配置-1"><a href="#启动服务配置-1" class="headerlink" title="启动服务配置"></a>启动服务配置</h4><ol><li>启动服务提供者，8861端口启用</li><li>url输入：<a href="http://localhost:8861/getPassword" target="_blank" rel="noopener">http://localhost:8861/getPassword</a></li><li>显示：12345678</li></ol><h3 id="分布式配置中心集群管理"><a href="#分布式配置中心集群管理" class="headerlink" title="分布式配置中心集群管理"></a>分布式配置中心集群管理</h3><h4 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h4><ol><li>Eureka搭建（已搭建，可以忽略）</li><li>config-server，pom上添加eureka-client</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>config-server，在application.yml上添加eureka节点</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">  client:</span></span><br><span class="line"><span class="attr">    serviceUrl:</span></span><br><span class="line"><span class="attr">      defaultZone:</span> <span class="attr">http://localhost:8761/eureka/</span></span><br></pre></td></tr></table></figure><ol start="4"><li>config-server，在EurekaconfigserverApplication上添加注释：@EnableEurekaClient</li><li>config-client，pom上添加eureka-client</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="6"><li>config-client，在bootstarp.yml上添加/修改eureka节点</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">  client:</span></span><br><span class="line"><span class="attr">    serviceUrl:</span></span><br><span class="line"><span class="attr">      defaultZone:</span> <span class="attr">http://localhost:8761/eureka/</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  application:</span></span><br><span class="line"><span class="attr">    name:</span></span><br><span class="line">      <span class="string">eurekaconfigclient</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    config:</span></span><br><span class="line"><span class="attr">      profile:</span> <span class="string">dev</span></span><br><span class="line">      <span class="comment"># uri: http://localhost:8768</span></span><br><span class="line">      <span class="comment"># label: master</span></span><br><span class="line"><span class="attr">      discovery:</span></span><br><span class="line"><span class="attr">        enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">        serviceId:</span> <span class="string">config-server</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr"> port:</span> <span class="number">8861</span></span><br></pre></td></tr></table></figure><ol start="7"><li>config-client，在EurekaconfigserverApplication上添加注释：@EnableEurekaClient、@EnableDiscoveryClient、@RefreshScope</li><li>重新启动分布式配置中心（server和client），打开eureka的注册中心，<a href="http://localhost:8761，会发现分布式配置中心已经关联到注册中心，打开网址：http://localhost:8861/getPassword，会显示“12345678”" target="_blank" rel="noopener">http://localhost:8761，会发现分布式配置中心已经关联到注册中心，打开网址：http://localhost:8861/getPassword，会显示“12345678”</a></li></ol><h3 id="分布式配置中心集成RabbitMQ"><a href="#分布式配置中心集成RabbitMQ" class="headerlink" title="分布式配置中心集成RabbitMQ"></a>分布式配置中心集成RabbitMQ</h3><h4 id="搭建RabbitMQ："><a href="#搭建RabbitMQ：" class="headerlink" title="搭建RabbitMQ："></a>搭建RabbitMQ：</h4><ol><li><p>RabbitMQ下载地址：<a href="http://www.rabbitmq.com/download.html" target="_blank" rel="noopener">http://www.rabbitmq.com/download.html</a></p><p>Github地址：<a href="https://github.com/rabbitmq/rabbitmq-server/releases" target="_blank" rel="noopener">https://github.com/rabbitmq/rabbitmq-server/releases</a></p><p>erlang下载地址：<a href="http://www.erlang.org/downloads" target="_blank" rel="noopener">http://www.erlang.org/downloads</a></p></li></ol><ol start="2"><li>安装erlang和RabbitMQ</li><li>配置环境变量: ERLANG_HOME与RABBITMQ_SERVER（;%ERLANG_HOME%\bin;%RABBITMQ_SERVER%,并将这两个添加到PATH路径）</li><li>cmd下输入erl，如果有版本号，并进入erl环境，待输入，那么证明erlang安装成功</li><li>在rabbitmq的sbin目录，输入./rabbitmq-plugins enable rabbitmq_management</li><li>在rabbitmq的sbin目录，双击rabbitmq-server.bat</li><li>访问<a href="http://localhost:15672，如果有页面产生，输入账号/密码：guest/guest，进入后台服务" target="_blank" rel="noopener">http://localhost:15672，如果有页面产生，输入账号/密码：guest/guest，进入后台服务</a></li></ol><div class="article-img"><p><img src="E:\blog\lmg\PinkSmallFan\project\source\uploads\1544018409611.png" alt="1544018406867"></p></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li style=&quot;list-style: none&quot;&gt;&lt;input type=&quot;checkbox&quot; checked&gt; 【宿舍】使用SpringBoot快速构建RESTful API应用&lt;/li&gt;
&lt;li style=&quot;list-style: none&quot;&gt;&lt;input
      
    
    </summary>
    
      <category term="微服务" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
    
  </entry>
  
  <entry>
    <title>Base64编码</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/07/2018-11-7-Base64%E7%BC%96%E7%A0%81/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/07/2018-11-7-Base64编码/</id>
    <published>2018-11-07T08:01:36.000Z</published>
    <updated>2018-11-07T14:27:25.740Z</updated>
    
    <content type="html"><![CDATA[<h2 id="伪代码流程"><a href="#伪代码流程" class="headerlink" title="伪代码流程"></a>伪代码流程</h2><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Base64编解码器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Base64Encoder</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">byte</span>[] encodingTable =</span><br><span class="line">&#123;</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'A'</span>, (<span class="keyword">byte</span>) <span class="string">'B'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'C'</span>, (<span class="keyword">byte</span>) <span class="string">'D'</span>, (<span class="keyword">byte</span>) <span class="string">'E'</span>, (<span class="keyword">byte</span>) <span class="string">'F'</span>, (<span class="keyword">byte</span>) <span class="string">'G'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'H'</span>, (<span class="keyword">byte</span>) <span class="string">'I'</span>, (<span class="keyword">byte</span>) <span class="string">'J'</span>, (<span class="keyword">byte</span>) <span class="string">'K'</span>, (<span class="keyword">byte</span>) <span class="string">'L'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'M'</span>, (<span class="keyword">byte</span>) <span class="string">'N'</span>, (<span class="keyword">byte</span>) <span class="string">'O'</span>, (<span class="keyword">byte</span>) <span class="string">'P'</span>, (<span class="keyword">byte</span>) <span class="string">'Q'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'R'</span>, (<span class="keyword">byte</span>) <span class="string">'S'</span>, (<span class="keyword">byte</span>) <span class="string">'T'</span>, (<span class="keyword">byte</span>) <span class="string">'U'</span>, (<span class="keyword">byte</span>) <span class="string">'V'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'W'</span>, (<span class="keyword">byte</span>) <span class="string">'X'</span>, (<span class="keyword">byte</span>) <span class="string">'Y'</span>, (<span class="keyword">byte</span>) <span class="string">'Z'</span>, (<span class="keyword">byte</span>) <span class="string">'a'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'b'</span>, (<span class="keyword">byte</span>) <span class="string">'c'</span>, (<span class="keyword">byte</span>) <span class="string">'d'</span>, (<span class="keyword">byte</span>) <span class="string">'e'</span>, (<span class="keyword">byte</span>) <span class="string">'f'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'g'</span>, (<span class="keyword">byte</span>) <span class="string">'h'</span>, (<span class="keyword">byte</span>) <span class="string">'i'</span>, (<span class="keyword">byte</span>) <span class="string">'j'</span>, (<span class="keyword">byte</span>) <span class="string">'k'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'l'</span>, (<span class="keyword">byte</span>) <span class="string">'m'</span>, (<span class="keyword">byte</span>) <span class="string">'n'</span>, (<span class="keyword">byte</span>) <span class="string">'o'</span>, (<span class="keyword">byte</span>) <span class="string">'p'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'q'</span>, (<span class="keyword">byte</span>) <span class="string">'r'</span>, (<span class="keyword">byte</span>) <span class="string">'s'</span>, (<span class="keyword">byte</span>) <span class="string">'t'</span>, (<span class="keyword">byte</span>) <span class="string">'u'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'v'</span>, (<span class="keyword">byte</span>) <span class="string">'w'</span>, (<span class="keyword">byte</span>) <span class="string">'x'</span>, (<span class="keyword">byte</span>) <span class="string">'y'</span>, (<span class="keyword">byte</span>) <span class="string">'z'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'0'</span>, (<span class="keyword">byte</span>) <span class="string">'1'</span>, (<span class="keyword">byte</span>) <span class="string">'2'</span>, (<span class="keyword">byte</span>) <span class="string">'3'</span>, (<span class="keyword">byte</span>) <span class="string">'4'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'5'</span>, (<span class="keyword">byte</span>) <span class="string">'6'</span>, (<span class="keyword">byte</span>) <span class="string">'7'</span>, (<span class="keyword">byte</span>) <span class="string">'8'</span>, (<span class="keyword">byte</span>) <span class="string">'9'</span>,</span><br><span class="line">(<span class="keyword">byte</span>) <span class="string">'+'</span>, (<span class="keyword">byte</span>) <span class="string">'/'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * set up the decoding table.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">byte</span>[] decodingTable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">decodingTable = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">128</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="string">'A'</span>; i &lt;= <span class="string">'Z'</span>; i++) &#123;</span><br><span class="line">decodingTable[i] = (<span class="keyword">byte</span>) (i - <span class="string">'A'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="string">'a'</span>; i &lt;= <span class="string">'z'</span>; i++) &#123;</span><br><span class="line">decodingTable[i] = (<span class="keyword">byte</span>) (i - <span class="string">'a'</span> + <span class="number">26</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="string">'0'</span>; i &lt;= <span class="string">'9'</span>; i++) &#123;</span><br><span class="line">decodingTable[i] = (<span class="keyword">byte</span>) (i - <span class="string">'0'</span> + <span class="number">52</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">decodingTable[<span class="string">'+'</span>] = <span class="number">62</span>;</span><br><span class="line">decodingTable[<span class="string">'/'</span>] = <span class="number">63</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * BASE64编码</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> date : 二进制数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 包含BASE64编码后的字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encode</span><span class="params">(<span class="keyword">byte</span>[] data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">byte</span>[] bytes;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> modulus = data.length % <span class="number">3</span>;</span><br><span class="line"><span class="keyword">if</span> (modulus == <span class="number">0</span>) &#123;</span><br><span class="line">bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">4</span> * data.length / <span class="number">3</span>];</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">4</span> * ((data.length / <span class="number">3</span>) + <span class="number">1</span>)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dataLength = (data.length - modulus);</span><br><span class="line"><span class="keyword">int</span> a1, a2, a3;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; dataLength; i += <span class="number">3</span>, j += <span class="number">4</span>) &#123;</span><br><span class="line">a1 = data[i] &amp; <span class="number">0xff</span>;</span><br><span class="line">a2 = data[i + <span class="number">1</span>] &amp; <span class="number">0xff</span>;</span><br><span class="line">a3 = data[i + <span class="number">2</span>] &amp; <span class="number">0xff</span>;</span><br><span class="line"></span><br><span class="line">bytes[j] = encodingTable[(a1 &gt;&gt;&gt; <span class="number">2</span>) &amp; <span class="number">0x3f</span>];</span><br><span class="line">bytes[j + <span class="number">1</span>] = encodingTable[((a1 &lt;&lt; <span class="number">4</span>) | (a2 &gt;&gt;&gt; <span class="number">4</span>)) &amp; <span class="number">0x3f</span>];</span><br><span class="line">bytes[j + <span class="number">2</span>] = encodingTable[((a2 &lt;&lt; <span class="number">2</span>) | (a3 &gt;&gt;&gt; <span class="number">6</span>)) &amp; <span class="number">0x3f</span>];</span><br><span class="line">bytes[j + <span class="number">3</span>] = encodingTable[a3 &amp; <span class="number">0x3f</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * process the tail end.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> b1, b2, b3;</span><br><span class="line"><span class="keyword">int</span> d1, d2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (modulus) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>: <span class="comment">/* nothing left to do */</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">d1 = data[data.length - <span class="number">1</span>] &amp; <span class="number">0xff</span>;</span><br><span class="line">b1 = (d1 &gt;&gt;&gt; <span class="number">2</span>) &amp; <span class="number">0x3f</span>;</span><br><span class="line">b2 = (d1 &lt;&lt; <span class="number">4</span>) &amp; <span class="number">0x3f</span>;</span><br><span class="line"></span><br><span class="line">bytes[bytes.length - <span class="number">4</span>] = encodingTable[b1];</span><br><span class="line">bytes[bytes.length - <span class="number">3</span>] = encodingTable[b2];</span><br><span class="line">bytes[bytes.length - <span class="number">2</span>] = (<span class="keyword">byte</span>) <span class="string">'='</span>;</span><br><span class="line">bytes[bytes.length - <span class="number">1</span>] = (<span class="keyword">byte</span>) <span class="string">'='</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">d1 = data[data.length - <span class="number">2</span>] &amp; <span class="number">0xff</span>;</span><br><span class="line">d2 = data[data.length - <span class="number">1</span>] &amp; <span class="number">0xff</span>;</span><br><span class="line"></span><br><span class="line">b1 = (d1 &gt;&gt;&gt; <span class="number">2</span>) &amp; <span class="number">0x3f</span>;</span><br><span class="line">b2 = ((d1 &lt;&lt; <span class="number">4</span>) | (d2 &gt;&gt;&gt; <span class="number">4</span>)) &amp; <span class="number">0x3f</span>;</span><br><span class="line">b3 = (d2 &lt;&lt; <span class="number">2</span>) &amp; <span class="number">0x3f</span>;</span><br><span class="line"></span><br><span class="line">bytes[bytes.length - <span class="number">4</span>] = encodingTable[b1];</span><br><span class="line">bytes[bytes.length - <span class="number">3</span>] = encodingTable[b2];</span><br><span class="line">bytes[bytes.length - <span class="number">2</span>] = encodingTable[b3];</span><br><span class="line">bytes[bytes.length - <span class="number">1</span>] = (<span class="keyword">byte</span>) <span class="string">'='</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> String(bytes);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断字符串是否base64字符串</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> str : 字符串</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> boolean</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isbase64str</span><span class="params">(String str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;str.length();i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">char</span> t= str.charAt(i);</span><br><span class="line"><span class="keyword">if</span>(t&gt;=<span class="string">'A'</span> &amp;&amp; t&lt;=<span class="string">'Z'</span>)<span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(t&gt;=<span class="string">'a'</span> &amp;&amp; t&lt;=<span class="string">'z'</span>)<span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(t&gt;=<span class="string">'0'</span> &amp;&amp; t&lt;=<span class="string">'9'</span>)<span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">switch</span>(t)&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">'/'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">'='</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">' '</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">'\t'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">'\n'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">'\f'</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">'\r'</span>:</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * BASE64解码</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> base64 : base64字符串</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 解码后的原始二进制数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] decode(String base64)</span><br><span class="line">&#123;</span><br><span class="line">base64= base64.replaceAll(<span class="string">"\\s"</span>,<span class="string">""</span>);<span class="comment">//去除所有空格 "[ \t\n\x0B\f\r]"</span></span><br><span class="line"><span class="keyword">byte</span>[] data= base64.getBytes();</span><br><span class="line"><span class="keyword">byte</span>[] bytes;</span><br><span class="line"><span class="keyword">byte</span> b1, b2, b3, b4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(data[data.length - <span class="number">2</span>] == <span class="string">'='</span>) &#123;</span><br><span class="line">bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[(((data.length / <span class="number">4</span>) - <span class="number">1</span>) * <span class="number">3</span>) + <span class="number">1</span>];</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (data[data.length - <span class="number">1</span>] == <span class="string">'='</span>) &#123;</span><br><span class="line">bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[(((data.length / <span class="number">4</span>) - <span class="number">1</span>) * <span class="number">3</span>) + <span class="number">2</span>];</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[((data.length / <span class="number">4</span>) * <span class="number">3</span>)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; data.length - <span class="number">4</span>; i += <span class="number">4</span>, j += <span class="number">3</span>)</span><br><span class="line">&#123;</span><br><span class="line">b1 = decodingTable[data[i]];</span><br><span class="line">b2 = decodingTable[data[i + <span class="number">1</span>]];</span><br><span class="line">b3 = decodingTable[data[i + <span class="number">2</span>]];</span><br><span class="line">b4 = decodingTable[data[i + <span class="number">3</span>]];</span><br><span class="line"></span><br><span class="line">bytes[j] = (<span class="keyword">byte</span>) ((b1 &lt;&lt; <span class="number">2</span>) | (b2 &gt;&gt; <span class="number">4</span>));</span><br><span class="line">bytes[j + <span class="number">1</span>] = (<span class="keyword">byte</span>) ((b2 &lt;&lt; <span class="number">4</span>) | (b3 &gt;&gt; <span class="number">2</span>));</span><br><span class="line">bytes[j + <span class="number">2</span>] = (<span class="keyword">byte</span>) ((b3 &lt;&lt; <span class="number">6</span>) | b4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (data[data.length - <span class="number">2</span>] == <span class="string">'='</span>) &#123;</span><br><span class="line">b1 = decodingTable[data[data.length - <span class="number">4</span>]];</span><br><span class="line">b2 = decodingTable[data[data.length - <span class="number">3</span>]];</span><br><span class="line"></span><br><span class="line">bytes[bytes.length - <span class="number">1</span>] = (<span class="keyword">byte</span>) ((b1 &lt;&lt; <span class="number">2</span>) | (b2 &gt;&gt; <span class="number">4</span>));</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (data[data.length - <span class="number">1</span>] == <span class="string">'='</span>) &#123;</span><br><span class="line">b1 = decodingTable[data[data.length - <span class="number">4</span>]];</span><br><span class="line">b2 = decodingTable[data[data.length - <span class="number">3</span>]];</span><br><span class="line">b3 = decodingTable[data[data.length - <span class="number">2</span>]];</span><br><span class="line"></span><br><span class="line">bytes[bytes.length - <span class="number">2</span>] = (<span class="keyword">byte</span>) ((b1 &lt;&lt; <span class="number">2</span>) | (b2 &gt;&gt; <span class="number">4</span>));</span><br><span class="line">bytes[bytes.length - <span class="number">1</span>] = (<span class="keyword">byte</span>) ((b2 &lt;&lt; <span class="number">4</span>) | (b3 &gt;&gt; <span class="number">2</span>));</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">b1 = decodingTable[data[data.length - <span class="number">4</span>]];</span><br><span class="line">b2 = decodingTable[data[data.length - <span class="number">3</span>]];</span><br><span class="line">b3 = decodingTable[data[data.length - <span class="number">2</span>]];</span><br><span class="line">b4 = decodingTable[data[data.length - <span class="number">1</span>]];</span><br><span class="line"></span><br><span class="line">bytes[bytes.length - <span class="number">3</span>] = (<span class="keyword">byte</span>) ((b1 &lt;&lt; <span class="number">2</span>) | (b2 &gt;&gt; <span class="number">4</span>));</span><br><span class="line">bytes[bytes.length - <span class="number">2</span>] = (<span class="keyword">byte</span>) ((b2 &lt;&lt; <span class="number">4</span>) | (b3 &gt;&gt; <span class="number">2</span>));</span><br><span class="line">bytes[bytes.length - <span class="number">1</span>] = (<span class="keyword">byte</span>) ((b3 &lt;&lt; <span class="number">6</span>) | b4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> bytes;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;伪代码流程&quot;&gt;&lt;a href=&quot;#伪代码流程&quot; class=&quot;headerlink&quot; title=&quot;伪代码流程&quot;&gt;&lt;/a&gt;伪代码流程&lt;/h2&gt;&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代
      
    
    </summary>
    
    
      <category term="密码学" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>python常用</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/04/2018-11-4-python%E5%B8%B8%E7%94%A8/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/04/2018-11-4-python常用/</id>
    <published>2018-11-04T09:24:34.000Z</published>
    <updated>2018-11-04T22:04:40.468Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ord()<span class="comment"># 将char数据转为ASCII数据，例如：'0'转为48,ord('0')</span></span><br><span class="line">chr()<span class="comment"># 将ASCII数据转为char数据，例如：65转为'A',chr(65)</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;常用函数&quot;&gt;&lt;a href=&quot;#常用函数&quot; class=&quot;headerlink&quot; title=&quot;常用函数&quot;&gt;&lt;/a&gt;常用函数&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p
      
    
    </summary>
    
    
      <category term="python" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>实验吧（困在栅栏里的凯撒）</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/04/2018-11-4-%E5%AE%9E%E9%AA%8C%E5%90%A7(%E5%9B%B0%E5%9C%A8%E6%A0%85%E6%A0%8F%E9%87%8C%E7%9A%84%E5%87%AF%E6%92%92)/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/04/2018-11-4-实验吧(困在栅栏里的凯撒)/</id>
    <published>2018-11-04T07:58:54.000Z</published>
    <updated>2018-11-15T16:12:31.058Z</updated>
    
    <content type="html"><![CDATA[<h2 id="困在栅栏里的凯撒"><a href="#困在栅栏里的凯撒" class="headerlink" title="困在栅栏里的凯撒"></a>困在栅栏里的凯撒</h2><h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><blockquote><p>小白发现了一段很6的字符：NlEyQd{seft}</p></blockquote><h3 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h3><p>​    顾名思义，先栅栏，后凯撒</p><ol><li><p>栅栏（FenceCode）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1：NEQ&#123;etlydsf&#125;</span><br><span class="line">2：Ny&#123;flQstEde&#125;</span><br><span class="line">3：NQeldfE&#123;tys&#125;</span><br><span class="line">4：N&#123;lsEeyfQtd&#125;</span><br></pre></td></tr></table></figure></li><li><p>凯撒（CaeserCode）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">1：OFR&#123;fumzetg&#125;</span><br><span class="line">2：Oz&#123;gmRtuFef&#125;</span><br><span class="line">3：ORfmegF&#123;uzt&#125;</span><br><span class="line">4：O&#123;mtFfzgRue&#125;</span><br><span class="line"></span><br><span class="line">1：PGS&#123;gvnafuh&#125;</span><br><span class="line">2：Pa&#123;hnSuvGfg&#125;</span><br><span class="line">3：PSgnfhG&#123;vau&#125;</span><br><span class="line">4：P&#123;nuGgahSvf&#125;</span><br><span class="line"></span><br><span class="line">1：QHT&#123;hwobgvi&#125;</span><br><span class="line">2：Qb&#123;ioTvwHgh&#125;</span><br><span class="line">3：QThogiH&#123;wbv&#125;</span><br><span class="line">4：Q&#123;ovHhbiTwg&#125;</span><br><span class="line"></span><br><span class="line">1：RIU&#123;ixpchwj&#125;</span><br><span class="line">2：Rc&#123;jpUwxIhi&#125;</span><br><span class="line">3：RUiphjI&#123;xcw&#125;</span><br><span class="line">4：R&#123;pwIicjUxh&#125;</span><br><span class="line"></span><br><span class="line">1：SJV&#123;jyqdixk&#125;</span><br><span class="line">2：Sd&#123;kqVxyJij&#125;</span><br><span class="line">3：SVjqikJ&#123;ydx&#125;</span><br><span class="line">4：S&#123;qxJjdkVyi&#125;</span><br><span class="line"></span><br><span class="line">1：TKW&#123;kzrejyl&#125;</span><br><span class="line">2：Te&#123;lrWyzKjk&#125;</span><br><span class="line">3：TWkrjlK&#123;zey&#125;</span><br><span class="line">4：T&#123;ryKkelWzj&#125;</span><br><span class="line"></span><br><span class="line">1：ULX&#123;lasfkzm&#125;</span><br><span class="line">2：Uf&#123;msXzaLkl&#125;</span><br><span class="line">3：UXlskmL&#123;afz&#125;</span><br><span class="line">4：U&#123;szLlfmXak&#125;</span><br><span class="line"></span><br><span class="line">1：VMY&#123;mbtglan&#125;</span><br><span class="line">2：Vg&#123;ntYabMlm&#125;</span><br><span class="line">3：VYmtlnM&#123;bga&#125;</span><br><span class="line">4：V&#123;taMmgnYbl&#125;</span><br><span class="line"></span><br><span class="line">1：WNZ&#123;ncuhmbo&#125;</span><br><span class="line">2：Wh&#123;ouZbcNmn&#125;</span><br><span class="line">3：WZnumoN&#123;chb&#125;</span><br><span class="line">4：W&#123;ubNnhoZcm&#125;</span><br><span class="line"></span><br><span class="line">1：XOA&#123;odvincp&#125;</span><br><span class="line">2：Xi&#123;pvAcdOno&#125;</span><br><span class="line">3：XAovnpO&#123;dic&#125;</span><br><span class="line">4：X&#123;vcOoipAdn&#125;</span><br><span class="line"></span><br><span class="line">1：YPB&#123;pewjodq&#125;</span><br><span class="line">2：Yj&#123;qwBdePop&#125;</span><br><span class="line">3：YBpwoqP&#123;ejd&#125;</span><br><span class="line">4：Y&#123;wdPpjqBeo&#125;</span><br><span class="line"></span><br><span class="line">1：ZQC&#123;qfxkper&#125;</span><br><span class="line">2：Zk&#123;rxCefQpq&#125;</span><br><span class="line">3：ZCqxprQ&#123;fke&#125;</span><br><span class="line">4：Z&#123;xeQqkrCfp&#125;</span><br><span class="line"></span><br><span class="line">1：ARD&#123;rgylqfs&#125;</span><br><span class="line">2：Al&#123;syDfgRqr&#125;</span><br><span class="line">3：ADryqsR&#123;glf&#125;</span><br><span class="line">4：A&#123;yfRrlsDgq&#125;</span><br><span class="line"></span><br><span class="line">1：BSE&#123;shzmrgt&#125;</span><br><span class="line">2：Bm&#123;tzEghSrs&#125;</span><br><span class="line">3：BEszrtS&#123;hmg&#125;</span><br><span class="line">4：B&#123;zgSsmtEhr&#125;</span><br><span class="line"></span><br><span class="line">1：CTF&#123;tianshu&#125;</span><br><span class="line">2：Cn&#123;uaFhiTst&#125;</span><br><span class="line">3：CFtasuT&#123;inh&#125;</span><br><span class="line">4：C&#123;ahTtnuFis&#125;</span><br><span class="line"></span><br><span class="line">1：DUG&#123;ujbotiv&#125;</span><br><span class="line">2：Do&#123;vbGijUtu&#125;</span><br><span class="line">3：DGubtvU&#123;joi&#125;</span><br><span class="line">4：D&#123;biUuovGjt&#125;</span><br><span class="line"></span><br><span class="line">1：EVH&#123;vkcpujw&#125;</span><br><span class="line">2：Ep&#123;wcHjkVuv&#125;</span><br><span class="line">3：EHvcuwV&#123;kpj&#125;</span><br><span class="line">4：E&#123;cjVvpwHku&#125;</span><br><span class="line"></span><br><span class="line">1：FWI&#123;wldqvkx&#125;</span><br><span class="line">2：Fq&#123;xdIklWvw&#125;</span><br><span class="line">3：FIwdvxW&#123;lqk&#125;</span><br><span class="line">4：F&#123;dkWwqxIlv&#125;</span><br><span class="line"></span><br><span class="line">1：GXJ&#123;xmerwly&#125;</span><br><span class="line">2：Gr&#123;yeJlmXwx&#125;</span><br><span class="line">3：GJxewyX&#123;mrl&#125;</span><br><span class="line">4：G&#123;elXxryJmw&#125;</span><br><span class="line"></span><br><span class="line">1：HYK&#123;ynfsxmz&#125;</span><br><span class="line">2：Hs&#123;zfKmnYxy&#125;</span><br><span class="line">3：HKyfxzY&#123;nsm&#125;</span><br><span class="line">4：H&#123;fmYyszKnx&#125;</span><br><span class="line"></span><br><span class="line">1：IZL&#123;zogtyna&#125;</span><br><span class="line">2：It&#123;agLnoZyz&#125;</span><br><span class="line">3：ILzgyaZ&#123;otn&#125;</span><br><span class="line">4：I&#123;gnZztaLoy&#125;</span><br><span class="line"></span><br><span class="line">1：JAM&#123;aphuzob&#125;</span><br><span class="line">2：Ju&#123;bhMopAza&#125;</span><br><span class="line">3：JMahzbA&#123;puo&#125;</span><br><span class="line">4：J&#123;hoAaubMpz&#125;</span><br><span class="line"></span><br><span class="line">1：KBN&#123;bqivapc&#125;</span><br><span class="line">2：Kv&#123;ciNpqBab&#125;</span><br><span class="line">3：KNbiacB&#123;qvp&#125;</span><br><span class="line">4：K&#123;ipBbvcNqa&#125;</span><br><span class="line"></span><br><span class="line">1：LCO&#123;crjwbqd&#125;</span><br><span class="line">2：Lw&#123;djOqrCbc&#125;</span><br><span class="line">3：LOcjbdC&#123;rwq&#125;</span><br><span class="line">4：L&#123;jqCcwdOrb&#125;</span><br><span class="line"></span><br><span class="line">1：MDP&#123;dskxcre&#125;</span><br><span class="line">2：Mx&#123;ekPrsDcd&#125;</span><br><span class="line">3：MPdkceD&#123;sxr&#125;</span><br><span class="line">4：M&#123;krDdxePsc&#125;</span><br><span class="line"></span><br><span class="line">1：NEQ&#123;etlydsf&#125;</span><br><span class="line">2：Ny&#123;flQstEde&#125;</span><br><span class="line">3：NQeldfE&#123;tys&#125;</span><br><span class="line">4：N&#123;lsEeyfQtd&#125;</span><br></pre></td></tr></table></figure></li><li><p>就可以看到答案是：<strong>CTF{tianshu}</strong></p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;困在栅栏里的凯撒&quot;&gt;&lt;a href=&quot;#困在栅栏里的凯撒&quot; class=&quot;headerlink&quot; title=&quot;困在栅栏里的凯撒&quot;&gt;&lt;/a&gt;困在栅栏里的凯撒&lt;/h2&gt;&lt;h3 id=&quot;题目&quot;&gt;&lt;a href=&quot;#题目&quot; class=&quot;headerlink&quot; titl
      
    
    </summary>
    
      <category term="实验吧" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/categories/%E5%AE%9E%E9%AA%8C%E5%90%A7/"/>
    
    
      <category term="密码学" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"/>
    
      <category term="other" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/other/"/>
    
      <category term="实验吧" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/%E5%AE%9E%E9%AA%8C%E5%90%A7/"/>
    
  </entry>
  
  <entry>
    <title>Java WebService服务端与客户端的搭建</title>
    <link href="https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/02/2018-11-2-Java-WebService%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%B8%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E6%90%AD%E5%BB%BA/"/>
    <id>https://pinksmallfan.github.io/WenChongAndJiaoKou/2018/11/02/2018-11-2-Java-WebService服务端与客户端的搭建/</id>
    <published>2018-11-02T01:29:00.000Z</published>
    <updated>2018-12-16T14:18:15.654Z</updated>
    
    <content type="html"><![CDATA[<h2 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h2><h3 id="最简单的WebService服务端"><a href="#最简单的WebService服务端" class="headerlink" title="最简单的WebService服务端"></a>最简单的WebService服务端</h3><h4 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h4><ol><li>搭建一个web工程</li><li>在web工程建立包（这里我命名为xx.xxaa，其他也没关系）</li><li>在web工程建立一个类，并命名（这里我命名为ServiceServer，其他也没关系）</li><li>编写main方法，开启服务</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.jws.WebService;</span><br><span class="line"><span class="keyword">import</span> javax.xml.ws.Endpoint;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebService</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceServer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 客户端将会调用的方法（服务端被调用的方法）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> something</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">serverPrint</span><span class="params">(String something)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Server print: "</span>+something;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Endpoint.publish(<span class="string">"http://127.0.0.1:9991/Service/ServiceServer"</span>, <span class="keyword">new</span> ServiceServer());</span><br><span class="line">        System.out.print(<span class="string">"service open success! Enjoy it..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>打开网址：<a href="http://127.0.0.1:9991/Service/ServiceServer?wsdl" target="_blank" rel="noopener">http://127.0.0.1:9991/Service/ServiceServer?wsdl</a></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> Published by JAX-WS RI (http://jax-ws.java.net). RI's version is JAX-WS RI 2.2.9-b130926.1035 svn-revision#5f6196f2b90e9460065a4c2f4e30e065b245e51e. </span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> Generated by JAX-WS RI (http://jax-ws.java.net). RI's version is JAX-WS RI 2.2.9-b130926.1035 svn-revision#5f6196f2b90e9460065a4c2f4e30e065b245e51e. </span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">definitions</span> <span class="attr">xmlns:wsu</span>=<span class="string">"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"</span> <span class="attr">xmlns:wsp</span>=<span class="string">"http://www.w3.org/ns/ws-policy"</span> <span class="attr">xmlns:wsp1_2</span>=<span class="string">"http://schemas.xmlsoap.org/ws/2004/09/policy"</span> <span class="attr">xmlns:wsam</span>=<span class="string">"http://www.w3.org/2007/05/addressing/metadata"</span> <span class="attr">xmlns:soap</span>=<span class="string">"http://schemas.xmlsoap.org/wsdl/soap/"</span> <span class="attr">xmlns:tns</span>=<span class="string">"http://service.xxxaa.xxx.net/"</span> <span class="attr">xmlns:xsd</span>=<span class="string">"http://www.w3.org/2001/XMLSchema"</span> <span class="attr">xmlns</span>=<span class="string">"http://schemas.xmlsoap.org/wsdl/"</span> <span class="attr">targetNamespace</span>=<span class="string">"http://service.xxaa.xx/"</span> <span class="attr">name</span>=<span class="string">"ServiceServerService"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">types</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xsd:schema</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xsd:import</span> <span class="attr">namespace</span>=<span class="string">"http://service.xxaa.xx/"</span> <span class="attr">schemaLocation</span>=<span class="string">"http://127.0.0.1:9991/Service/ServiceServer?xsd=1"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">xsd:schema</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">types</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">message</span> <span class="attr">name</span>=<span class="string">"serverPrint"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">part</span> <span class="attr">name</span>=<span class="string">"parameters"</span> <span class="attr">element</span>=<span class="string">"tns:serverPrint"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">message</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">message</span> <span class="attr">name</span>=<span class="string">"serverPrintResponse"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">part</span> <span class="attr">name</span>=<span class="string">"parameters"</span> <span class="attr">element</span>=<span class="string">"tns:serverPrintResponse"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">message</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">portType</span> <span class="attr">name</span>=<span class="string">"ServiceServer"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">operation</span> <span class="attr">name</span>=<span class="string">"serverPrint"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">wsam:Action</span>=<span class="string">"http://service.xxaa.xx/ServiceServer/serverPrintRequest"</span> <span class="attr">message</span>=<span class="string">"tns:serverPrint"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">output</span> <span class="attr">wsam:Action</span>=<span class="string">"http://service.xxaa.xx/ServiceServer/serverPrintResponse"</span> <span class="attr">message</span>=<span class="string">"tns:serverPrintResponse"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">operation</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">portType</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">binding</span> <span class="attr">name</span>=<span class="string">"ServiceServerPortBinding"</span> <span class="attr">type</span>=<span class="string">"tns:ServiceServer"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">soap:binding</span> <span class="attr">transport</span>=<span class="string">"http://schemas.xmlsoap.org/soap/http"</span> <span class="attr">style</span>=<span class="string">"document"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">operation</span> <span class="attr">name</span>=<span class="string">"serverPrint"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">soap:operation</span> <span class="attr">soapAction</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">soap:body</span> <span class="attr">use</span>=<span class="string">"literal"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">soap:body</span> <span class="attr">use</span>=<span class="string">"literal"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">operation</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">binding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">service</span> <span class="attr">name</span>=<span class="string">"ServiceServerService"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">port</span> <span class="attr">name</span>=<span class="string">"ServiceServerPort"</span> <span class="attr">binding</span>=<span class="string">"tns:ServiceServerPortBinding"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">soap:address</span> <span class="attr">location</span>=<span class="string">"http://127.0.0.1:9991/Service/ServiceServer"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><h3 id="流程-1"><a href="#流程-1" class="headerlink" title="流程"></a>流程</h3><ol><li><p>搭建一个普通的Project工程</p></li><li><p>在Project工程建立一个类，并命名（这里我命名为ServiceClient，其他也没关系）</p></li><li><p>cmd编译Service开启服务，提供的Web服务描述语言，生成对应客户端的代码（解析WSDL、生成代码、编译代码）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> wsimport -s /project/src -p package.client -keep http://127.0.0.1:9991/Service/ServiceServer?wsdl</span><br><span class="line"></span><br><span class="line">wsimport -s C:/WebServiceProject/src -p xx.xxaa.client -keep http://127.0.0.1:9991/Service/ServiceServer?wsdl</span><br></pre></td></tr></table></figure></li><li><p>编写main方法，连接服务</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> net.xxx.xxxaa.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xx.xxaa.client.ServiceServer;</span><br><span class="line"><span class="keyword">import</span> xx.xxaa.client.ServiceServerService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 请求服务</span></span><br><span class="line">ServiceServer server = <span class="keyword">new</span> ServiceServerService().getServiceServerPort();</span><br><span class="line">        <span class="comment">// 调用服务</span></span><br><span class="line">String printData = server.serverPrint(<span class="string">"2018年11月2日09:51:45"</span>);</span><br><span class="line">System.out.println(printData);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印内容如下：</span></span><br><span class="line"><span class="comment">// Server print: 2018年11月2日09:51:45</span></span><br></pre></td></tr></table></figure></li></ol><p>### </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;服务端&quot;&gt;&lt;a href=&quot;#服务端&quot; class=&quot;headerlink&quot; title=&quot;服务端&quot;&gt;&lt;/a&gt;服务端&lt;/h2&gt;&lt;h3 id=&quot;最简单的WebService服务端&quot;&gt;&lt;a href=&quot;#最简单的WebService服务端&quot; class=&quot;header
      
    
    </summary>
    
    
      <category term="java" scheme="https://pinksmallfan.github.io/WenChongAndJiaoKou/tags/java/"/>
    
  </entry>
  
</feed>
