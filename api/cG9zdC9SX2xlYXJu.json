{"title":"R语言的基本使用","date":"2018-10-16T11:43:39.000Z","slug":"R_learn","tags":["R语言"],"updated":"2018-11-04T02:02:53.242Z","content":"<h2 id=\"读取数据\"><a href=\"#读取数据\" class=\"headerlink\" title=\"读取数据\"></a>读取数据</h2><h3 id=\"操作路径\"><a href=\"#操作路径\" class=\"headerlink\" title=\"操作路径\"></a>操作路径</h3><figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setwd(<span class=\"string\">'path'</span>)\t\t\t\t\t\t<span class=\"comment\"># 设置当前路径</span></span><br><span class=\"line\">getwd()    \t\t\t\t\t\t\t<span class=\"comment\"># 查看当前目录</span></span><br><span class=\"line\"><span class=\"comment\"># 举例：</span></span><br><span class=\"line\"><span class=\"comment\"># mac</span></span><br><span class=\"line\">setwd(<span class=\"string\">'/Users/zoeZhang/R'</span>)</span><br><span class=\"line\"><span class=\"comment\"># windows</span></span><br><span class=\"line\">setwd(<span class=\"string\">'C:/Users/zoeZhang/Destop/R'</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"加载与操作工具包\"><a href=\"#加载与操作工具包\" class=\"headerlink\" title=\"加载与操作工具包\"></a>加载与操作工具包</h3><figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">library</span>(survival)\t\t\t\t\t<span class=\"comment\"># 加载survival工具包</span></span><br><span class=\"line\">biocLite(<span class=\"string\">'package'</span>)\t\t\t\t\t<span class=\"comment\"># 安装package工具包</span></span><br><span class=\"line\">install.packages(<span class=\"string\">'package'</span>)\t\t\t<span class=\"comment\"># 安装package工具包</span></span><br><span class=\"line\">remove.packages(<span class=\"string\">'package'</span>)\t\t\t<span class=\"comment\"># 删除package工具包</span></span><br><span class=\"line\">update.packages()\t\t\t\t\t<span class=\"comment\"># 更新所有工具包</span></span><br><span class=\"line\"><span class=\"keyword\">source</span>(<span class=\"string\">'https://bioconductor.org/biocLite.R'</span>)\t<span class=\"comment\"># 根据URL的方式来下载对应的工具包</span></span><br><span class=\"line\"></span><br><span class=\"line\">packages(all.available=<span class=\"literal\">T</span>)     \t\t<span class=\"comment\"># 查看所有package</span></span><br><span class=\"line\">search()\t\t\t\t\t\t\t<span class=\"comment\"># 查看已经加载的 package</span></span><br><span class=\"line\"><span class=\"keyword\">detach</span>(package:package1)\t\t\t<span class=\"comment\"># 移除不需要的package1包</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"数据类型转换\"><a href=\"#数据类型转换\" class=\"headerlink\" title=\"数据类型转换\"></a>数据类型转换</h3><figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data&lt;-as.character(number);\t\t<span class=\"comment\"># 将数字类型的数据，number转为字符串的data</span></span><br><span class=\"line\">data&lt;-as.numeric(string);\t\t<span class=\"comment\"># 将数字符串的数据，string转为数字类型的data</span></span><br><span class=\"line\">data&lt;-as.array(original);\t\t<span class=\"comment\"># 将original转为数组类型的data</span></span><br><span class=\"line\">data&lt;-as.data.frame(array);\t\t<span class=\"comment\"># 将矩阵类型的数据，original转为数据框类型的data</span></span><br><span class=\"line\">data&lt;-as.matrix(original);\t\t<span class=\"comment\"># 将original转为矩阵类型的data</span></span><br><span class=\"line\">is.character(data);\t\t\t\t<span class=\"comment\"># 判断data是什么类型</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"加载数据\"><a href=\"#加载数据\" class=\"headerlink\" title=\"加载数据\"></a>加载数据</h3><figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#创建一个example变量，读取example.txt到example上</span></span><br><span class=\"line\">example&lt;-read.table(<span class=\"string\">'example.txt'</span>,fill=<span class=\"literal\">TRUE</span>,head=<span class=\"literal\">TRUE</span>)\t\t</span><br><span class=\"line\">head(example)\t\t\t\t<span class=\"comment\"># 显示example变量的前行数据</span></span><br><span class=\"line\">os&lt;-example[,<span class=\"string\">'survival'</span>]\t<span class=\"comment\"># 将example变量的surival相关数据输出到os变量</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"生存分析\"><a href=\"#生存分析\" class=\"headerlink\" title=\"生存分析\"></a>生存分析</h2><h3 id=\"关键函数\"><a href=\"#关键函数\" class=\"headerlink\" title=\"关键函数\"></a>关键函数</h3><figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Surv(time,event)\t\t<span class=\"comment\"># time:时间发生的跟踪时间、event：预期事件的发生状态</span></span><br><span class=\"line\">survfit(formula)\t\t<span class=\"comment\"># formula：预测变量之间的关系</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"举例\"><a href=\"#举例\" class=\"headerlink\" title=\"举例\"></a>举例</h3><figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fit&lt;-survfit(Surv(time,event)~group,type=<span class=\"string\">'kaplan-meier'</span>)</span><br><span class=\"line\"><span class=\"comment\"># 获取数据的统计摘要和性质</span></span><br><span class=\"line\">summary(fit)\t\t\t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#其中formula是Surv(time,event)~group,type='kaplan-meier'</span></span><br><span class=\"line\"><span class=\"comment\"># 开始画图，画点，fit：生存分析的数值向量 lty：线条类型</span></span><br><span class=\"line\">plot(fit,lty=<span class=\"number\">1</span>:<span class=\"number\">3</span>)\t\t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># list(a,b)，存放两个元素的列表， c(a,b),创建一个有2个元素的向量，lty：线条类型</span></span><br><span class=\"line\"><span class=\"comment\"># 添加图例，即坐标轴这些</span></span><br><span class=\"line\">legend(list(x=<span class=\"number\">0.2</span>,y=<span class=\"number\">0.2</span>), c(<span class=\"string\">\"Group1\"</span>, <span class=\"string\">\"Group2\"</span>), lty = <span class=\"number\">1</span>:<span class=\"number\">3</span>) \t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 用于不同组的统计检验</span></span><br><span class=\"line\">survdiff(Surv(os,event)~group,rho=<span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"核苷酸芯片数据的分析\"><a href=\"#核苷酸芯片数据的分析\" class=\"headerlink\" title=\"核苷酸芯片数据的分析\"></a>核苷酸芯片数据的分析</h2><h3 id=\"关键函数-affy\"><a href=\"#关键函数-affy\" class=\"headerlink\" title=\"关键函数(affy)\"></a>关键函数(affy)</h3><figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 读取当前目录raw_data文件的细胞文件，将值赋予给affy.data对象</span></span><br><span class=\"line\"><span class=\"comment\"># 当前目录可以通过getwd()和setwd('xxxx/x/xx/')来获取与设置</span></span><br><span class=\"line\">affy.data = ReadAffy(celfile.path=<span class=\"string\">\"raw_data\"</span>) \t</span><br><span class=\"line\"><span class=\"comment\"># 查看芯片基本的数据信息</span></span><br><span class=\"line\">show(affy.data)</span><br><span class=\"line\"><span class=\"comment\"># 查看芯片的样品名</span></span><br><span class=\"line\">sampleNames(affy.data)</span><br><span class=\"line\"><span class=\"comment\"># 读取affy.data数据中的A.CEL/B.CEL/C.CEL/D.CEL数据，并赋值到affy.data.E上</span></span><br><span class=\"line\">affy.data.E=affy.data[,c(<span class=\"string\">\"A.CEL\"</span>, <span class=\"string\">\"B.CEL\"</span>, <span class=\"string\">\"C.CEL\"</span>, <span class=\"string\">\"D.CEL\"</span>)]</span><br></pre></td></tr></table></figure>\n<h3 id=\"关键函数（affyPLM）\"><a href=\"#关键函数（affyPLM）\" class=\"headerlink\" title=\"关键函数（affyPLM）\"></a>关键函数（affyPLM）</h3><figure class=\"highlight r\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">library</span>(gcrma)</span><br><span class=\"line\"><span class=\"keyword\">library</span>(preprocessCore)</span><br><span class=\"line\"><span class=\"comment\"># 导入affyPLM需要导入以上两个包</span></span><br><span class=\"line\"><span class=\"keyword\">library</span>(affyPLM)</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">Pset &lt;- fitPLM(affy.data.E)</span><br></pre></td></tr></table></figure>\n<h2 id=\"参考网站\"><a href=\"#参考网站\" class=\"headerlink\" title=\"参考网站\"></a>参考网站</h2><ol>\n<li>生存分析函数小结：<a href=\"https://blog.csdn.net/shmilyringpull/article/details/17529637\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/shmilyringpull/article/details/17529637</a></li>\n</ol>\n","prev":{"title":"Zabbix部署细节","slug":"Zabbix部署细节"},"next":{"title":"删除github的历史记录","slug":"deleteGitHubHistory"},"link":"https://pinksmallfan.github.io/WenChongAndJiaoKou/WenChongAndJiaoKou/2018/10/16/R_learn/","toc":[{"title":"读取数据","id":"读取数据","index":"1","children":[{"title":"操作路径","id":"操作路径","index":"1.1"},{"title":"加载与操作工具包","id":"加载与操作工具包","index":"1.2"},{"title":"数据类型转换","id":"数据类型转换","index":"1.3"},{"title":"加载数据","id":"加载数据","index":"1.4"}]},{"title":"生存分析","id":"生存分析","index":"2","children":[{"title":"关键函数","id":"关键函数","index":"2.1"},{"title":"举例","id":"举例","index":"2.2"}]},{"title":"核苷酸芯片数据的分析","id":"核苷酸芯片数据的分析","index":"3","children":[{"title":"关键函数(affy)","id":"关键函数-affy","index":"3.1"},{"title":"关键函数（affyPLM）","id":"关键函数（affyPLM）","index":"3.2"}]},{"title":"参考网站","id":"参考网站","index":"4"}]}