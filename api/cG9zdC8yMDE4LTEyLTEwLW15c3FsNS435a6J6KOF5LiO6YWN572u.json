{"title":"mysql5.7免安装与配置","date":"2018-12-10T08:20:02.000Z","slug":"2018-12-10-mysql5.7安装与配置","tags":["安装"],"updated":"2018-12-11T17:27:45.845Z","content":"<h2 id=\"解压文件\"><a href=\"#解压文件\" class=\"headerlink\" title=\"解压文件\"></a>解压文件</h2><p>1.svn目录：\\192.168.0.8\\software\\数据库软件\\mysql\\mysql-5.7.18-winx64.zip</p>\n<p>2.解压：mysql-5.7.18-winx64安装包，解压结果如下：</p>\n<div class=\"article-img\"><p><img src=\"..\\uploads\\1544549095711.png\" alt=\"1544549095711\"></p></div>\n<p>3.因为是免安装版本（其实msi安装也一样），所以就只有以上的文件</p>\n<p>4.添加一个data文件夹到mysql的根目录下（与bin、docs等同级目录）</p>\n<h2 id=\"安装配置\"><a href=\"#安装配置\" class=\"headerlink\" title=\"安装配置\"></a>安装配置</h2><ol>\n<li>mysql5.7及以上的版本，如果没有my.default.ini，那么也<strong>不需要什么my.ini</strong></li>\n<li>环境变量，设置MYSQL_HOME，并添加   ;%MYSQL_HOME%/bin到path上</li>\n<li>管理员登录cmd</li>\n<li>mysqld的安装：mysqld -install（删除mysql：mysqld -remove）</li>\n<li>设置密码默认为空（重要）：mysqld  –initialize-insecure –user=mysql</li>\n<li>开启服务：net start mysql（关闭服务：net stop mysql）</li>\n<li>登录mysql：mysql -h localhost -u root -p</li>\n<li>退出mysql：在mysql&gt;输入quit</li>\n</ol>\n<h2 id=\"遇到的坑\"><a href=\"#遇到的坑\" class=\"headerlink\" title=\"遇到的坑\"></a>遇到的坑</h2><p>​    我也是佩服我自己，装一次简简单单的mysql，会遇到那么多问题！无奈，只能一个个解决，不过静下心来解决，会发现自己原本可以快速解决的，而不是踩了一个坑后又一个坑，其实还是没有静下心来思考！</p>\n<ol>\n<li><p>系统无法找到指定文件：</p>\n<p>原因：重装了mysql，但是安装过程中，一些变量的填写有问题，比如my.ini的地址；也有可能是因为免安装的过程中，没有明确mysqld的目录。</p>\n<p>解决方法：运行-regedit、在HKYE_LOCAL_MACHINE/SYSTEM/CurrentControlSet/Services/Mysql，修改ImagePath为mysqld的实际地址，比如说d:/mysql/bin/mnysqld</p>\n<p>参考：<a href=\"https://blog.csdn.net/digitalmon/article/details/78152187、http://www.cnblogs.com/mlgjb/p/8761408.html、https://blog.csdn.net/lwl20140904/article/details/80806730\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/digitalmon/article/details/78152187、http://www.cnblogs.com/mlgjb/p/8761408.html、https://blog.csdn.net/lwl20140904/article/details/80806730</a></p>\n</li>\n</ol>\n<ol start=\"2\">\n<li><p>mysql服务正在启动或停止中请稍后片刻再试一下</p>\n<p>原因：因为有一些程序占用着mysqld，比如说，windows的【服务】，即服务管理窗口也会占用，所以需要关闭窗口，还需要卸载mysql，接着重新mysqld -remove，然后install就OK</p>\n<p>参考：<a href=\"https://blog.csdn.net/qsysz_/article/details/82845152、https://blog.csdn.net/bluefish_flying/article/details/77930375\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/qsysz_/article/details/82845152、https://blog.csdn.net/bluefish_flying/article/details/77930375</a></p>\n</li>\n</ol>\n<ol start=\"3\">\n<li><p>彻底卸载mysql</p>\n<p>1）控制面板-管理工具-服务，停止mysql服务，或者是命令：net stop mysql</p>\n<p>2）关闭进程（可以通过taskkill /pid 1688 /F的方式强制删除进程）</p>\n<p>3）通过控制面板卸载mysql（如果有mysql字样的话）</p>\n<p>4）删除C盘带有mysql和my.ini等字样的文件与文件夹</p>\n<p>5）注册表删除mysql，运行-regedit，删除如下：</p>\n<p>HKEY_LOCAL_MACHINE\\SYSTEM\\ControlSet001\\Services\\Eventlog\\Application\\MySQL文件夹</p>\n<p>HKEY_LOCAL_MACHINE\\SYSTEM\\ControlSet002\\Services\\Eventlog\\Application\\MySQL文件夹。</p>\n<p>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Eventlog\\Application\\MySQL文件夹</p>\n<p>参考：<a href=\"https://www.cnblogs.com/Sue_/p/3274063.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/Sue_/p/3274063.html</a></p>\n</li>\n</ol>\n<ol start=\"4\">\n<li><p>1067</p>\n<p>原因：my.ini配置的问题</p>\n<p>解决方法：</p>\n<p>1）如果是5.7及以上的，直接删除my.ini，重新卸载和安装</p>\n<p>2）my.ini中engine的，改为default-storage-engine=MyISAM</p>\n<p>参考：<a href=\"https://www.cnblogs.com/hoobey/p/5220090.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/hoobey/p/5220090.html</a></p>\n</li>\n</ol>\n<ol start=\"5\">\n<li><p>1058</p>\n<p>参考：<a href=\"https://blog.csdn.net/u012586848/article/details/46860839\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/u012586848/article/details/46860839</a></p>\n</li>\n</ol>\n<ol start=\"6\">\n<li><p>mysql服务无法启动</p>\n<p>原因：mysql免安装中，my.ini中明确有一个data文件夹，但是实际上没有新建这个data文件夹</p>\n<p>解决，在mysql根目录（docs、bin等目录同级），创建一个data文件夹</p>\n<p>参考：<a href=\"https://www.cnblogs.com/xixihuang/p/5663559.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/xixihuang/p/5663559.html</a></p>\n</li>\n</ol>\n<ol start=\"7\">\n<li><p>windows服务：被标记为删除</p>\n<p>原因：后台线程未关闭，mysql被占用</p>\n<p>解决：通过资源管理器结束进程，关闭服务窗口（可参考mysql服务正在启动或停止中请稍后片刻再试一下）</p>\n<p>参考：<a href=\"https://blog.csdn.net/iceagezh/article/details/79004443、https://blog.csdn.net/bluefish_flying/article/details/77930375\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/iceagezh/article/details/79004443、https://blog.csdn.net/bluefish_flying/article/details/77930375</a></p>\n</li>\n</ol>\n<ol start=\"8\">\n<li><p>mysql忘记密码</p>\n<p>1）关闭mysql服务（服务管理中停止mysql，或者是命令：net stop mysql）</p>\n<p>2）在mysql的目录下，进入bin，打开命令行，输入mysqld –skip-grant-tables，会自动挂起</p>\n<p>3）重新打开一个命令行，输入mysql -h localhost -uroot -p</p>\n<p>4）选择能够修改用户的数据库：use mysql</p>\n<p>5）mysql5.7及以上，修改用户密码：UPDATE user SET authentication_string=PASSWORD(“123456”) WHERE User=”root”; flush privileges</p>\n<p>6）删除挂起的命令行，在新开的命令行，输入root/123456</p>\n<p>参考：<a href=\"https://www.cnblogs.com/SmartNing/p/5178628.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/SmartNing/p/5178628.html</a></p>\n</li>\n</ol>\n<ol start=\"9\">\n<li><p>查看文件或文件夹被那个进程占用</p>\n<p>1）打开资源管理器（桌面栏，右键）</p>\n<p>2）任务管理器-性能-资源监视器-CPU-关联的句柄</p>\n<p>3）输入文件名、文件夹名，进行搜索</p>\n<p>参考：<a href=\"https://blog.csdn.net/jlminghui/article/details/78456182\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/jlminghui/article/details/78456182</a></p>\n</li>\n</ol>\n<ol start=\"10\">\n<li><p>mysql初始化timestamp</p>\n<p>原因：mysql的timestamp初始化不允许为不合法的字符</p>\n<p>解决：修改sql_mode</p>\n<p>1）查看，show variables like ‘sql_mode’;</p>\n<p>2）修改，set session<br>sql_mode=’ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION’;</p>\n<p>参考：<a href=\"https://blog.csdn.net/cuiaamay/article/details/53896623\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/cuiaamay/article/details/53896623</a></p>\n</li>\n</ol>\n<ol start=\"11\">\n<li>mysql安装缺少C++环境：<a href=\"https://www.microsoft.com/en-us/download/confirmation.aspx?id=40784\" target=\"_blank\" rel=\"noopener\">https://www.microsoft.com/en-us/download/confirmation.aspx?id=40784</a></li>\n</ol>\n<h2 id=\"用到的命令\"><a href=\"#用到的命令\" class=\"headerlink\" title=\"用到的命令\"></a>用到的命令</h2><p>关闭防火墙：netsh firewall set opmode disable</p>\n<p>杀死某个进程：taskkill /pid 1688 /F</p>\n","prev":{"title":"spring-boot2.1+thymeleaf简单的web开发","slug":"2018-12-11-spring-boot2.1+thymeleaf简单的web开发"},"next":{"title":"docker的使用","slug":"2018-12-5-docker的使用"},"link":"https://pinksmallfan.github.io/WenChongAndJiaoKou/WenChongAndJiaoKou/2018/12/10/2018-12-10-mysql5.7安装与配置/","toc":[{"title":"解压文件","id":"解压文件","index":"1"},{"title":"安装配置","id":"安装配置","index":"2"},{"title":"遇到的坑","id":"遇到的坑","index":"3"},{"title":"用到的命令","id":"用到的命令","index":"4"}]}