{"title":"ssh key应用(git远程服务器)","date":"2018-10-21T10:07:27.000Z","slug":"ssh-keygen应用","tags":["配置"],"updated":"2018-11-15T16:10:25.938Z","content":"<h2 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h2><h3 id=\"什么是公钥、私钥\"><a href=\"#什么是公钥、私钥\" class=\"headerlink\" title=\"什么是公钥、私钥\"></a>什么是公钥、私钥</h3><h3 id=\"能够解决什么问题\"><a href=\"#能够解决什么问题\" class=\"headerlink\" title=\"能够解决什么问题\"></a>能够解决什么问题</h3><h2 id=\"本地生成公钥与密钥\"><a href=\"#本地生成公钥与密钥\" class=\"headerlink\" title=\"本地生成公钥与密钥\"></a>本地生成公钥与密钥</h2><p>### </p>\n<h4 id=\"在本地生成密钥对\"><a href=\"#在本地生成密钥对\" class=\"headerlink\" title=\"在本地生成密钥对\"></a>在本地生成密钥对</h4><p>通过git bash的编码</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -b 4096 -C \"xxxx@xx.com\"\t\t# 输入密码，生成密钥对：xxxa和xxxa.pub</span><br><span class=\"line\">cp xxxa ~/.ssh/\t\t# 将密钥放到指定~/.ssh文件夹下</span><br><span class=\"line\">cat xxxa.pub\t\t# 打印出公钥文件，这一个可以先拷贝起来，用于服务端使用</span><br></pre></td></tr></table></figure>\n<p>将密钥放到指定的ssh路径下（git默认读取的ssh文件路径）</p>\n<h4 id=\"将私钥添加到缓存上\"><a href=\"#将私钥添加到缓存上\" class=\"headerlink\" title=\"将私钥添加到缓存上\"></a>将私钥添加到缓存上</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-add ~/.ssh/xxxa\t\t# ssh-add的作用主要将密钥添加到 ssh-agent 的高速缓存中，这样在当前会话中就不需要再次输入密码了</span><br></pre></td></tr></table></figure>\n<h2 id=\"建立github的ssh-key\"><a href=\"#建立github的ssh-key\" class=\"headerlink\" title=\"建立github的ssh key\"></a>建立github的ssh key</h2><h4 id=\"登录github\"><a href=\"#登录github\" class=\"headerlink\" title=\"登录github\"></a>登录github</h4><blockquote>\n<p><a href=\"https://github.com/settings/keys\" target=\"_blank\" rel=\"noopener\">https://github.com/settings/keys</a></p>\n</blockquote>\n<p>点击New SSH key，将xxxa.pub公钥文件的拷贝值黏贴进来，title随便填，只是方便看。</p>\n<h4 id=\"在本机测试连接github\"><a href=\"#在本机测试连接github\" class=\"headerlink\" title=\"在本机测试连接github\"></a>在本机测试连接github</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -T git@github.com\t# 因为我们把项目寄托在了github的服务器上了，所以是github.com</span><br></pre></td></tr></table></figure>\n<h2 id=\"建立VPS服务的ssh-key\"><a href=\"#建立VPS服务的ssh-key\" class=\"headerlink\" title=\"建立VPS服务的ssh key\"></a>建立VPS服务的ssh key</h2><h3 id=\"拷贝公钥编码\"><a href=\"#拷贝公钥编码\" class=\"headerlink\" title=\"拷贝公钥编码\"></a>拷贝公钥编码</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat xxxa.pub\t\t# 打印出公钥文件，这一个可以先拷贝起来，用于服务端使用</span><br></pre></td></tr></table></figure>\n<h3 id=\"在vps服务上存放公钥文件\"><a href=\"#在vps服务上存放公钥文件\" class=\"headerlink\" title=\"在vps服务上存放公钥文件\"></a>在vps服务上存放公钥文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi ~/.ssh/git_authorzied_keys\t\t# 前提是配置好了ssh服务</span><br></pre></td></tr></table></figure>\n<h3 id=\"在本机测试连接github-1\"><a href=\"#在本机测试连接github-1\" class=\"headerlink\" title=\"在本机测试连接github\"></a>在本机测试连接github</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -T git@xxxx.com\t# git是用户，因为我们把项目寄托在了VPS服务器上了，所以是ip地址或者域名</span><br></pre></td></tr></table></figure>\n<h2 id=\"配置多个git服务\"><a href=\"#配置多个git服务\" class=\"headerlink\" title=\"配置多个git服务\"></a>配置多个git服务</h2><p> 可能公司与私用的github不一样，但是我们希望同一个客户端，能够同时同步到两个服务器。</p>\n<h3 id=\"ssh目录下配置config\"><a href=\"#ssh目录下配置config\" class=\"headerlink\" title=\".ssh目录下配置config\"></a>.ssh目录下配置config</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Host github.com</span><br><span class=\"line\">   User git</span><br><span class=\"line\">   Hostname github.com  \t\t\t\t#第一个的git地址</span><br><span class=\"line\">   IdentityFile ~/.ssh/keyPaira  \t\t#访问第一个git的SSH KEY</span><br><span class=\"line\">   Port   9102  \t\t\t\t\t\t#第一个的git端口</span><br><span class=\"line\"></span><br><span class=\"line\">Host xxxb.com\t</span><br><span class=\"line\">   User git</span><br><span class=\"line\">   Hostname xxxb.com\t\t\t\t#第二个的github的地址</span><br><span class=\"line\">   IdentityFile ~/.ssh/keyPairb  \t#访问第二个的github的SSH KEY</span><br><span class=\"line\">   Port   22</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> PS：在git中，因为字符编码的问题，注释含有中文会出错</span></span><br></pre></td></tr></table></figure>\n","prev":{"title":"test","slug":"2018-10-21-test"},"next":{"title":"Namesilp购买域名","slug":"Namesilp购买域名"},"link":"https://pinksmallfan.github.io/WenChongAndJiaoKou/WenChongAndJiaoKou/2018/10/21/ssh-keygen应用/","toc":[{"title":"本地生成公钥与密钥","id":"本地生成公钥与密钥","index":"1"},{"title":"建立github的ssh key","id":"建立github的ssh-key","index":"2"},{"title":"建立VPS服务的ssh key","id":"建立VPS服务的ssh-key","index":"3","children":[{"title":"拷贝公钥编码","id":"拷贝公钥编码","index":"3.1"},{"title":"在vps服务上存放公钥文件","id":"在vps服务上存放公钥文件","index":"3.2"},{"title":"在本机测试连接github","id":"在本机测试连接github-1","index":"3.3"}]},{"title":"配置多个git服务","id":"配置多个git服务","index":"4","children":[{"title":".ssh目录下配置config","id":"ssh目录下配置config","index":"4.1"}]}]}