{"title":"Java WebService服务端与客户端的搭建","date":"2018-11-02T01:29:00.000Z","slug":"2018-11-2-Java-WebService服务端与客户端的搭建","tags":["java"],"updated":"2018-11-02T13:02:00.830Z","content":"<h2 id=\"服务端\"><a href=\"#服务端\" class=\"headerlink\" title=\"服务端\"></a>服务端</h2><h3 id=\"最简单的WebService服务端\"><a href=\"#最简单的WebService服务端\" class=\"headerlink\" title=\"最简单的WebService服务端\"></a>最简单的WebService服务端</h3><h4 id=\"流程\"><a href=\"#流程\" class=\"headerlink\" title=\"流程\"></a>流程</h4><ol>\n<li>搭建一个web工程</li>\n<li>在web工程建立包（这里我命名为xx.xxaa，其他也没关系）</li>\n<li>在web工程建立一个类，并命名（这里我命名为ServiceServer，其他也没关系）</li>\n<li>编写main方法，开启服务</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.jws.WebService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.xml.ws.Endpoint;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@WebService</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ServiceServer</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 客户端将会调用的方法（服务端被调用的方法）</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> something</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">serverPrint</span><span class=\"params\">(String something)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"Server print: \"</span>+something;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        Endpoint.publish(<span class=\"string\">\"http://127.0.0.1:9991/Service/ServiceServer\"</span>, <span class=\"keyword\">new</span> ServiceServer());</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\"service open success! Enjoy it...\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>打开网址：<a href=\"http://127.0.0.1:9991/Service/ServiceServer?wsdl\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:9991/Service/ServiceServer?wsdl</a></li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\"> Published by JAX-WS RI (http://jax-ws.java.net). RI's version is JAX-WS RI 2.2.9-b130926.1035 svn-revision#5f6196f2b90e9460065a4c2f4e30e065b245e51e. </span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\"> Generated by JAX-WS RI (http://jax-ws.java.net). RI's version is JAX-WS RI 2.2.9-b130926.1035 svn-revision#5f6196f2b90e9460065a4c2f4e30e065b245e51e. </span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns:wsu</span>=<span class=\"string\">\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"</span> <span class=\"attr\">xmlns:wsp</span>=<span class=\"string\">\"http://www.w3.org/ns/ws-policy\"</span> <span class=\"attr\">xmlns:wsp1_2</span>=<span class=\"string\">\"http://schemas.xmlsoap.org/ws/2004/09/policy\"</span> <span class=\"attr\">xmlns:wsam</span>=<span class=\"string\">\"http://www.w3.org/2007/05/addressing/metadata\"</span> <span class=\"attr\">xmlns:soap</span>=<span class=\"string\">\"http://schemas.xmlsoap.org/wsdl/soap/\"</span> <span class=\"attr\">xmlns:tns</span>=<span class=\"string\">\"http://service.netcaaa.netca.net/\"</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema\"</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://schemas.xmlsoap.org/wsdl/\"</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">\"http://service.xxaa.xx/\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ServiceServerService\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">types</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">xsd:schema</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">xsd:import</span> <span class=\"attr\">namespace</span>=<span class=\"string\">\"http://service.xxaa.xx/\"</span> <span class=\"attr\">schemaLocation</span>=<span class=\"string\">\"http://127.0.0.1:9991/Service/ServiceServer?xsd=1\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">xsd:schema</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">types</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">message</span> <span class=\"attr\">name</span>=<span class=\"string\">\"serverPrint\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">part</span> <span class=\"attr\">name</span>=<span class=\"string\">\"parameters\"</span> <span class=\"attr\">element</span>=<span class=\"string\">\"tns:serverPrint\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">message</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">message</span> <span class=\"attr\">name</span>=<span class=\"string\">\"serverPrintResponse\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">part</span> <span class=\"attr\">name</span>=<span class=\"string\">\"parameters\"</span> <span class=\"attr\">element</span>=<span class=\"string\">\"tns:serverPrintResponse\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">message</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">portType</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ServiceServer\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">operation</span> <span class=\"attr\">name</span>=<span class=\"string\">\"serverPrint\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">wsam:Action</span>=<span class=\"string\">\"http://service.xxaa.xx/ServiceServer/serverPrintRequest\"</span> <span class=\"attr\">message</span>=<span class=\"string\">\"tns:serverPrint\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">output</span> <span class=\"attr\">wsam:Action</span>=<span class=\"string\">\"http://service.xxaa.xx/ServiceServer/serverPrintResponse\"</span> <span class=\"attr\">message</span>=<span class=\"string\">\"tns:serverPrintResponse\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">operation</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">portType</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">binding</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ServiceServerPortBinding\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"tns:ServiceServer\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">soap:binding</span> <span class=\"attr\">transport</span>=<span class=\"string\">\"http://schemas.xmlsoap.org/soap/http\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"document\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">operation</span> <span class=\"attr\">name</span>=<span class=\"string\">\"serverPrint\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">soap:operation</span> <span class=\"attr\">soapAction</span>=<span class=\"string\">\"\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">soap:body</span> <span class=\"attr\">use</span>=<span class=\"string\">\"literal\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">input</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">output</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">soap:body</span> <span class=\"attr\">use</span>=<span class=\"string\">\"literal\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">output</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">operation</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">binding</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">service</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ServiceServerService\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">port</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ServiceServerPort\"</span> <span class=\"attr\">binding</span>=<span class=\"string\">\"tns:ServiceServerPortBinding\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">soap:address</span> <span class=\"attr\">location</span>=<span class=\"string\">\"http://127.0.0.1:9991/Service/ServiceServer\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">port</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">service</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"客户端\"><a href=\"#客户端\" class=\"headerlink\" title=\"客户端\"></a>客户端</h2><h3 id=\"流程-1\"><a href=\"#流程-1\" class=\"headerlink\" title=\"流程\"></a>流程</h3><ol>\n<li><p>搭建一个普通的Project工程</p>\n</li>\n<li><p>在Project工程建立一个类，并命名（这里我命名为ServiceClient，其他也没关系）</p>\n</li>\n<li><p>cmd编译Service开启服务，提供的Web服务描述语言，生成对应客户端的代码（解析WSDL、生成代码、编译代码）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> wsimport -s /project/src -p package.client -keep http://127.0.0.1:9991/Service/ServiceServer?wsdl</span><br><span class=\"line\"></span><br><span class=\"line\">wsimport -s C:/WebServiceProject/src -p xx.xxaa.client -keep http://127.0.0.1:9991/Service/ServiceServer?wsdl</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编写main方法，连接服务</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> net.netca.netcaaa.test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> xx.xxaa.client.ServiceServer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> xx.xxaa.client.ServiceServerService;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ServiceClient</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        <span class=\"comment\">// 请求服务</span></span><br><span class=\"line\">\t\tServiceServer server = <span class=\"keyword\">new</span> ServiceServerService().getServiceServerPort();</span><br><span class=\"line\">        <span class=\"comment\">// 调用服务</span></span><br><span class=\"line\">\t\tString printData = server.serverPrint(<span class=\"string\">\"2018年11月2日09:51:45\"</span>);</span><br><span class=\"line\">\t\tSystem.out.println(printData);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 打印内容如下：</span></span><br><span class=\"line\"><span class=\"comment\">// Server print: 2018年11月2日09:51:45</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>### </p>\n","prev":{"title":"实验吧（困在栅栏里的凯撒）","slug":"2018-11-4-实验吧(困在栅栏里的凯撒)"},"next":{"title":"R语言下order、rank、sort的使用","slug":"R语言下order、rank、sort的使用"},"link":"https://pinksmallfan.github.io/WenChongAndJiaoKou/WenChongAndJiaoKou/2018/11/02/2018-11-2-Java-WebService服务端与客户端的搭建/","toc":[{"title":"服务端","id":"服务端","index":"1","children":[{"title":"最简单的WebService服务端","id":"最简单的WebService服务端","index":"1.1","children":[{"title":"流程","id":"流程","index":"1.1.1"}]}]},{"title":"客户端","id":"客户端","index":"2","children":[{"title":"流程","id":"流程-1","index":"2.1"}]}]}